/* SVN.committedRevision=1532223 */
if(require&&require.config){if(!window.pathurl){pathurl=window.pathurl="http://image.yihaodianimg.com/front-homepage"}require.config({baseUrl:pathurl+"/js/",paths:{common_cart:pathurl+"/mglobal/js/common/cart",common_lazyload:pathurl+"/mglobal/js/common/lazyload",common_popupTips:pathurl+"/mglobal/js/common/popupTips","common_yhd.storage":pathurl+"/mglobal/js/common/yhd.storage",common_slider:pathurl+"/mglobal/js/libs/slider",libs_c_slide:pathurl+"/mglobal/js/libs/c_slide",common_touch:pathurl+"/mglobal/js/libs/touch",common_mcookie:pathurl+"/mglobal/js/common/cookie",common_globalTiming:pathurl+"/mglobal/js/common/yhd.globalTiming",util_globalLogin:pathurl+"/mglobal/js/util/yhd.globalLogin",global_env:pathurl+"/mglobal/js/global/env","tracker_ref_yhd.global_spm":pathurl+"/mglobal/js/tracker/ref/yhd.global_spm","tracker_ref_yhd.uid":pathurl+"/mglobal/js/tracker/ref/yhd.uid",tracker_adContentTracker:pathurl+"/mglobal/js/tracker/adContentTracker",common_search:pathurl+"/mglobal/js/common/search_v2",biz_yhd_productInfo:pathurl+"/mglobal/js/biz/yhd.productInfo",biz_loli_page:pathurl+"/mglobal/js/biz/loli.page",biz_appDownloadBottom:pathurl+"/mglobal/js/biz/appDownloadBottom",biz_newUserMesssage:pathurl+"/mglobal/js/biz/newUserMesssage",common_popupWindow:pathurl+"/mglobal/js/common/popupWindow",common_redirect:pathurl+"/mglobal/js/common/redirect",native_redirect:pathurl+"/mglobal/js/common/redirectNative",common_fastclick:pathurl+"/mglobal/js/libs/fastclick",base_observer:pathurl+"/global/js/base/yhd.observer",global_provinceSwitch:pathurl+"/mglobal/js/global/provinceSwitch",libs_jweixin:pathurl+"/mglobal/js/libs/jweixin-1.0.0",common_yhd_webp:pathurl+"/mglobal/js/common/yhd.webp",common_back:pathurl+"/mglobal/js/common/yhd.globalBack",nearshop_redirectCart:pathurl+"/mglobal/js/nearshop/redirectCart",abtestPv_tracker:pathurl+"/mglobal/js/tracker/abtestPvTracker"}})
};$(function(){if($("#searchBox").size()>0){require(["common_search"],function(a){a.init()})}if($("#globalCart").size()>0||$("body>div.global-nav").size()>0){require(["common_cart"],function(a){a.refreshCart()})}if($("#globalMore").size()>0){$("#globalMore").on("click",function(){var a=$("#globalMoreList");if(a.hasClass("hide")){a.removeClass("hide")}else{a.addClass("hide")}});$(document.body).on("click",function(a){var b=a.target?a.target:a.srcElement;if(b){if($(b).closest("div.more_list").size()==0&&$(b).closest("#globalMore").size()==0){$("#globalMoreList").addClass("hide")}}})}if((typeof indexFlag!="undefined"&&indexFlag==1)||$("#cprovincename").length>0){require(["common_popupTips","common_mcookie","global_env"],function(c,a,b){var d=b.getProvinceId()||1;if(d&&d==currProvinceId){$("#cprovincename").html(c.proviceObj["p_"+d])
}else{if(currProvinceId){$("#cprovincename").html(c.proviceObj["p_"+currProvinceId])}else{$("#cprovincename").html(c.proviceObj.p_1)}}})}require(["common_back"],function(a){a.saveURL()})});$(function(){var b=$(".global-nav"),c=$(".global-nav__operate-wrap");c.on("click",function(){if(c.parent().hasClass("global-nav--current")){a()}else{d()}});var d=function(){b.addClass("global-nav--current")};var a=function(){b.removeClass("global-nav--current")};$(window).on("scroll",function(){if(b.hasClass("global-nav--current")){a()}});require(["global_env"],function(f){var e=f.isInApp();if(e){b.hide()}})});(function(){require(["common_popupTips","global_env"],function(e,d){if(typeof(_isNotglGeoLocation)!="undefined"&&_isNotglGeoLocation){return}var a=d.getProvinceId();if(!a&&glGeoLocation){var c=d.isInApp();if(!c){var b=URLPrefix.index||"http://m.yhd.com";e.getGeo(b+"/mw/provice",b+"/mw/index/",pathurl+"/mglobal/css/popupTips.css")}}})})();(function(){function a(){require(["common_globalTiming"],function(c){function b(){var f=1;
var h=[];if(typeof common_globalTimingRely!="undefined"&&common_globalTimingRely){var e=common_globalTimingRely.getRelyResource();if(e&&e.length>0){for(var d=0;d<e.length;d++){var g=e[d];if(g&&g.status!=1){f=0;break}else{if(g&&g.status==1){h.push(g.key+"_"+g.time)}}}}}if(f){c.loadBaseTime(h)}else{setTimeout(b,2000)}}setTimeout(b,2000)})}if(document.addEventListener){window.addEventListener("load",a,false)}else{if(document.attachEvent){document.attachEvent("onload",function(){a()})}}})();(function(){if(window.sessionStorage){var a=window.sessionStorage.getItem("latitude");var b=window.sessionStorage.getItem("longitude");if(a&&b){trackerContainer.addParameter(new Parameter("latitude",a));trackerContainer.addParameter(new Parameter("longitude",b))}}})();$(function(){var a=$("#g_newUserMesssage");
if(a){require(["biz_newUserMesssage"],function(b){})}});$(function(){var a=$("#g_openAppId");var b=document.referrer;if(a.length>0){if(b.indexOf("baidu.com")>-1||b.indexOf("haosou.com")>-1||b.indexOf("m.sm.cn")>-1||b.indexOf("sogou.com")>-1){require(["biz_appDownloadBottom"],function(c){})}else{a.hide()}}});function commonStatistics(c,d,a,b){addTrackPositionToCookie(d,a);if(b!=null&&b!=""){window.location=b+"?time="+(new Date().getTime())}else{gotracker(d,a,null)}}(function(){var c=window.utils||(window.utils={});var b=10;var a=function(d,e){var f="http:\\/\\/d(\\\d{1,2})\\.";var g=new RegExp(f,"i");if(g.test(d)){if(b==11){b=10}else{b=11}return d.replace(g,"http://d"+b+".")}else{return d}};c.avgImgUrl=a})();define("common_globalTiming",function(){var a={};var d={};var b=".";d.checkTpPage=function(f){if(!f){return null}var e=f.split(b);return e.length==2?e:null};d.glSpmcodeToId=function(g,f){if(typeof(_globalSpmDataModelJson)!="undefined"&&_globalSpmDataModelJson){var e=0;if(g){e=_globalSpmDataModelJson[g][f]}else{e=_globalSpmDataModelJson[f]}if(e){return e}}return f};function c(){var e=$("meta[name=tp_page]").attr("content");if(typeof(e)=="undefined"){return}e=d.checkTpPage(e);if(!e){return}return d.glSpmcodeToId(null,e[0])}a.timeToStr=function(f,h){var g=[];for(var e in f){if(f[e].value==-1){continue}g.push(f[e].name+"_"+f[e].value)}if(h){if((typeof h=="object")&&h.constructor==Array){if(h.length>0){g=g.concat(h)}}else{g.push(h)}}return(g.join("-"))};a.basicTime=function(g){if(!window.performance){return
}var j=window.performance,f=j.timing,h=j.navigation,e={redirectCount:{name:"RDTT",value:h.redirectCount},redirectTime:{name:"RDTM",value:f.redirectEnd-f.redirectStart},domainLookupTime:{name:"DMLKT",value:f.domainLookupEnd-f.domainLookupStart},connectTime:{name:"CONTT",value:f.connectEnd-f.connectStart},requestTime:{name:"REQT",value:f.responseStart-(f.requestStart||f.responseStart+1)},responseTime:{name:"RSPT",func:function(){var i=f.responseEnd-f.responseStart;if(f.domContentLoadedEventStart){if(i<0){i=0}}else{i=-1}return i},value:-1},domParsingTime:{name:"DMPT",func:function(){return f.domContentLoadedEventStart?f.domInteractive-f.domLoading:-1},value:-1},domLoadedTime:{name:"DMLT",func:function(){if(f.loadEventStart){return f.loadEventStart-f.domInteractive}return f.domComplete?f.domComplete-f.domInteractive:-1
},value:-1},winOnLoadTime:{name:"ONLOADT",func:function(){return f.loadEventEnd?f.loadEventEnd-f.loadEventStart:-1},value:-1},pageLoadTime:{name:"PAGET",func:function(){if(f.loadEventStart){return f.loadEventStart-f.fetchStart}return f.domComplete?f.domComplete-f.fetchStart:-1},value:-1},allLoadTime:{name:"ALLT",func:function(){if(f.loadEventEnd){return f.loadEventEnd-f.navigationStart}return f.domComplete?f.domComplete-f.navigationStart:-1},value:-1},firstPaintTime:{name:"FPAINTT",func:function(){var i=f.firstPaint||f.msFirstPaint||f.mozFirstPaint||f.webkitFirstPaint||f.oFirstPaint;return i?i-f.navigationStart:-1},value:-1},beforeDomLoadingTime:{name:"BEFDMLT",func:function(){return f.domLoading?f.domLoading-f.navigationStart:-1},value:-1},resourcesLoadedTime:{name:"RESLOADT",func:function(){if(f.loadEventStart){return f.loadEventStart-f.domLoading
}return f.domComplete?f.domComplete-f.domLoading:-1},value:-1},scriptRunTime:{name:"SCRIPTT",func:function(){var i=f.domContentLoadedEventEnd-f.domContentLoadedEventStart;return i>0?i:-1},value:-1},customInteractTime:{name:"CINTT",func:function(){var m=window.global||(window.global={});var i=m.vars=(m.vars||{});var l=m.vars.customInteractTime;if(l){return l-window.performance.timing.navigationStart}else{return -1}},value:-1},interactTime:{name:"INTT",func:function(){if(f.domContentLoadedEventStart){return f.domContentLoadedEventStart-f.navigationStart}return -1},value:-1}};for(var k in e){if(e[k].value==-1&&typeof e[k].func=="function"){e[k].value=e[k].func()}}return this.timeToStr(e,g)};a.eventHandleTime=function(e){try{var k=[];if(typeof e=="undefined"){return false}else{if(e instanceof Array){var j=false;
for(var h=0;h<e.length;h++){var g=e[h];if(typeof g=="object"){if(typeof g.name=="undefined"||g.endTime=="undefined"||g.startTime=="undefined"){console.log("data format is wrong! propeties should have name or endTime or startTime ");continue}else{if(typeof g.endTime!="number"||typeof g.startTime!="number"){console.log(" endTime or startTime of "+g.name+"Object is not number type");continue}else{k.push(g.name+"_"+(g.endTime-g.startTime));j=true}}}else{console.log("data format of Array is wrong! should be single Object");continue}}if(j){a.sendTimerTracker(k.join("|"));return true}}else{if(typeof e=="object"){if(typeof e.name=="undefined"||e.startTime=="undefined"||e.endTime=="undefined"){console.log("data format is wrong! propeties should be name and startTime ");return false}else{if(typeof e.startTime!="number"||typeof e.endTime!="number"){console.log(" startTime of "+e.name+"Object is not number type");
return false}a.sendTimerTracker(e.name+"_"+(e.endTime-e.startTime));return true}}else{return false}}}}catch(f){}};a.sendTimerTracker=function(f){if(f&&$.trim(f)!=""){var g=c();if(!g||isNaN(g)||parseInt(g)<=0){recordTrackInfoWithType("2",f);return}var e={w_pt:g};recordTrackInfoWithType("2",f,null,null,e)}};a.loadBaseTime=function(e){if(!window.performance){return}if(typeof stopGlobalTimingLoadFlag=="undefined"){a.sendTimerTracker(a.basicTime(e))}};return a});define("common_yhd.storage",function(){var i=window.loli||(window.loli={});var c="localStorage",e="sessionStorage",k={},b={};k.set=function(m,n){};k.get=function(m){};k.remove=function(m){};k.clear=function(){};b.set=function(m,n){};b.get=function(m){};b.remove=function(m){};b.clear=function(){};function l(m){try{return(m in window&&window[m])}catch(n){return false}}function d(o,m){var n=window[o];m.set=function(p,q){if(q===undefined){return n.remove(p)}n.setItem(p,q);return q};m.get=function(p){return n.getItem(p)};m.remove=function(p){n.removeItem(p)};m.clear=function(){n.clear()}}if(l(c)){d(c,k)}if(l(e)){d(e,b)}var h=function(){var o=true;var n=document.domain;var p=/([^\.]*)\.yhd\.com/;if(p.test(n)){var m=p.exec(n)[1];if(m!="www"){o=false}}return o};var g=function(){var m=window.navigator.userAgent.toLowerCase();
var n=/safari/i;var p=/chrome/i;var o=/Android/i;if(n.test(m)&&!p.test(m)&&!o.test(m)){return true}return false};var a=function(){var m=new Date();return(m.getYear()+1900)+""+(m.getMonth()+1)};var f=function(x,v,m,t){var y=m||function(){};var r=(t&&t=="session")?b:k;if(h()){var w=r.set(x,v);y({status:1,key:x,value:w})}else{if(g()&&t!="session"){$.fn.cookie(x,encodeURIComponent(v),{domain:"m.yhd.com",path:"/",expires:30});y({status:1,key:x,value:v});return}if(!window.postMessage||!window.addEventListener){y({status:0,key:x,value:null});return}var s="globalLocalStorageAdaptorForSet";var n=$("#"+s);if(n.size()==0){var p=document.createElement("iframe");p.setAttribute("id",s);p.setAttribute("style","display:none");p.setAttribute("src",window.location.protocol+"//www.yhd.com/html/setLocalStorageH5.html?v="+a());
document.body.appendChild(p);n=$("#"+s)}if(n.attr("loaded")){var q=n.get(0).contentWindow;var u=window.location.protocol+"//www.yhd.com";var o={key:x,value:v,type:t};q.postMessage(o,u);setTimeout(function(){y({status:1,key:x,value:v})},200)}else{n.on("load",function(){$(this).attr("loaded","1");var A=$(this).get(0).contentWindow;var B=window.location.protocol+"//www.yhd.com";var z={key:x,value:v,type:t};A.postMessage(z,B);setTimeout(function(){y({status:1,key:x,value:v})},200)})}}};var j=function(z,B,w){var m=B||function(){};var r=(w&&w=="session")?b:k;if(h()){var A=r.get(z);m({status:1,key:z,value:A})}else{if(g()&&w!="session"){var A=$.fn.cookie(z);if(A!==null){A=decodeURIComponent(A)}m({status:1,key:z,value:A});return}if(!window.postMessage||!window.addEventListener){m({status:0,key:z,value:null});
return}var t=window["yhd.storage.get.callback"]||(window["yhd.storage.get.callback"]=[]);t.push(m);var x=t.length-1;var u="globalLocalStorageAdaptorForGet";var n=$("#"+u);if(n.size()==0){var v=document.createElement("iframe");v.setAttribute("id",u);v.setAttribute("style","display:none");v.setAttribute("src",window.location.protocol+"//www.yhd.com/html/getLocalStorageH5.html?v="+a());document.body.appendChild(v);n=$("#"+u)}if(n.attr("loaded")){var q=n.get(0).contentWindow;var y=window.location.protocol+"//www.yhd.com";var o=window.location.protocol+"//"+window.location.host;var p={key:z,host:o,version:x,type:w};q.postMessage(p,y)}else{n.on("load",function(){$(this).attr("loaded","1");var F=$(this).get(0).contentWindow;var D=window.location.protocol+"//www.yhd.com";var E=window.location.protocol+"//"+window.location.host;
var C={key:z,host:E,version:x,type:w};F.postMessage(C,D)})}var s=function(C){var F=/^http[s]?:\/\/([\.\w]*)\.yhd\.com/i;if(F.test(C.origin)){var E=C.data;if(E){var D=t[E.version];if(D){D({status:1,key:E.key,value:E.value})}else{m({status:1,key:E.key,value:E.value})}}}};if(!window["yhd.storage.get.handler"]){window.addEventListener("message",s);window["yhd.storage.get.handler"]=s}}};k.setFromRoot=function(o,n,m){f(o,n,m,"local")};k.getFromRoot=function(m,n){j(m,n,"local")};b.setFromRoot=function(o,n,m){f(o,n,m,"session")};b.getFromRoot=function(m,n){j(m,n,"session")};i.yhdStore=k;i.yhdSessionStore=b;return k});define("common_search",["tracker_ref_yhd.global_spm","common_yhd.storage"],function(j,d){var l={};var g=(typeof isSearchKeyWords!="undefined"&&isSearchKeyWords=="1")?1:0;var n=(typeof indexFlag!="undefined"&&indexFlag==1)?1:0;var b=(typeof globalSearchSelectFlag!="undefined"&&globalSearchSelectFlag=="0")?0:1;var f=$("#keyword");var k=$("#searchSuggest");var c=$("#searchBtn");var a=$("#searchBox");var o=window.loli||(window.loli={});var i=o.app=o.app||{};var h=o.app.search=o.app.search||{};var e=URLPrefix.search||"http://search.m.yhd.com";h.delayCall=function(s,p,v,r){var q=$(s);q.lastTime=new Date().getTime();if(p){var t=p.call(q);q.lastResult=t}var u=setTimeout(function(){var x=q.lastTime?q.lastTime:new Date().getTime();var w=(typeof q.lastResult=="undefined"||q.lastResult)?true:false;var y=new Date().getTime();
if(y-x>=(r-50)){if(v&&w){v.call(q)}}},r)};h.filterXml=function(p){if(p!=null&&p!=""){p=p.replace(/\&/g,"");p=p.replace(/\</g,"");p=p.replace(/\>/g,"");p=p.replace(/\\/g,"");p=p.replace(/\'/g,"");p=p.replace(/\"/g,"")}return p};h.saveKeyword=function(q,p){var r=d;if(r){r.getFromRoot("search_keyword_history",function(s){if(s&&s.status==1){var v=s.value;var t=[];var x=[];if(v){t=v.split(",")}for(var w=0;w<t.length;w++){var u=h.filterXml(decodeURIComponent(decodeURIComponent(t[w])));if(u!=null&&u.length>0){x.push(u)}}var y=false;for(var w=0;w<x.length;w++){if(x[w]==q){y=true;break}}if(!y){x.push(q);if(x.length>10){x.shift()}for(var w=0;w<x.length;w++){x[w]=encodeURIComponent(encodeURIComponent(x[w]))}r.setFromRoot("search_keyword_history",x.join(","),function(z){if(z&&z.status==1){if(p){p()}}})
}else{if(p){p()}}}})}if(p){setTimeout(function(){p()},3*1000)}};h.getSearchKeywordUrl=function(r,p,q){if(q){r=r+" "+q}if(!p){p="0";return e+"/search/k"+encodeURIComponent(r)}return e+"/search/c"+p+"-0/k"+encodeURIComponent(r)};h.goSearch=function(q,s,p){var r=function(){var t=h.getSearchKeywordUrl(q,s,p);j.refreshPage(t,a)};h.saveKeyword(q,r)};h.showHistory=function(p,r){if(!b){return}var q=p.val();var s=d;var u=function(){var v=e+"/search/getSmartKeyword/?callback=?";$.getJSON(v,function(z){if(z&&z.hotSearchKeywords&&z.hotSearchKeywords.length>0){var x=[];for(var w=0;w<z.hotSearchKeywords.length;w++){var y=h.filterXml(z.hotSearchKeywords[w]);x.push("<a class='item' href='javascript:goSearch(\""+y+"\")'>"+y+"</a>")}$("div.tags",r).html(x.join(""));$("div.tags",r).show()}if(s){s.getFromRoot("search_keyword_history",function(B){if(B&&B.status==1){var C=B.value;
var F=[];var E=[];if(C){F=C.split(",")}for(var D=F.length-1;D>=0;D--){var A=h.filterXml(decodeURIComponent(decodeURIComponent(F[D])));if(A!=null&&A.length>0){E.push("<li><a class='link_text' href='javascript:goSearch(\""+A+"\")'>");E.push("<span class='icon icon-history'></span>");E.push("<span class='text'>"+A+"</span>");E.push("<span class='icon_arrow icon-right_arrow'></span>");E.push("</a></li>")}}$("ul",r).html(E.join(""));if(F.length==0){r.find("a.clear_history").hide()}else{r.find("a.clear_history").show()}}})}$("#globalHeader").addClass("search_show");t(p,r)})};var t=function(v,w){w.on("click","a.clear_history",function(){s.setFromRoot("search_keyword_history","");$(this).hide();$("ul",w).html("")})};if(q==""||$.trim(q)==""){u()}};h.showSuggest=function(q,s){if(!b){return}var r=h.filterXml(q.val());
var p=function(){var t=e+"/search/getSmartKeyword/?keyword="+encodeURIComponent(r)+"&callback=?";$.getJSON(t,function(x){if(x){var v=[];var y=r;if(x.keywords&&x.keywords.length>0){var w=x.keywords[0];y=x.keywords[0].keyword;v.push("<li>");v.push("<a class='link_text' href='javascript:goSearch(\""+w.keyword+"\")'>");v.push("<span class='icon icon-search'></span>");v.push("<span class='text'>"+w.keyword+"</span>");v.push("</a>");for(var z=0;z<w.attrs.length;z++){v.push("<a class='link_tag' href='javascript:goSearch(\""+w.keyword+'",0,"'+w.attrs[z]+"\")'>"+w.attrs[z]+"</a>")}v.push("</li>")}if(x.recommendCID1&&x.recommendCNA1){v.push("<li><a class='link_text' href='javascript:goSearch(\""+y+'","'+x.recommendCID1+"\")'>");v.push("<span class='icon icon-sort'></span>");v.push("<span class='text_category'>在<strong>"+x.recommendCNA1+"</strong>分类中搜索</span>");
v.push("<span class='icon_arrow icon-right_arrow'></span>");v.push("</li></a>")}if(x.recommendCID2&&x.recommendCNA2){v.push("<li><a class='link_text' href='javascript:goSearch(\""+y+'","'+x.recommendCID2+"\")'>");v.push("<span class='icon icon-sort'></span>");v.push("<span class='text_category'>在<strong>"+x.recommendCNA2+"</strong>分类中搜索</span>");v.push("<span class='icon_arrow icon-right_arrow'></span>");v.push("</li></a>")}if(x.keywords&&x.keywords.length>0){for(var u=1;u<x.keywords.length;u++){var w=x.keywords[u];v.push("<li>");v.push("<a class='link_text' href='javascript:goSearch(\""+w.keyword+"\")'>");v.push("<span class='icon icon-search'></span>");v.push("<span class='text'>"+w.keyword+"</span>");v.push("</a>");for(var z=0;z<w.attrs.length;z++){v.push("<a class='link_tag' href='javascript:goSearch(\""+w.keyword+'",0,"'+w.attrs[z]+"\")'>"+w.attrs[z]+"</a>")
}v.push("</li>")}}$("ul",s).html(v.join(""));$("div.tags",s).hide();s.find("a.clear_history").hide();$("#globalHeader").addClass("search_show")}})};if(r!=""&&$.trim(r)!=""){p()}};h.registerGlobalEvent=function(){var q=function(t,r,v){t=t||window.event;if(t){var u=t.keyCode;if(u=="116"||u=="16"||u=="17"||u=="18"||u=="38"||u=="40"||u=="13"){return}}var s=h.filterXml(r.val());if(s==""||$.trim(s)==""){h.delayCall(r,function(){a.find("span.icon_delete").hide()},function(){h.showHistory(r,v)},200)}else{h.delayCall(r,function(){a.find("span.icon_delete").show()},function(){h.showSuggest(r,v)},200)}};var p=function(t,r,u){var s=h.filterXml(r.val());if(s==""||$.trim(s)==""){h.delayCall(r,null,function(){h.showHistory(r,u)},200)}else{h.delayCall(r,null,function(){h.showSuggest(r,u)},200)}};f.on("focus",function(r){p(r,f,k)
});f.on("input",function(r){q(r,f,k)});c.on("click",function(s){var r=h.filterXml(f.val());if(r!=""&&$.trim(r)!=""){h.goSearch(r)}});$("#searchForm").on("submit",function(){var r=h.filterXml(f.val());if(r!=""&&$.trim(r)!=""){h.goSearch(r)}return false});m()};function m(){a.on("click","span.icon_back",function(){f.val(f.attr("data-original"));a.find("span.icon_delete").hide();$("#globalHeader").removeClass("search_show")});a.on("click","span.icon_delete",function(p){f.val("");a.find("span.icon_delete").hide();f.trigger("focus")});$("#searchMask").on("click",function(){f.val(f.attr("data-original"));a.find("span.icon_delete").hide();$("#globalHeader").removeClass("search_show")})}l.init=function(){if("shop"==globalTopType||"groupShop"==globalTopType){m();f.on("click",function(){$("#globalHeader").addClass("search_show");
k.hide()});return}h.registerGlobalEvent();window.goSearch=function(r,p,q){h.goSearch(r,p,q)}};l.show=function(){var p=h.filterXml(f.val());if(p==""||$.trim(p)==""){h.showHistory(f,k)}else{h.showSuggest(f,k)}};return l});define("biz_newUserMesssage",["common_mcookie","util_globalLogin"],function(e,b){var a=$("#g_newUserMesssage");function d(h){var l=new Date(),i=l.getTime()%(1000*60*60*24),k=h.getTime()-l.getTime(),j=k+i;if(j<0||j>1000*60*60*24){return false}else{return true}}var g=function(h){if(h.result==1){a.hide()}else{a.show()}};function f(){var h=localStorage.getItem("newUserMesssage");if(h){var i=new Date(h);if(d(i)){a.hide()}else{a.show()}}else{a.show()}}var c=e.getCookie("yihaodian_uid");if(c){a.hide()}else{f();b.globalCheckLogin(g)}a.on("click",".icon-delete",function(){a.hide();localStorage.setItem("newUserMesssage",(new Date()).toISOString())})});define("common_back",["tracker_ref_yhd.global_spm","common_yhd.storage"],function(m,i){var g={};var a=window.loli||(window.loli={});var p=a.app=a.app||{};var k=a.app.url=a.app.url||{};var e=a.yhdSessionStore;var o=a.app.url.cfg=a.app.url.cfg||{enable:true,type:"url",maxSize:100};var c=function(){var t="user_browse_history";if(window.name==""){window.name=new Date().getTime()}return t+"_"+window.name};var f=c();var b=function(t){e.getFromRoot(f,function(w){var u=null;if(w&&w.status==1){var v=w.value;u=(v!=null&&v!="")?$.parseJSON(v):null}t(u)})};var l=function(u,t){var v=u?JSON.stringify(u):"";e.setFromRoot(f,v,function(w){if(t){t(w)}})};var r=function(z){var w="";var B="";var u="";var x="";var A=/^(http[s]?:\/\/[\.\w]*\.yhd\.com)[\/]?/i;var v=/^http[s]?:\/\/[\.\w]*\.yhd\.com(\/[^\?]*\/?)[\?\#]*/i;
var y=/(\?[^\#]*)/i;var t=/(\#.*)/i;if(A.test(z)){w=A.exec(z)[1]}if(v.test(z)){B=v.exec(z)[1]}if(y.test(z)){u=y.exec(z)[1]}if(t.test(z)){x=t.exec(z)[1]}return{domain:w,path:B,params:u,hash:x}};var q=function(t,u){var x=new RegExp("[?&]"+u+"=[^&#]*");var w=t;if(x.test(t)){var v=x.exec(t)[0];if(v.charAt(0)=="?"){w=t.replace(x,"?")}else{w=t.replace(x,"")}if(w.indexOf("?&")!=-1){w=w.substring(0,w.indexOf("?&")+1)+w.substring(w.indexOf("?&")+2)}if(w.charAt(w.length-1)=="?"){w=w.substring(0,w.length-1)}}return w};var d=function(v){var u=/(\#.*)/i;var t=v;if(u.test(v)){t=v.replace(u,"")}return t};var n=function(u){var t=q(u,"tp");t=q(t,"tc");t=q(t,"tce");return t};var s=function(E,w){var z=window.user_browse_history;var t=n(document.location.href);var y=-1;if(z&&z.data&&z.data.length>0){if(E=="url"){if(w){for(var B=z.index-1;
B>=0;B--){var u=d(n(z.data[B]));if(u&&w==u){y=B-z.index;break}}}else{var D=d(n(t));var C=false;for(var B=z.index-1;B>=0;B--){var u=d(n(z.data[B]));if(u&&D!=u){y=B-z.index;C=true;break}}if(!C){if(window.history.length>z.data.length){y=0-(z.index+1)}}}}else{if(E=="path"){if(w){for(var B=z.index-1;B>=0;B--){var u=n(z.data[B]);if(u){var A=r(u);if(A.path==w){y=B-z.index;break}}}}else{var v=r(t).path;var C=false;for(var B=z.index-1;B>=0;B--){var u=n(z.data[B]);if(u){var A=r(u);if(A.path!=v){y=B-z.index;C=true;break}}}if(!C){if(window.history.length>z.data.length){y=0-(z.index+1)}}}}else{if(E=="domain"){if(w){for(var B=z.index-1;B>=0;B--){var u=n(z.data[B]);if(u){var A=r(u);if(A.domain==w){y=B-z.index;break}}}}else{var x=r(t).domain;var C=false;for(var B=z.index-1;B>=0;B--){var u=n(z.data[B]);if(u){var A=r(u);
if(A.domain!=x){y=B-z.index;C=true;break}}}if(!C){if(window.history.length>z.data.length){y=0-(z.index+1)}}}}else{if(w){for(var B=z.index-1;B>=0;B--){var u=n(z.data[B]);if(u&&w==u){y=B-z.index;break}}}else{y=-1}}}}}return y};var h=function(u,v){var y=window.user_browse_history!=null?window.user_browse_history:{data:[],index:-1,timestamp:0};var w=document.location.href;if(!u){return}if(u==1){if(y.data&&y.data.length>0){var x=y.data[y.index];if(x==w){return}}if(y.data&&y.data.length>0&&y.index>-1){if(y.data.length-1>=y.index+1){y.data.splice(y.index+1)}}y.data.push(w);y.index=y.index+1}else{if(u==2){y={data:[],index:-1};y.data.push(w);y.index=y.index+1}else{if(u==3){if(y.index!=-1){y.index=y.index-1}}else{if(u==4){if(y.index!=-1){y.index=y.index+1}}else{if(u==5){if(v!=-1){y.index=v}}}}}}var t=y.data.length-o.maxSize;
if(t>0&&y.index>=t){y.data.splice(0,t);y.index=y.index-t}y.timestamp=new Date().getTime();y.historyLength=window.history.length;l(y,function(){window.user_browse_history=y})};var j=function(x){var y=document.location.href;var t=0;var u=-1;if(x&&x.data&&x.data.length>0&&x.index>-1){var z=x.data[x.index-1];var A=x.data[x.index+1];if(y==z){t=3}else{if(y==A){t=4}else{t=5;for(var w=x.index-1;w>=0;w--){var v=x.data[w];if(v==y){u=w;break}}if(u==-1){for(var w=x.index;w<x.data.length;w++){var v=x.data[w];if(v==y){u=w;break}}}if(u==-1){t=2}}}}else{t=2}return{flag:t,curIndex:u}};k.saveURL=function(){var u=document.referrer;var t=document.location.href;if(window.user_browse_history){return}b(function(w){window.user_browse_history=w;var v=0;var x=-1;if(!w||!w.data||w.data.length==0){v=2;h(v);return}var z=window.performance.navigation.type;
if(z==0){if(w&&w.data&&w.data.length>0){var y=w.data[w.index];if(u==""){if(window.history.length-1>w.historyLength){v=2}else{v=1}}else{if(u==y||u==d(y)){v=1}else{v=2}}}else{v=2}}else{if(z==1){v=0;if(w&&w.data&&w.data.length>0){var y=w.data[w.index];if(y!=t){v=2}}else{v=2}}else{if(z==2){var A=j(w);v=A.flag;x=A.curIndex}else{v=1}}}if(v){h(v,x)}})};k.saveAnchor=function(){var t=window.history.length;var u=window.history.state;window.onpopstate=function(x){var A=x||window.event;var y=document.location.href;var v=0;var B=-1;var z=function(E){if(!E||!E.data||E.data.length==0){v=2;h(v);return}if(E.data&&E.data.length>0){var C=E.data[E.index];if(C==y){return}}if(E&&E.data&&E.data.length>0&&E.index>-1){var C=E.data[E.index];if(d(y)!=d(C)){var F=j(E);v=F.flag;B=F.curIndex;h(v,B);return}}if(t==window.history.length){var D=window.history.state;
if(D==null&&u!=null){v=3}else{if(D!=null&&u!=null){if(D.timestamp<=u.timestamp){v=3}else{v=4}}else{if(D!=null&&u==null){v=4}else{v=0}}}}else{var G=new Date().getTime();window.history.replaceState({timestamp:G},"",document.location.hash);v=1}t=window.history.length;u=window.history.state;if(v){h(v,B)}};var w=window.user_browse_history;if(w){z(w)}else{b(z)}}};k.goBack=function(v,u){var t=v?v:o.type;var w=s(t,u);window.history.go(w)};k.isHTML5=function(){if(window.performance&&window.history.replaceState&&window.sessionStorage&&window.postMessage){return true}return false};g.saveURL=function(){if(a.app.url.isHTML5()){a.app.url.saveURL();a.app.url.saveAnchor()}};g.init=function(t){if(t){o=$.extend(o,t)}if(!o.enable){return}if(a.app.url.isHTML5()){$("#topIconBack").attr("href","javascript:void(0);");
$("#topIconBack").off().on("click",function(){a.app.url.goBack()})}};return g});$(window).on("scroll",function(){var a=$(this);var c=a.scrollTop();var b=a.height();if(c>b){$(".touchweb_com-backTop").addClass("show")}else{$(".touchweb_com-backTop").removeClass("show")}});