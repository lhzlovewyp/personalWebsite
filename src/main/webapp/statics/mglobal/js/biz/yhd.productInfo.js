define(["global_env","exports"],function(f,e){var c="http://gps.yhd.com";var j=f.getProvinceId()||1;var d=c+"/restful/groupon?provinceId="+j;var l=c+"/restful/promotion?provinceId="+j;var g=1;var i=102;var h=function(n){if(!n||n.length<1){return""}var o="";for(var m=0;m<n.length;m++){if(n[m]==""){continue}o+="&grouponIds="+n[m]}return d+"&channelId="+i+o+"&callback=?"};function a(n){if(!n||n.length<1){return""}var o="";for(var m=0;m<n.length;m++){if(n[m]==""){continue}o+="&pmIds="+n[m]}return l+"&channelId="+i+o+"&callback=?"}function k(n,q){if(!n||n.length<1){return""}var r="";for(var p=0;p<n.length;p++){if(n[p]==""){continue}r+="&promotionIds="+n[p]}var o="";if(q&&q.length>0){for(var p=0,m=q.length;p<m;p++){o+="&pmIds="+q[p]}}return l+"&channelId="+g+r+o+"&callback=?"}function b(o,m){if(!o||!o.ids){return
}var n;if(o.productType==="groupon"){n=h(o.ids)}else{if(o.productType==="promotion"){n=k(o.promotionIds,o.pmIds)}else{n=a(o.ids)}}$.getJSON(n,function(p){m(p,o)})}return{getProductInfo:b};e.getProductInfo=b});