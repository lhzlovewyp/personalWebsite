define(["global_env","tracker_ref_yhd.global_spm","util_yhd.url"],function(d,f,c){var b={};function g(i){if(i&&(i.indexOf("http://")==0||i.indexOf("https://")==0)){return true}return false}function h(j,m,l){var k="[http://|https://][\\w\\.]+yhd\\.com";if(m&&m.indexOf("yhd")==-1&&m.indexOf("com")==-1){k="[http://|https://]"+m+"\\.yhd\\.com"}else{if(m){k=m}}var i="(/)?[^/]{0,}$";if(l!=null&&l==false){i="[^/]{0,}$"}if(j==null){j=""}return RegExp(k+j+i)}var a=[[h("/m/login_input.do","passport",false),"yhd://login/",null],[h("/store/m-(\\d{1,11})(-\\d{1,2})?.html","(http://|https://)[\\w\\.]+yhd\\.com",false),"yhd://web/",'"url":"${0}","type":1,"targetUrlIntent":"yhd://mallshopsearch?merchantId=${2}"'],[h("/mw/store/(\\d{1,11})(/\\d{1,2})?","(http://|https://)[\\w\\.]+yhd\\.com",false),"yhd://web/",'"url":"${0}","type":1,"targetUrlIntent":"yhd://mallshopsearch?merchantId=${2}"'],[h("/item/(\\d{1,11})",null,false),"yhd://detail/",'"pmId":${1}'],[h("/item/lp/(\\d{1,11})_(\\d{1,11})",null,false),"yhd://detail/",'"pmId":${2},"promotionId":"${1}_landingpage"'],[h("/mingpin/list/(\\d{1,11})(/\\d{1,2})?"),"yhd://flashbuyproductlist/",'"flashbuyId":${1}'],[h("/mingpin/item/(\\d{1,11})_(\\d{1,11})(/(\\d{1,2})/)?(/?[^/]{0,}categoryId=(\\d{1,11}))?",null,false),"yhd://flashbuyproductdetail/",'"flashbuyId":${1},"productId":${2},"provinceId":${4},"pminfoId":${2}'],[h("/mingpin/category/(\\d{1,11})"),"yhd://flashbuyhome/",'"categoryId":${1}'],[h("/mingpin"),"yhd://flashbuyhome/",null],[h("/tuan"),"yhd://grouponhome/",null],[h("","http://t.m.yhd.com(/\\d{1,2})?",false),"yhd://grouponhome/",null],[h("/tuan/[^/\\.]{0,}c(\\d{1,11})[^/\\.]{0,}.html\\?nid=(\\d{1,11})"),"yhd://productgroupon/",'"grouponType":0,"categoryId":${2}'],[h("/[^/\\.]{0,}c(\\d{1,11})[^/\\.]{0,}.html\\?nid=(\\d{1,11})","http://t.m.yhd.com"),"yhd://productgroupon/",'"grouponType":0,"categoryId":${2}'],[h("/(p\\d{1,2}-)?vt100(-c-1-st0.html)?","http://t.m.yhd.com",false),"yhd://productgroupon/",'"grouponType":0,"grouponNum":100'],[h("/(p\\d{1,2}-)?vt2(-c-1-st0.html)?","http://t.m.yhd.com",false),"yhd://productgroupon/",'"grouponType":1,"grouponNum":100'],[h("/(p\\d{1,2}-)?vt3(-c-1-st0.html)?","http://t.m.yhd.com",false),"yhd://grouponsoon/",null],[h("/tuan/detail/(\\d{1,11})",null,false),"yhd://grouponsummary/",'"grouponid":${1}'],[h("/detail/(\\d{1,11})","http://t.m.yhd.com",false),"yhd://grouponsummary/",'"grouponid":${1}'],[h("/tuan/brand",null,false),"yhd://brandgroupon/",null],[h("/brand(/\\d{1,2})?","http://t.m.yhd.com",false),"yhd://brandgroupon/",null],[h("/tuan/detailBrand/(\\d{1,11})(-\\d{1,2})?",null,false),"yhd://brandgroupondetail/",'"brandId":${1}'],[h("/detailBrand/(\\d{1,11})(-\\d{1,2})?","http://t.m.yhd.com",false),"yhd://brandgroupondetail/",'"brandId":${1}'],[h("/clock","http://t.m.yhd.com",true),"yhd://oclockGroupon/",'"title":"金牌秒杀"'],[h("/search/\\?req.keyword=([^&/=]{1,})",null,false),"yhd://search/",'"keyword":"${1}"'],[h("/search/k([^?&=/]{2,})/[^?&=/]*s(\\d+)",null,false),"yhd://search/",'"keyword":"${1}","sortType":"${2}"'],[h("/search/k([^?&=/]{2,})",null,false),"yhd://search/",'"keyword":"${1}"'],[h("/search/c(\\d{1,11})/p(\\d)+-s(\\d)+/",null,false),"yhd://search/",'"categoryId":${1},"categoryName":"#{name}","virtualFlag":#{virtualflag}'],[h("/search/p(\\d{1,11})-pl(\\d{1,11})-[^?]{1,}\\?.*pmid=(\\d+)",null,false),"yhd://salespromotion/",'"promotionId":${1},"promotionLevelId":${2},"promotionLevel":${2},"merchantId":#{merchantId},"pmId":${3}'],[h("/search/n(\\d{1,11})-pl(\\d{1,11})-[^?]{1,}\\?.*pmid=(\\d+)",null,false),"yhd://salespromotion/",'"promotionType":2,"promotionId":${1},"promotionLevelId":${2},"promotionLevel":${2},"conditionValue":0,"merchantId":#{merchantId},"pmId":${3}'],[h("/search/p(\\d{1,11})-pl(\\d{1,11})-[^?]{1,}\\?",null,false),"yhd://salespromotion/",'"promotionId":${1},"promotionLevelId":${2},"promotionLevel":${2},"merchantId":#{merchantId}'],[h("/search/n(\\d{1,11})-pl(\\d{1,11})-[^?]{1,}\\?",null,false),"yhd://salespromotion/",'"promotionType":2,"promotionId":${1},"promotionLevelId":${2},"promotionLevel":${2},"conditionValue":0,"merchantId":#{merchantId}'],[h("/search/c(\\d{1,11})/k([^?=/&]{2,})",null,false),"yhd://search/",'"categoryId":${1},"keyword":"${2}"'],[h("/myH5/h5Bind/h5BindMobile.do"),"yhd://bindphone/",null],[h("/mobile/nearshop",null,false),"yhd://localweb",'"path":"leigou"'],[h("/nearshop",null,false),"yhd://localweb",'"path":"leigou"'],[h("(/)?",null,false),"yhd://home/",null]];
function e(k){if(g(k)){for(var j=0;j<a.length;j++){if(a[j][0].test(k)){return j}}}return -1}b.addNativeListener=function(){var i=d.isWireless2();if(i){$("body").on("click","a,area",function(){var B=$(this);var o=$.trim(B.attr("href"));if(g(o)){var y=f.getData(B);var A={};if(y){var q=y.tc;var l=y.tp;A.tp=l;A.tc=q}var z=e(o);var m="";if(z>=0){if(a[z][2]){m=a[z][2];var r=o.match(a[z][0]);var s=new RegExp("\\d{1,3}");var u=new RegExp("\\$\\{(\\d{1,3})\\}","g");var t=m.match(u);if(t&&t.length>0&&t.length<=r.length){for(var x=0;x<t.length;x++){m=m.replace(t[x],decodeURI(r[t[x].match(s)[0]]))}}var p=new RegExp("#\\{([a-zA-Z0-9_]{1,30})\\}","g");var n=m.match(p);if(n&&n.length>0){var v=c.getParams(o);for(var w=0;w<n.length;w++){var C=n[w].match("[a-zA-Z0-9_]{1,30}")[0];if(v[C]){m=m.replace(n[w],decodeURI(v[C]))
}else{return true}}}}if(m.length>0){m+=","}m+='"tp":"'+A.tp+'",';m+='"tc":"'+A.tc+'"';m="{"+m+"}";d.goToNative(a[z][1],m);return false}else{return true}}})}return true};return b});