define("common_lazyload",["common_yhd_webp"],function(b){var a=function(){var d=this;function e(){var f=navigator.userAgent.toLowerCase();if(f.match(/MicroMessenger/i)=="micromessenger"){return true}else{return false}}function c(){var k=true;var i=null;if(e()){document.addEventListener("WeixinJSBridgeReady",function g(){WeixinJSBridge.invoke("getNetworkType",{},function(n){if(n.err_msg!="network_type:wifi"){k=false;i="weixin is wifi"}i="weixin not wifi"})});if(!i){var l=new RegExp("nettype/(\\w{1,6})");var f=l.exec(navigator.userAgent.toLowerCase());if(f&&f[1]){i="weixin user agent:"+f[1];if(f[1]=="unknown"){i=null}else{if(f[1]!="wifi"&&f[1]!="2"){k=false}}}}}else{if(h5tonative&&h5tonative.getClientInfo()){var m=h5tonative.getClientInfo().toLowerCase();if(m){var l=new RegExp('"nettype":"(\\w{1,6})"');
var f=l.exec(m);if(f&&f[1]){nettype=f[1];if(nettype!="wifi"){k=false}i="app client:"+nettype}}}}if(!i){var j=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(j&&j.type){i="connection api:"+j.type;if(j.type=="unknown"){i=null}else{if(j.type!="wifi"&&j.type!="2"){k=false}}}}if(!i&&window.performance&&window.performance.timing){var h=window.performance.timing.domLoading-performance.timing.fetchStart;if(h>802){k=false}i="timing api:"+h}return k}this.init=function(h){d.onerrorImgUrl=h.onerrorImgUrl;d.srcStore=h.srcStore;d.srcStore2x=h.srcStore2x;d.srcStore3x=h.srcStore3x;d.cla=h.cla;d.sensitivity=50;minScroll=5,slowScrollTime=200,wifi=c(),ios=navigator.appVersion.match(/(iPhone\sOS)\s([\d_]+)/),isIos=ios&&!0||!1,isoVersion=isIos&&ios[2].split("_");isoVersion=isoVersion&&parseFloat(isoVersion.length>1?isoVersion.splice(0,2).join("."):isoVersion[0],10),isIos=d.isPhone=isIos&&isoVersion<6;
if(isIos){var f,g;$(window).on("touchstart",function(){f={sy:window.scrollY,time:Date.now()},g&&clearTimeout(g)}).on("touchend",function(i){if(i&&i.changedTouches){var j=Math.abs(window.scrollY-f.sy);if(j>minScroll){var k=Date.now()-f.time;g=setTimeout(function(){d.changeimg(),f={},clearTimeout(g),g=null},k>slowScrollTime?0:200)}}else{d.changeimg()}}).on("touchcancel",function(){g&&clearTimeout(g),f={}})}else{$(window).on("scroll",function(){d.changeimg()})}setTimeout(function(){d.trigger()},90)};d.trigger=function(){var f=d.isPhone&&"touchend"||"scroll";d.imglist=$("img."+d.cla+",img[data-lazyload='1']");if(d.imglist&&d.imglist.length>0){$(window).trigger(f)}};d.changeimg=function(){function g(j){var l=window.pageYOffset,i=l+window.innerHeight,k=j.offset().top,h=j.height();return(k>=l&&k-d.sensitivity<=i)||(l-d.sensitivity<=k+h&&k+h<=i+d.sensitivity)
}function f(p,q){var u=p.attr(d.srcStore),r=p.attr(d.srcStore2x),n=p.attr(d.srcStore3x);if(!u){return}if(p.attr("isCut")){var m=/^(http|https):\/\/(d\d{1,2})/;var k=/_\d{1,}x\d{1,}\./;if(u.search(m)!=-1){var j=p.attr("width"),t=p.attr("height");if(k.test(u)&&!isNaN(j)&&!isNaN(t)){var o=u.split(".");if(o.length<2){return}var s=o.pop();var h="_"+j+"x"+t;u=o.join(".")+h+"."+s}}}if(wifi){if(n&&d.srcStore3x){p.attr("srcset",r+" 2x,"+n+" 3x").attr("src",b.replaceWebP(r))}else{if(r&&d.srcStore2x){p.attr("src",b.replaceWebP(r))}else{p.attr("src",b.replaceWebP(u))}}}else{if(!d.srcStore3x&&!d.srcStore2x){var k=/_(\d{1,4})x(\d{1,4})\.(\w{3,5})$/;var i=u.match(k);if(i){var j=i[1];var t=i[2];var l=i[3];if(j>10&&t>10&&l){j=Math.floor(j*0.5);t=Math.floor(t*0.5);u=u.replace(/_(\d{1,4})x(\d{1,4})\.(\w{3,5})$/,"_"+j+"x"+t+"."+l)
}}}p.attr("src",b.replaceWebP(u))}p[0].onload||(p[0].onload=function(){$(this).removeClass(d.cla).removeAttr(d.srcStore).removeAttr(d.srcStore2x).removeAttr(d.srcStore3x).removeAttr("data-lazyload"),d.imglist[q]=null,this.onerror=this.onload=null},p[0].onerror=function(){if(!d.onerrorImgUrl){return}this.src=d.onerrorImgUrl;$(this).removeClass(d.cla).removeAttr(d.srcStore).removeAttr(d.srcStore2x).removeAttr(d.srcStore3x).removeAttr("data-lazyload");d.imglist[q]=null;this.onerror=this.onload=null})}if(d.imglist&&d.imglist.length>0){d.imglist.each(function(i,j){if(!j){return}var h=$(j);if(!g(h)){return}if(!h.attr(d.srcStore)){return}f(h,i)})}}};return new a()});