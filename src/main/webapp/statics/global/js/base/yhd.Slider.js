(function(l,f){var i=("createTouch" in document)||("ontouchstart" in l),o=document.createElement("div").style,k=(function(){var p={OTransform:["-o-","otransitionend"],WebkitTransform:["-webkit-","webkitTransitionEnd"],MozTransform:["-moz-","transitionend"],msTransform:["-ms-","MSTransitionEnd"],transform:["","transitionend"]},q;for(q in p){if(q in o){return p[q]}}return false})(),h=[["width","left","right"],["height","top","bottom"]],j=k&&k[0],b=function(p){return(p+"").replace(/^-ms-/,"ms-").replace(/-([a-z]|[0-9])/ig,function(q,r){return(r+"").toUpperCase()})},n=function(q){var p=b(j+q);return(q in o)&&q||(p in o)&&p},g=function(p,r){for(var q in r){if(typeof p[q]=="undefined"){p[q]=r[q]}}return p},e=function(s){var r=s.children||s.childNodes,q=[],p=0;for(;p<r.length;p++){if(r[p].nodeType===1){q.push(r[p])
}}return q},m=function(p,s){var r=0,q=p.length;for(;r<q;r++){if(s.call(p[r],r,p[r])===false){break}}},d=function(p){p=c.fn.eventHook(p);p.preventDefault()},a=k[1]||"",c=function(q,p){if(!(this instanceof c)){return new c(q,p)}if(typeof q!="string"&&!q.nodeType){p=q;q=p.id}if(!q.nodeType){q=document.getElementById(q)}this.cfg=g(p||{},this._default);this.element=q;if(this.element){this.container=this.element.parentNode||document.body;this.setup()}};c.fn=c.prototype={version:"1.3.1",_default:{id:"slider",begin:0,auto:true,speed:600,timeout:5000,direction:"left",align:"center",fixWidth:true,mouseDrag:true,before:function(){},after:function(){}},css:function(s,q){if(typeof q=="string"){var r=document.defaultView&&document.defaultView.getComputedStyle&&getComputedStyle(s,null)||s.currentStyle||s.style||{};
return r[b(q)]}else{var t,p;for(t in q){if(t=="float"){p=("cssFloat" in o)?"cssFloat":"styleFloat"}else{p=b(t)}s.style[p]=q[t]}}},addListener:function(q,s,r,p){if(q.addEventListener){q.addEventListener(s,r,p);return true}else{if(q.attachEvent){q.attachEvent("on"+s,r);return true}}return false},removeListener:function(q,s,r,p){if(q.addEventListener){q.removeEventListener(s,r,p);return true}else{if(q.attachEvent){q.detachEvent("on"+s,r);return true}}return false},eventHook:function(r){var q={},s="changedTouches touches scale target view which clientX clientY fromElement offsetX offsetY pageX pageY toElement".split(" ");r=r||l.event;m(s,function(){q[this]=r[this]});q.target=r.target||r.srcElement||document;if(q.target.nodeType===3){q.target=q.target.parentNode}q.preventDefault=function(){r.preventDefault&&r.preventDefault();
q.returnValue=r.returnValue=false};q.stopPropagation=function(){r.stopPropagation&&r.stopPropagation();q.cancelBubble=r.cancelBubble=true};if(i&&q.touches.length){q.pageX=q.touches.item(0).pageX;q.pageY=q.touches.item(0).pageY}else{if(typeof r.pageX=="undefined"){var t=document.documentElement,p=document.body;q.pageX=r.clientX+(t&&t.scrollLeft||p&&p.scrollLeft||0)-(t&&t.clientLeft||p&&p.clientLeft||0);q.pageY=r.clientY+(t&&t.scrollTop||p&&p.scrollTop||0)-(t&&t.clientTop||p&&p.clientTop||0)}}q.origEvent=r;return q},bind:function(p,q){return function(){return p.apply(q,arguments)}},setup:function(){var q=i||!this.cfg.mouseDrag,p=q?"touchstart":"mousedown",r=q?"touchmove":"mousemove",s=q?"touchend":"mouseup";this.slides=e(this.element);this.cacheSlides=e(this.element);this.length=this.slides.length;
this.cfg.timeout=parseInt(this.cfg.timeout);this.cfg.speed=parseInt(this.cfg.speed);this.cfg.begin=parseInt(this.cfg.begin);this.cfg.auto=!!this.cfg.auto;this.cfg.timeout=Math.max(this.cfg.timeout,this.cfg.speed);this.touching=!!i;this.css3transition=!!k;this.index=this.cfg.begin<0||this.cfg.begin>=this.length?0:this.cfg.begin;if(this.length<1){return false}this.direction=this.direction||"left";this.vertical=0;this.addListener(this.element,p,this.bind(this._start,this),false);this.addListener(document,r,this.bind(this._move,this),false);this.addListener(document,s,this.bind(this._end,this),false);this.addListener(document,"touchcancel",this.bind(this._end,this),false);this.addListener(this.element,a,this.bind(this.transitionend,this),false);this.addListener(l,"resize",this.bind(function(){clearTimeout(this.resizeTimer);
this.resizeTimer=setTimeout(this.bind(this.resize,this),100)},this),false);this.playing=this.cfg.auto;this.resize()},getSum:function(t,u,p){var s=0,r=u,q=b("-"+t);for(;r<p;r++){s+=this["getOuter"+q](this.slides[r])}return s},getPos:function(s,q){var p=b("-"+s),r=this.getSum(s,0,q)+this["getOuter"+p](this.element)/2-this["get"+p](this.element)/2;return -r},resize:function(){clearTimeout(this.aniTimer);var u=this,q,r=h[this.vertical][0],p=b("-"+r),s=this.css(this.container,"position");this.css(this.container,{overflow:"hidden",visibility:"hidden",listStyle:"none",position:s=="static"?"relative":s});this[r]=this["get"+p](this.container);var t=this.vertical?"none":"left";q={"float":t,display:"block"};m(this.slides,function(){if(u.cfg.fixWidth){q[r]=u[r]-u["margin"+p](this)-u["padding"+p](this)-u["border"+p](this)+"px"
}u.css(this,q)});this.total=this.getSum(r,0,this.length);q={position:"relative",overflow:"hidden"};q[j+"transition-duration"]="0ms";q[r]=this.total+"px";q[h[this.vertical][1]]=this.length?this.getPos(r,this.index)+"px":0;this.css(this.element,q);this.css(this.container,{visibility:"visible"});this.playing&&this.play();return this},getRealIndex:function(p){var q=this.index;m(this.cacheSlides,function(r,s){if(p===s){q=r}});return q},go:function(p){var r=this.cacheSlides[p];var q=p;m(this.slides,function(s,t){if(r===t){q=s}});this.slide(q)},slide:function(y,u){this.animateLock=true;var D=h[this.vertical][1],A=h[this.vertical][0],z=n("transition"),E=parseFloat(this.css(this.element,D))||0,q,w={},B,F=this.getSum(A,y,y+1);y=Math.min(Math.max(0,y),this.length-1);u=typeof u=="undefined"?this.cfg.speed:parseInt(u);
q=this.getPos(A,y);B=q-E;u=Math.abs(B)<F?Math.ceil(Math.abs(B)/F*u):u;if(z){w[z]=D+" ease "+u+"ms";w[D]=q+"px";this.css(this.element,w)}else{var x=this,r=0,t=u/10,p=function(H,G,J,I){return -J*((H=H/I-1)*H*H*H-1)+G},v=function(){if(r<t){r++;x.element.style[D]=Math.ceil(p(r,E,B,t))+"px";x.aniTimer=setTimeout(v,10)}else{x.element.style[D]=q+"px";x.transitionend({propertyName:D})}};clearTimeout(this.aniTimer);v()}var C=this.slides[this.index];this.index=y;var s=this.getRealIndex(this.slides[this.index]);this.cfg.before.call(this,s,C);return this},play:function(){clearTimeout(this.timer);this.playing=true;this.timer=setTimeout(this.bind(function(){this.next()},this),this.cfg.timeout);return this},pause:function(){clearTimeout(this.timer);this.playing=false;return this},stop:function(){this.pause();
return this.slide(0)},prev:function(v,u,t){if(this.animateLock){return}clearTimeout(this.timer);var q=this.index;var p=this.slides.length;var s=null;var r=null;if(!t&&q===0){s=this.slides[p-1];r=this.slides[0];this.element.removeChild(s);this.element.insertBefore(s,r);this.refresh();this.element.style[this.cfg.direction]=-this.getOuterWidth(s)+"px"}v=typeof v=="undefined"?v=1:v%this.length;if(q===0){}else{q-=v}if(u===false){q=Math.max(q,0)}else{q=q<0?this.length+q:q}return this.slide(q)},next:function(w,v,u){if(this.animateLock){return}clearTimeout(this.timer);var r=this.index;var p=this.slides.length;var t=null;var s=null;if(!u&&r===p-1){t=this.slides[0];s=this.slides[p-1];this.element.removeChild(t);this.element.appendChild(t,s);this.refresh();var q=parseInt(this.element.style[this.cfg.direction],10);
this.element.style[this.cfg.direction]=(q+this.getOuterWidth(t))+"px"}if(typeof w=="undefined"){w=1}if(r===p-1){}else{r+=w}if(v===false){r=Math.min(r,this.length-1)}else{r%=this.length}return this.slide(r)},_start:function(p){p=this.eventHook(p);var q=p.target.nodeName.toLowerCase();if(!this.touching&&(q=="a"||q=="img")){p.preventDefault()}this.removeListener(this.element,"click",d);this.startPos=[p.pageX,p.pageY];this.element.style[b(j+"transition-duration")]="0ms";this.startTime=+new Date();this._pos=parseFloat(this.css(this.element,h[this.vertical][1]))||0},_move:function(x){if(!this.startPos||x.scale&&x.scale!==1){return}x=this.eventHook(x);this.stopPos=[x.pageX,x.pageY];var s,w=h[this.vertical][1],v=h[this.vertical][0],r=this.stopPos[this.vertical]-this.startPos[this.vertical];if(this.scrolling||typeof this.scrolling=="undefined"&&Math.abs(r)>=Math.abs(this.stopPos[1-this.vertical]-this.startPos[1-this.vertical])){x.preventDefault();
var u=this.slides.length;var t=null;var q=null;r=r/((!this.index&&r>0||this.index==this.length-1&&r<0)?(Math.abs(r)/this[v]+1):1);if(!this.tempCreate&&this.index===0){this.tempCreate=true;t=this.slides[u-1];q=this.slides[0];this.element.removeChild(t);this.element.insertBefore(t,q);this.refresh();this._pos=-this.getOuterWidth(t)}else{if(!this.tempCreate&&(this.index===u-1)){this.tempCreate=true;t=this.slides[0];q=this.slides[u-1];this.element.removeChild(t);this.element.appendChild(t,q);var p=parseInt(this.element.style[this.cfg.direction],10);this.refresh();this._pos=p+this.getOuterWidth(t)}}this.element.style[w]=this._pos+r+"px";if(l.getSelection!=null){s=l.getSelection();if(s.empty){s.empty()}else{if(s.removeAllRanges){s.removeAllRanges()}}}if(r&&typeof this.scrolling=="undefined"){this.scrolling=true;
clearTimeout(this.timer);clearTimeout(this.aniTimer)}}else{this.scrolling=false}},_end:function(){if(this.startPos){if(this.scrolling){this.tempCreate=false;var x=h[this.vertical][0],u=this.stopPos[this.vertical]-this.startPos[this.vertical],w=Math.abs(u),p=w/u,q,t,r,v=this.index,s=0;this.addListener(this.element,"click",d);if(w>20){t=parseFloat(this.css(this.element,h[this.vertical][1]));do{if(v>=0&&v<this.length){r=this.getPos(x,v);q=this.getSum(x,v,v+1)}else{v+=p;break}}while(Math.abs(r-t)>q/2&&(v-=p));s=Math.abs(v-this.index);if(!s&&+new Date()-this.startTime<250){s=1}}u>0?this.prev(s,false,true):this.next(s,false,true);this.playing&&this.play()}delete this._pos;delete this.stopPos;delete this.startPos;delete this.scrolling;delete this.startTime}},transitionend:function(p){if(p.propertyName==h[this.vertical][1]){var q=this.getRealIndex(this.slides[this.index]);
this.cfg.after.call(this,q,this.slides[this.index]);this.playing&&this.play()}this.animateLock=false},refresh:function(){if(this.direction==null){this.setup()}else{this.slides=e(this.element);this.length=this.slides.length;this.index=Math.max(Math.min(this.length-1,this.index),0);this.resize()}},append:function(p){this.element.appendChild(p);this.refresh()},prepend:function(p){this.length?this.insertBefore(p,0):this.append(p)},insertBefore:function(q,p){this.element.insertBefore(q,this.slides[p]);if(this.index>=p){this.index++}this.refresh()},remove:function(p){this.element.removeChild(this.slides[p]);if(this.index>=p){this.index--}this.refresh()}};m(["Width","Height"],function(p,q){m(["margin","padding","border"],function(s,r){c.fn[r+q]=function(t){return(parseFloat(this.css(t,r+"-"+h[p][1]+(r=="border"?"-width":"")))||0)+(parseFloat(this.css(t,r+"-"+h[p][2]+(r=="border"?"-width":"")))||0)
}});c.fn["get"+q]=function(r){return r["offset"+q]-this["padding"+q](r)-this["border"+q](r)};c.fn["getOuter"+q]=function(r){return r["offset"+q]+this["margin"+q](r)}});l.TouchSlider=c})(window);