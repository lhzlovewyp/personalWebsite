(function(b){var a=function(d){var c=d,e={activeLoadTime:2000,load:true,activeLoadNum:1,hfix:100,callback:null,attr:"lazyLoad_textarea",flushPrice:true,flushPriceAttr:"productid",indexLoad:false,scrollLoad:true};b.extend(e,c);this.param=e};a.prototype={constructor:a,doc:document,areaArray:[],lazyDom:function(c,g){var e=this,f=e.param,d=c;if(g){e.param=b.extend(f,g)}e.areaArray=e._getJqueryDomArray(d,f);if(f.indexLoad){e._domScrollLoad(e.areaArray,f)}if(f.scrollLoad){e._loadScrollDom(function(){if(e.areaArray.length==0){return}e._domScrollLoad(e.areaArray,f)})}if(f.load){e._loadActiveDom(e.areaArray,f)}},_loadActiveDom:function(h,d){var c=this,i=d,f=i.activeLoadTime,g=h;var e=setInterval(function(){var j=g.length;if(j==0){clearInterval(e);return}c._domActiveLoad(g,i)},f)},_loadScrollDom:function(c){loli.scroll(function(){c()
},50)},_domScrollLoad:function(d,g){var c=this,g=c.param,j=[];for(var f=0,h=d.length;f<h;f++){var e=c._getJqueryDom(d[f]);if(c.isInCurrScreen(e)){c._rendDom(e,g)}else{j.push(e)}}c.areaArray=j},_domActiveLoad:function(d,j){var c=this,h=j,f=d,e=f.length,g=Math.min(h.activeLoadNum,e);for(var k=0;k<g;k++){c._rendDom(c._getJqueryDom(f.shift()),h)}},_rendDom:function(k,d){var i=k,f=d,e=f.attr,h=i.attr(e),j=b("#"+h),g=f.flushPrice,c=f.flushPriceAttr;if(j.size()>0){i.html(j.val())}i.removeAttr(e);if(g){i.lazyPrice({attr:c,oneOffLoad:true})}if(f.callback){f.callback.call(i)}},isInCurrScreen:function(f){var h=this,i=f,c=h.doc,j=c.documentElement,g=h.param,d=g.hfix,e=Math.max(j.scrollTop,c.body.scrollTop),k=j.clientHeight+e;if(i){return(i.offset().top<k+d)&&(i.offset().top>e-d)}return false},_getJqueryDomArray:function(f,e){var c=[],d=e.attr;
if(f instanceof b){c=f.find("["+d+"]").get()}else{if(b.isArray(f)){c=f;return c}else{f=b(f);c=f.find("["+d+"]").get()}}if(c.length==0){if(f.attr(d)){c.push(f)}}return c},_getJqueryDom:function(c){if(!c){return c}if(c instanceof b){return c}return b(c)}};b.fn.extend({lazyDom:function(d){var c=new a();return c.lazyDom(this,d)}})})(jQuery);