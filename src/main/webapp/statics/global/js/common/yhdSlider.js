(function(){function a(b){this.option={container:null,content:null,trigger:null,pageButton:[],steps:1,effect:"visible",autoPlay:false,interval:3000,activeClass:"on",speed:300,eventType:"mouseover",delay:0};$.extend(this.option,b);this.index=0;this.timer=0;this.handlers={};this.box=$(this.option.container);if(this.box.length==0){return false}this.sprite=this.box.find(this.option.content);if(this.sprite.length==0){return false}this.trig=this.box.find(this.option.trigger).children();this.btnLast=this.box.find(this.option.pageButton[0]);this.btnNext=this.box.find(this.option.pageButton[1]);this.items=this.sprite.children();if(this.items.length==0){return false}this.total=this.items.length;if(this.total<=this.option.steps){return false}this.page=Math.ceil(this.total/this.option.steps);this.width=this.items.eq(0).outerWidth(true);
this.height=this.items.eq(0).outerHeight(true);this.init()}a.prototype={init:function(){this.initStyle();this.cutover(0);this.bindUI();this.autoPlay()},on:function(c,b){if(typeof this.handlers[c]=="undefined"){this.handlers[c]=[]}this.handlers[c].push(b);return this},fire:function(e,f){if(this.handlers[e] instanceof Array){var c=this.handlers[e];for(var d=0,b=c.length;d<b;d++){c[d](f)}}},initStyle:function(){var b=function(f){for(var e=0;e<f.option.steps;e++){f.items.eq(f.total-(e+1)).clone().prependTo(f.sprite);f.items.eq(e).clone().appendTo(f.sprite)}};switch(this.option.effect){case"scrollx":b(this);this.sprite.css({width:this.sprite.children().length*this.width,left:-this.option.steps*this.width});this.sprite.children().css("float","left");break;case"scrolly":b(this);this.sprite.css({top:-this.option.steps*this.height});
break;case"fade":this.items.css({position:"absolute",zIndex:0}).eq(this.index).css({zIndex:1});break;case"visible":this.items.css({display:"none"}).eq(this.index).css({display:"block"});break}var d=this;var c=setTimeout(function(){clearTimeout(c);d.fire("init")},30)},cutover:function(d){var e=(d==null)?this.option.speed:0;var f=this.index!=this.page?this.index:0;this.trig.eq(f).addClass(this.option.activeClass).siblings().removeClass(this.option.activeClass);switch(this.option.effect){case"visible":this.items.css({display:"none"}).eq(f).css({display:"block"});break;case"fade":this.items.css({position:"absolute",zIndex:0}).fadeOut(e);this.items.eq(f).css({zIndex:1}).fadeIn(e);break;case"scrollx":var b=this.width*this.option.steps;this.sprite.stop().animate({left:-b*this.index-b},e);break;case"scrolly":var c=this.height*this.option.steps;
this.sprite.stop().animate({top:-c*this.index-c},e);break}this.fire("cutover",f)},bindUI:function(){var c=this;var b=0;this.trig.bind(this.option.eventType,function(){var d=this;if(c.option.eventType=="mouseover"||c.option.eventType=="mouseenter"){if(c.index==$(d).index()){return}clearTimeout(b);b=setTimeout(function(){c.index=$(d).index();c.cutover();clearTimeout(b)},c.option.delay)}else{c.index=$(this).index();c.cutover()}});this.btnLast.click(function(){c.lastPage()});this.btnNext.click(function(){c.nextPage()});this.box.bind({mouseenter:function(){c.btnLast.show();c.btnNext.show();clearInterval(c.timer)},mouseleave:function(){c.btnLast.hide();c.btnNext.hide();c.autoPlay()}})},lastPage:function(){this.index--;if(this.index<-1){this.index=this.page-1;this.cutover(0);this.index=this.page-2
}this.cutover()},nextPage:function(){this.index++;if(this.index>this.page){this.index=0;this.cutover(0);this.index=1}this.cutover()},autoPlay:function(){var b=this;if(!this.option.autoPlay){return false}clearInterval(this.timer);this.timer=setInterval(function(){b.nextPage()},this.option.interval)}};window.Switchable=a})();