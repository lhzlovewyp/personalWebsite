(function(d){d.fn.jqm=function(f){var e={overlay:50,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:o,ajaxP:o,ajaxText:"",target:o,modal:o,toTop:o,onShow:o,onHide:o,onLoad:o};return this.each(function(){if(this._jqm){return n[this._jqm].c=d.extend({},n[this._jqm].c,f)}p++;this._jqm=p;n[p]={c:d.extend(e,d.jqm.params,f),a:o,w:d(this).addClass("jqmID"+p),s:p};if(e.trigger){d(this).jqmAddTrigger(e.trigger)}})};d.fn.jqmAddClose=function(e){return l(this,e,"jqmHide")};d.fn.jqmAddTrigger=function(e){return l(this,e,"jqmShow")};d.fn.jqmShow=function(e){return this.each(function(){e=e||window.event;d.jqm.open(this._jqm,e)})};d.fn.jqmHide=function(e){return this.each(function(){e=e||window.event;d.jqm.close(this._jqm,e)})};d.jqm={hash:{},open:function(e,v){var u=n[e],f=u.c,t="."+f.closeClass,i=(parseInt(u.w.css("z-index"))),i=(i>0)?i:3000,s=d("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":i-1,opacity:f.overlay/100});
if(u.a){return o}u.t=v;u.a=true;u.w.css("z-index",i);if(f.modal){if(!a[0]){k("bind")}a.push(e)}else{if(f.overlay>0){u.w.jqmAddClose(s)}else{s=o}}u.o=(s)?s.addClass(f.overlayClass).prependTo("body"):o;if(c){d("html,body").css({height:"100%",width:"100%"});if(s){s=s.css({position:"absolute"})[0];for(var m in {Top:1,Left:1}){s.style.setExpression(m.toLowerCase(),"(_=(document.documentElement.scroll"+m+" || document.body.scroll"+m+"))+'px'")}}}if(f.ajax){var r=f.target||u.w,q=f.ajax,r=(typeof r=="string")?d(r,u.w):d(r),q=(q.substr(0,1)=="@")?d(v).attr(q.substring(1)):q;r.html(f.ajaxText).load(q,f.ajaxP,function(){if(f.onLoad){f.onLoad.call(this,u)}if(t){u.w.jqmAddClose(d(t,u.w))}j(u)})}else{if(t){u.w.jqmAddClose(d(t,u.w))}}if(f.toTop&&u.o){u.w.before('<span id="jqmP'+u.w[0]._jqm+'"></span>').insertAfter(u.o)
}(f.onShow)?f.onShow(u):u.w.show();j(u);return o},close:function(f){var e=n[f];if(!e.a){return o}e.a=o;if(a[0]){a.pop();if(!a[0]){k("unbind")}}if(e.c.toTop&&e.o){d("#jqmP"+e.w[0]._jqm).after(e.w).remove()}if(e.c.onHide){e.c.onHide(e)}else{e.w.hide();if(e.o){e.o.remove()}}return o},params:{}};var p=0,n=d.jqm.hash,a=[],c=d.browser.msie&&(d.browser.version=="6.0"),o=false,g=d('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0}),j=function(e){if(c){if(e.o){e.o.html('<p style="width:100%;height:100%"/>').prepend(g)}else{if(!d("iframe.jqm",e.w)[0]){e.w.prepend(g)}}}h(e)},h=function(f){try{d(":input:visible",f.w)[0].focus()}catch(e){}},k=function(e){d()[e]("keypress",b)[e]("keydown",b)[e]("mousedown",b)},b=function(f){var i=n[a[a.length-1]],e=(!d(f.target).parents(".jqmID"+i.s)[0]);
if(e){h(i)}return !e},l=function(i,e,f){return i.each(function(){var m=this._jqm;d(e).each(function(){if(!this[f]){this[f]=[];d(this).click(function(){for(var q in {jqmShow:1,jqmHide:1}){for(var r in this[q]){if(n[this[q][r]]){n[this[q][r]].w[q](this)}}}return o})}this[f].push(m)})})}})(jQuery);