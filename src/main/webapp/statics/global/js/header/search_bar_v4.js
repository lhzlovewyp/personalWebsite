(function(r){var x=(typeof isSearchKeyWords!="undefined"&&isSearchKeyWords=="1")?1:0;var q=(typeof isIndex!="undefined"&&isIndex==1)?1:0;var y=(typeof globalSearchSelectFlag!="undefined"&&globalSearchSelectFlag=="0")?0:1;var v=(typeof globalSearchHotkeywordsFlag!="undefined"&&globalSearchHotkeywordsFlag=="0")?0:1;var A=r("#keyword");var s=r("#searchSuggest");var t=r("#fix_keyword");var p=r("#fix_searchSuggest");var u=r("#leaf");var B=r("#hdSearchTab");var C=window.loli||(window.loli={});var z=C.app=C.app||{};var w=C.app.search=C.app.search||{};var D=URLPrefix.search_keyword||"http://search.yhd.com";w.delayCall=function(c,e,f,d){r(c).data("lastTime",new Date().getTime());if(e){var b=e.call(r(c));r(c).data("lastResult",b)}var a=setTimeout(function(){var g=r(c).data("lastTime")?r(c).data("lastTime"):new Date().getTime();
var h=(typeof r(c).data("lastResult")=="undefined"||r(c).data("lastResult"))?true:false;var i=new Date().getTime();if(i-g>=(d-50)){if(f&&h){f.call(r(c))}}},d)};w.filterXml=function(a){if(a!=null&&a!=""){a=a.replace(/\&/g,"");a=a.replace(/\</g,"");a=a.replace(/\>/g,"");a=a.replace(/\\/g,"");a=a.replace(/\'/g,"");a=a.replace(/\"/g,"")}return a};w.showHistory=function(a,f){if(!y){return}var c=u.size()>0?u.val():"0";var g=a.val();var h=a.attr("original");var e=C.yhdStore;var b=function(){var i=D+"/get_new_keywords.do?keyword=&leaf="+c+"&flag=v1&hotSearchFlag=new&localStorageFlag=new&callback=?";r.getJSON(i,function(j){if(j.ERROR){return}else{f.html(j.value);var k;if(e){e.getFromRoot("search_keyword_history",function(G){if(G&&G.status==1){var m=G.value;if(m){k=m.split(",")}var o="";if(typeof(k)!="undefined"&&k.length>0){o+='<dt><a id="hd_clear_history_record" href="javascript:void(0);" onclick="clearRecord(this);gotracker(\'2\',\'clear_record\',0);">清除</a>历史记录</dt>';
for(var n=k.length-1;n>=0;n--){var H=w.filterXml(decodeURIComponent(decodeURIComponent(k[n])));if(H!=null&&H.length>0){o+="<dd>";o+='<a roll="true" href="javascript:void(0);" onclick="searchMe(\''+H+"');addTrackPositionToCookie('1','search_history');\">"+H+"</a></dd>"}}}else{o="<dt>历史记录</dt>"}}else{o="<dt>历史记录</dt>"}f.find(".hd_s_history").html(o)})}else{var l="<dt>历史记录</dt>";f.find(".hd_s_history").html(l)}f.addClass("hd_search_history");if(typeof(k)=="undefined"||k.length==0){r("#hd_clear_history_record",f).hide()}d(a,f);f.show()}})};var d=function(i,j){j.delegate("#hd_clear_history_record","click",function(){e.setFromRoot("search_keyword_history","");r(this).hide();r(".hd_s_history dd",j).remove()})};if(g==""||r.trim(g)==""||r.trim(g)=="请输入关键词"||(r.trim(g)==h&&!x)){b()}};w.showSuggest=function(g,d){if(!y){return
}var b=u.size()>0?u.val():"0";var e=g.val();var f=g.attr("original");var a=function(){var h=D+"/get_new_keywords.do?keyword="+encodeURIComponent(encodeURIComponent(e))+"&leaf="+b+"&flag=v1&hotSearchFlag=new&newSmartBoxFlag=new&callback=?";r.getJSON(h,function(i){if(i.ERROR){return}else{d.html(i.value);d.removeClass("hd_search_history");c(g,d);d.show()}})};var c=function(i,h){var j=h.find("ul>li");h.data("suggestLength",j.length);h.data("curSuggestIndex",-1);j.mouseenter(function(){var k=j.index(this);if(r(this).hasClass("haslist")){r(this).addClass("select_haslist").siblings().removeClass("select_haslist select");h.children("ul").css("height","336px")}else{r(this).addClass("select").siblings().removeClass("select_haslist select");h.children("ul").css("height","")}h.data("curSuggestIndex",k)
});j.mouseleave(function(){r(this).removeClass("select select_haslist")});if(j.size()>0&&j.eq(0).hasClass("select_haslist")){h.children("ul").css("height","336px")}h.delegate("#choose_list dd","mouseover",function(){r(this).find("#s_cart_btn").show();return false});h.delegate("#choose_list dd","mouseout",function(){r(this).find("#s_cart_btn").hide();return false});r("a[id=s_cart_btn]").hide()};if((e!=""&&r.trim(e)!=""&&r.trim(e)!="请输入关键词"&&r.trim(e)!=f)||(r.trim(e)==f&&x)){a()}};w.registerGlobalEvent=function(){r("#site_header").find(".hd_search_wrap").bind("mouseleave",function(){s.hide()});r(document).bind("click",function(d){var e=d.target;if(e.id=="hd_clear_history_record"||e.className=="keywordInput"||e.className=="fl"){return}s.hide();p.hide()});var b=function(l,g,i){l=l||window.event;
var e=l.keyCode;var d=i.find("ul>li");var j=d.length;var k=(i.data("curSuggestIndex")!=null)?i.data("curSuggestIndex"):-1;i.data("suggestLength",j);if(j>0){if(e=="38"){if(k<=0){k=j-1}else{k=k-1}i.data("curSuggestIndex",k)}else{if(e=="40"){if(k>=(j-1)){k=0}else{k=k+1}i.data("curSuggestIndex",k)}}if(e=="38"||e=="40"){var h=d.eq(k);if(h.hasClass("haslist")){h.addClass("select_haslist").siblings().removeClass("select_haslist select");i.children("ul").css("height","336px")}else{h.addClass("select").siblings().removeClass("select_haslist select");i.children("ul").css("height","")}if(h.attr("id")){g.val(d.eq(0).children("a").text());if(h.attr("id")=="recom1"){r("#recommendId",i).val(r("#recom1Id",i).val());r("#recommendName",i).val(r("#recom1Name",i).val())}if(h.attr("id")=="recom2"){r("#recommendId",i).val(r("#recom2Id",i).val());
r("#recommendName",i).val(r("#recom2Name",i).val())}}else{g.val(h.children("a").text());r("#recommendId",i).val("");r("#recommendName",i).val("")}if(q){g.siblings("label").hide()}}if(e=="13"){var f=r("#hdSearchTab");if(f.size()>0&&f.attr("data-type")=="2"){searchMe(g.val(),"0","0",1);return}var h=d.eq(k);if(h.attr("id")){searchMe(g.val(),r("#recommendId",i).val(),r("#recommendName",i).val())}else{searchMe(g.val(),"0","0")}}}else{if(e=="13"){var f=r("#hdSearchTab");if(f.size()>0&&f.attr("data-type")=="2"){searchMe(g.val(),"0","0",1);return}searchMe(g.val(),"0","0")}}};var c=function(f,i,d){f=f||window.event;var e=f.keyCode;if(e=="116"||e=="16"||e=="17"||e=="18"||e=="38"||e=="40"||e=="13"){return}var g=i.val();var h=i.attr("original");if(g==""||r.trim(g)==""||r.trim(g)=="请输入关键词"||(r.trim(g)==h&&!x)){w.delayCall(i,null,function(){w.showHistory(i,d)
},200)}else{w.delayCall(i,null,function(){w.showSuggest(i,d)},200)}};var a=function(k,e,i){k=k||window.event;if(k){var j=document.createElement("input").webkitSpeech===undefined;if(!j){var l=k.pageX;var h=e.outerWidth();var f=e.offset().left;var d=f+h-25;var g=f+h;if(l>=d&&l<=g){return}}}c(k,e,i)};A.keydown(function(d){b(d,A,s)});A.keyup(function(d){c(d,A,s)});A.click(function(d){a(d,A,s)});if(typeof isIndex=="undefined"||isIndex!=1){t.keydown(function(d){b(d,t,p)});t.keyup(function(d){c(d,t,p)});t.click(function(d){a(d,t,p)})}B.mouseenter(function(){r(this).addClass("hd_serach_tab_hover")});B.mouseleave(function(){r(this).removeClass("hd_serach_tab_hover")});B.delegate("a","click",function(){var d=r(this).index();if(d!==0){r(this).prependTo(B);B.attr("data-type",r(this).attr("data-type"));
B.removeClass("hd_serach_tab_hover");if(B.attr("data-type")=="2"){B.next().attr("data-tpa","YHD_GLOBAl_HEADER_SEARCHSHOP").removeAttr("data-tc")}else{B.next().attr("data-tpa","YHD_GLOBAl_HEADER_SEARCH").removeAttr("data-tc")}}})};w.loadHotKeywords=function(){var c=A.val();var b=A.attr("original");if(r("#hotKeywordsShow").size()==0){return}if(!v){return}var d=function(g){var i=1;var k=1;var l=URLPrefix.search_keyword+"/recommend/headHotKeywordRecommend.do?threshold=10&mcSiteId="+i+"&siteType="+k;if((typeof(c)!="undefined"&&c!=""&&r.trim(c)!=b)||(r.trim(c)==b&&x)){l+="&keyword="+encodeURIComponent(encodeURIComponent(c))}var j=jQuery("#curCategoryIdToGlobal").val();if(typeof(j)!="undefined"){l+="&categoryId="+j}if(g){l+="&historyKeywords="+g}var f=false;var m=jQuery("#hotKeywordsShow").data("isLoaded");
if(m=="1"){return}jQuery("#hotKeywordsShow").data("isLoaded","1");var e=function(n){if(q==1){var J=r("#hotKeywordsShow").attr("data-specialHotword");var I=(typeof globalSpecialHotwordFlag!="undefined"&&globalSpecialHotwordFlag=="0")?0:1;if(I&&J){var o=r.parseJSON(J);if(o&&o.text&&o.linkUrl){var H="<a title='"+o.text+"' href='"+o.linkUrl+"' target='_blank' data-tc='"+(o.tc||"")+"' data-tce='"+(o.tce||"")+"'  data-ref='"+o.perTracker+"'>"+o.text+"</a>";n=H+n}}}return n};try{jQuery.ajax({url:l,dataType:"jsonp",jsonp:"callback",jsonpCallback:"keywordRecommendCallback",cache:true,timeout:3000,success:function(N){if(N&&N.headhotkeywords&&N.headhotkeywords.length>0){var n=N.headhotkeywords;var L=[];for(var J=0;J<n.length;J++){var K=n[J];var M=URLPrefix.search_keyword+"/c0-0/k"+encodeURIComponent(K)+"/"+jQuery.cookie("provinceId")+"/";
K='<a title="'+K+'" target="_blank" href="'+M+'" data-ref="shkw_'+encodeURIComponent(K)+'" data-tc="SEARCH.0.KEYWORD.shkw_'+encodeURIComponent(K)+"."+(J+1)+'">'+K+"</a>";L.push(K)}var o=e(L.join(" "));jQuery("#hotKeywordsShow > a").remove();jQuery("#hotKeywordsShow").append(o);jQuery("#hotKeywordsShow").data("searchKeyLoaded","1")}}})}catch(h){}};var a=C.yhdStore;if(a){a.getFromRoot("search_keyword_history",function(e){if(e&&e.status==1){d(e.value)}else{d("")}})}else{d("")}};w.changeTab=function(c){if(typeof c=="undefined"||isNaN(c)||a==c||(c!="1"&&c!="2")){return}var a=B.attr("data-type");var b=B.find("a[data-type='"+c+"']");b.prependTo(B);B.attr("data-type",b.attr("data-type"));B.removeClass("hd_serach_tab_hover");if(B.attr("data-type")=="2"){B.next().attr("data-tpa","YHD_GLOBAl_HEADER_SEARCHSHOP").removeAttr("data-tc")
}else{B.next().attr("data-tpa","YHD_GLOBAl_HEADER_SEARCH").removeAttr("data-tc")}};r(document).ready(function(){w.registerGlobalEvent();w.loadHotKeywords()})})(jQuery);function findNames(){}function _goSearch(){}function goSearch(){}function findNamesByDiv(){}function _goSearchByDiv(){}function goSearchByDiv(){}function loadComplete_findNames(){}function searchListHover(){}function clearRecord(){}function roll(){}function hotKeywords_onDocumentReady(){}function reloadKeyWordsData(){}function addKeywordHistory(){}function selectSearchCategory(){}function readAdv_hotKeywords_onDocumentReady(){}function indexReadAdv_hotKeywords_onDocumentReady(){}function getHotkeywordHtml(){}function searchKeywords_onDocumentReady(){}function searchFocus(){}function searchRecommend(b){if(b!=null&&b!=""){window.location=b
}}function cutString(d,c){if(d==null||d.length<=c){return d}return d.substring(0,c)}function emptySearchBar(g){if(!g){g="#keyword"}var f=jQuery(g);var j=f.parent("div").find("label");var i=f.attr("original");var h=f.val();if(f.val()!=""&&j.size()>0){j.hide();f.trigger("click");return}if(h.indexOf(i)==0){f.val(h.substring(i.length));f.css("color","#333333")}if(f.val()!=""){f.trigger("click")}}function searchMe(C,r,s,v){var y=null;var w=document.getElementById("recommendId");if(w){y=w.value}var q=null;var x=document.getElementById("recommendName");if(x){q=x.value}var z=jQuery("#keyword");if(!C){C=z.val()}else{if(C instanceof jQuery){z=C;C=z.val()}}if(C!=null&&C!=""){var u=z.attr("original");if(u!=null&&u!=""&&u!="请输入关键词"){if(u==C){var A=z.attr("url");if(A!=null&&A!=""){loli.spm.refreshPage(A,z);
return}}}}else{if((isIndex==1&&(typeof(indexFlag)!="undefined"&&typeof(indexFlag)=="number"&&indexFlag==1))){var D=z.parent("div").find("label");if(D.size()>0&&(D.css("display")=="block"||D.css("display")=="inline")){var A=z.attr("url");if(A!=null&&A!=""){loli.spm.refreshPage(A,z);return}}}}if(!C||C=="请输入关键词"){return}C=C.replace(/\//gi," ");var B="0";if(jQuery("#leaf").size()>0){B=jQuery("#leaf").val()}if(v){var t=URLPrefix.search_keyword+"/c0-0-0/b/a-s1-v2-p1-price-d0-f0b-m1-rt0-pid-mid0-k"+encodeURIComponent(encodeURIComponent(C))+"/";loli.spm.refreshPage(t,z);return}var p=jQuery.cookie("provinceId");if(r!=null&&r!="0"){var t=URLPrefix.search_keyword+"/c"+r+"-"+s+"/k"+encodeURIComponent(encodeURIComponent(C))+"/"+p+"/";loli.spm.refreshPage(t,z)}else{if(y!=null&&y!=""){var t=URLPrefix.search_keyword+"/c"+y+"-"+q+"/k"+encodeURIComponent(encodeURIComponent(C))+"/"+p+"/";
loli.spm.refreshPage(t,z)}else{var t=URLPrefix.search_keyword+"/c"+B+"-0/k"+encodeURIComponent(encodeURIComponent(C))+"/"+p+"/";loli.spm.refreshPage(t,z)}}}function searchMeForBrand(){var d=jQuery("#keyword");var c=d.val();if(c==""||c=="商品、品牌"){return}searchMe()}function searchMeForClick(){var b=$("#hdSearchTab");if(b.size()>0&&b.attr("data-type")=="2"){searchMe(null,null,null,1);return}searchMe()}function searchInputFocus(g){var h=jQuery("#keyword");if(g){h=jQuery(g)}if(h.size()==0){return}var i=h.attr("original");var j=h.val();var f=(typeof isSearchKeyWords!="undefined"&&isSearchKeyWords=="1")?1:0;if(j==null||j==""){if(i==null||i==""){i="请输入关键词";h.attr("original",i)}h.val(i);j=i}if(!f){h.css("color","#999999");h.bind("focus",function(){if(this.value==i){this.value="";this.style.color="#333333"
}}).bind("blur",function(){if(this.value==""){this.value=i;this.style.color="#999999"}})}else{h.css("color","#333333");h.bind("blur",function(){if(this.value==""){this.value=i}})}}function indexSearchInputFocus(){var e=jQuery("#keyword").attr("original");var d=jQuery("#keyword").val();var f=jQuery("#keyword").parent("div").find("label");if(f.size()==0){return}if(d==e||d==""){f.css({display:"block"});jQuery("#keyword").css("color","#333333")}jQuery("#keyword").bind("focus",function(){f.css({color:"#CCCCCC"});if(this.value==e){this.style.color="#CCCCCC"}else{this.style.color="#333333"}}).bind("blur",function(){if(this.value==""||this.value==e||this.value=="请输入关键词"){f.css({color:"#666666",display:"block"});jQuery("#keyword").val("")}}).bind("keydown",function(){if(this.value==""||this.value==e){f.hide()
}})}jQuery(document).ready(function(){if(typeof isIndex!="undefined"&&isIndex==1){indexSearchInputFocus();if(typeof isFixTopNav!="undefined"&&isFixTopNav==true){searchInputFocus("#fix_keyword")}}else{searchInputFocus();if(typeof isFixTopNav!="undefined"&&isFixTopNav==true){searchInputFocus("#fix_keyword");if(typeof headerType!="undefined"&&headerType=="search"){$("#fix_keyword").bind("focus",function(){$(this).removeClass("hd_ipt_corner").addClass("focus_ipt")});$("#fix_keyword").bind("blur",function(){$(this).addClass("hd_ipt_corner").removeClass("focus_ipt")})}}}});