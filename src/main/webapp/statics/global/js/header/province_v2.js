var YHDPROVINCE={};YHDPROVINCE.getCurentDomain=function(){return URLPrefix.central};YHDPROVINCE.getOppositeDomain=function(){return URLPrefix.central};YHDPROVINCE.proviceObj={p_1:"上海",p_2:"北京",p_3:"天津",p_4:"河北",p_5:"江苏",p_6:"浙江",p_7:"重庆",p_8:"内蒙古",p_9:"辽宁",p_10:"吉林",p_11:"黑龙江",p_12:"四川",p_13:"安徽",p_14:"福建",p_15:"江西",p_16:"山东",p_17:"河南",p_18:"湖北",p_19:"湖南",p_20:"广东",p_21:"广西",p_22:"海南",p_23:"贵州",p_24:"云南",p_25:"西藏",p_26:"陕西",p_27:"甘肃",p_28:"青海",p_29:"新疆",p_30:"宁夏",p_32:"山西"};YHDPROVINCE.swithAddressCity=function(c,d){provinceSwitchProvince(c,oldProvinceId,paramObj)};function setAddressCity(g,e){var f=jQuery.cookie("provinceId");var h={};if(e){h.targetUrl=e}jQuery.cookie("provinceId",g,{domain:no3wUrl,path:"/",expires:800});glaCookieHandler.genGlaCookie({provinceId:g});provinceSwitchProvince(g,f,h)
}function provinceSwitchProvince(d,f,e){moveCartItem(d,f,e)}function setAddressCityback(P){var O=null;if(P&&P.targetUrl){O=P.targetUrl;window.location.href=O;return}var Q=window.location.href;if(Q.indexOf("merchantID=")!=-1){Q=Q.substring(0,Q.indexOf("merchantID=")-1);window.location.href=Q;return}if(Q.indexOf("merchant=")!=-1){Q=Q.substring(0,Q.indexOf("merchant=")-1);window.location.href=Q;return}if(Q.indexOf("/tuangou/")!=-1){if(Q.indexOf("/tuangou/myGroupon.do")!=-1){window.location.href=Q}return}if(Q.indexOf("openProvincePage=")!=-1){Q=Q.substring(0,Q.indexOf("openProvincePage=")-1);window.location.href=Q;return}if(Q.indexOf("/cart/cart.do?action=view")!=-1){window.location.href="/cart/cart.do?action=view";return}var L=/^\S*product\/\d+_?\d+/;if(Q.match(L)){if(Q.indexOf("_")!=-1){Q=Q.substring(0,Q.indexOf("_"))
}else{if(Q.indexOf("#")!=-1){var B=Q.indexOf("#");Q=Q.substring(0,B)}}window.location.href=Q;return}var G=/^(http:\/\/){0,1}([^\/]+\/)[0-9]+\/([^\/]*)$/;if(Q.match(G)){Q=Q.replace(G,"$1$2$3");var y=jQuery.cookie("provinceId");var C=jQuery("#p_"+y);loli.spm.refreshPage(Q,C);return}var z=/^(http:\/\/){0,1}([^\/]+\/)([^\/]*)$/;if(Q.match(z)){var y=jQuery.cookie("provinceId");var C=jQuery("#p_"+y);loli.spm.refreshPage(Q,C);return}var E=/^(http:\/\/){0,1}[^\/]+\/channel\/[0-9]+_[0-9]+\/$/;if(Q.match(E)){Q=Q.substring(0,Q.lastIndexOf("_"));window.location.href=Q;return}var R=/^(http:\/\/){0,1}[^\/]+\/cms\/view.do\?topicId=[0-9]+&merchant=[0-9]+$/;if(Q.match(R)){Q=Q.substring(0,Q.lastIndexOf("&merchant"));var y=jQuery.cookie("provinceId");var C=jQuery("#p_"+y);loli.spm.refreshPage(Q,C);return}var H=/^(http:\/\/){0,1}[^\/]+\/brand\/[0-9]+\/{0,1}(\?[^\/]+)*$/;
if(Q.match(H)){window.location.href=Q;return}var N=/^(http:\/\/){0,1}[^\/]+\/try\/[0-9]+\/{0,1}(\?[^\/]+)*$/;if(Q.match(N)){if(Q.lastIndexOf("/")==Q.length-1){Q=Q.substring(0,Q.lastIndexOf("/"))}Q=Q.substring(0,Q.lastIndexOf("/"));window.location.href=Q;return}var J=/^(http:\/\/){0,1}[^\/]+\/try\/[0-9]+_[0-9]+\/{0,1}(\?[^\/]+)*$/;if(Q.match(J)){Q=Q.substring(0,Q.lastIndexOf("_"))+"_0/";window.location.href=Q;return}var d=/^(http:\/\/){0,1}[^\/]+\/S-theme\/[0-9]+\/{0,1}(\?[^\/]+)*$/;if(Q.match(d)){window.location.href=Q;return}var F=/^(http:\/\/){0,1}[^\/]+\/s2\/c([0-9]*)-([^?^\/]*)\/([0-9]*)\/$/;var x=/^(http:\/\/){0,1}[^\/]+\/c([0-9]*)-([^?^\/]*)\/([0-9]*)\/$/;if(Q.match(F)||Q.match(x)){if(Q.lastIndexOf("/")==Q.length-1){Q=Q.substring(0,Q.lastIndexOf("/"))}Q=Q.substring(0,Q.lastIndexOf("/")+1);
var y=jQuery.cookie("provinceId");var C=jQuery("#p_"+y);loli.spm.refreshPage(Q,C);return}var D=/^(http:\/\/){0,1}search.[^\/]+\/c([0-9]*)-([^?^\/]*)\/k([^?^\/]*)\/([0-9]*)\/$/;if(Q.match(D)){if(Q.lastIndexOf("/")==Q.length-1){Q=Q.substring(0,Q.lastIndexOf("/"))}Q=Q.substring(0,Q.lastIndexOf("/")+1);var y=jQuery.cookie("provinceId");var C=jQuery("#p_"+y);loli.spm.refreshPage(Q,C);return}var K=/^(http:\/\/){0,1}channel\.[^\/]+\/[^\/^_^\.]+(\/[^\/^\.]+){0,1}\/[0-9]+\/{0,1}(\?[^\/]+){0,1}(#[^\/]+)*$/;if(Q.match(K)){if(Q.indexOf("#")!=-1){Q=Q.substring(0,Q.indexOf("#"))}if(Q.indexOf("?")!=-1){var M=Q.substring(Q.indexOf("?"));var A=Q.substring(0,Q.indexOf("?"));if(Q.lastIndexOf("/")==Q.length-1){A=A.substring(0,A.lastIndexOf("/"));M="/"+M}A=A.substring(0,A.lastIndexOf("/"));Q=A+M}else{if(Q.lastIndexOf("/")==Q.length-1){Q=Q.substring(0,Q.lastIndexOf("/"))
}Q=Q.substring(0,Q.lastIndexOf("/"))}window.location.href=Q;return}if(Q.indexOf("confirmOrder")!=-1&&Q.indexOf("saveOrder")!=-1){window.location.href=YHDPROVINCE.getCurentDomain();return}var I=URLPrefix.search+"/s/";if(Q.substr(0,I.length)==I){var L=/-p\d{0,3}/;if(Q.match(L)){Q=Q.replace(L,"-p1");var y=jQuery.cookie("provinceId");var C=jQuery("#p_"+y);loli.spm.refreshPage(Q,C);return}}loli.spm.reloadPage(jQuery("#currProvince"))}function moveCartItem(j,n,o){var k=1;var p={};var m={};var i=[];if(typeof o!="undefined"&&o){if(typeof o.isSetAddress!="undefined"&&o.isSetAddress){if(o.isSetAddress==0){k=o.isSetAddress}}if(typeof o.callback!="undefined"&&o.callback){p=o.callback;if(typeof p.func!="undefined"&&p.func){m=p.func}if(typeof p.args!="undefined"&&p.func){i=p.args}}}var l=URLPrefix.cartDomain||"http://cart.yhd.com";
jQuery.getJSON(l+"/cart/opt/switchProvince.do?provinceId="+j+((n)?"&oldProvinceId="+n:"")+"&timestamp="+new Date().getTime()+"&callback=?",function(a){if(typeof k!="undefined"&&k!=0){setAddressCityback(o)}if(typeof m!="undefined"&&typeof m=="function"){m.apply(this,i)}})}function initProvince(){var e=jQuery.cookie("provinceId");if(e&&e>0){jQuery("#currProvince").text(YHDPROVINCE.proviceObj["p_"+e]).show();var g=jQuery("#weibo");if(e==2){g.attr("href","http://weibo.com/yihaodianbeijing")}else{if(e==20){g.attr("href","http://weibo.com/yihaodianguangzhou")}else{g.attr("href","http://weibo.com/yihaodian")}}if(!glaCookieHandler.check2ProvinceIsSame()){glaCookieHandler.genGlaCookie({provinceId:e})}}else{var f=(typeof hideGlobalCookieCheckMsgFlag!="undefined"&&hideGlobalCookieCheckMsgFlag=="1")?1:0;
if(f){return}var h=(typeof globalShowProWin!="undefined"&&globalShowProWin=="1")?1:0;if(h){return}showProvincesV2()}}function showProvincesV2(){if(jQuery.cookie("provinceId")){YHDPROVINCE.headerSelectProvince();return}var d=YHDPROVINCE.getCurentDomain();var c=d+"/header/selectProvinceboxV2.do?timestamp="+new Date().getTime()+"&callback=?";jQuery.getJSON(c,function(a){if(a&&!a.ERROR){YHDPROVINCE.processProvince(a)}})}YHDPROVINCE.processProvince=function(b){if(!jQuery.cookie("provinceId")){YHDPROVINCE.chooseProvincePop(b)}};YHDPROVINCE.getProvinceName=function(b){jQuery("#currentProvinceName").html("<strong>"+jQuery("#p_"+b).text()+"站</strong> >>")};YHDPROVINCE.yhdCommonProvinceInfo=function(c,d){d.push('<li>A<a id="p_13" isTrkCustom="1" href="javascript:void(0);">安徽</a></li>');d.push('<li>B<a id="p_2" isTrkCustom="1" href="javascript:void(0);">北京</a></li>');
d.push('<li>C<a id="p_7" isTrkCustom="1" href="javascript:void(0);">重庆</a></li>');d.push('<li>G<a id="p_20" isTrkCustom="1" href="javascript:void(0);">广东</a><a id="p_21" isTrkCustom="1" href="javascript:void(0);">广西</a><a isTrkCustom="1" id="p_23" href="javascript:void(0);">贵州</a><a id="p_27" isTrkCustom="1" href="javascript:void(0);">甘肃</a></li>');d.push('<li>F<a id="p_14" isTrkCustom="1" href="javascript:void(0);">福建</a></li>');d.push('<li>H<a id="p_4" isTrkCustom="1" href="javascript:void(0);">河北</a><a id="p_11" isTrkCustom="1" href="javascript:void(0);">黑龙江</a><a id="p_22" isTrkCustom="1" href="javascript:void(0);">海南</a><a id="p_18" isTrkCustom="1" href="javascript:void(0);">湖北</a><a id="p_19" isTrkCustom="1" href="javascript:void(0);">湖南</a><a id="p_17" isTrkCustom="1" href="javascript:void(0);">河南</a></li>');
d.push('<li>J<a id="p_5" isTrkCustom="1" href="javascript:void(0);">江苏</a><a id="p_10"  isTrkCustom="1" href="javascript:void(0);">吉林</a><a id="p_15" isTrkCustom="1" href="javascript:void(0);">江西</a></li>');d.push('<li>L<a id="p_9" isTrkCustom="1" href="javascript:void(0);">辽宁</a></li>');d.push('<li>N<a id="p_8" isTrkCustom="1" href="javascript:void(0);">内蒙古</a><a id="p_30" isTrkCustom="1" href="javascript:void(0);">宁夏</a></li>');d.push('<li>Q<a id="p_28" isTrkCustom="1" href="javascript:void(0);">青海</a></li>');d.push('<li>S<a id="p_1" isTrkCustom="1" href="javascript:void(0);">上海</a><a id="p_16" isTrkCustom="1" href="javascript:void(0);">山东</a><a id="p_32" isTrkCustom="1" href="javascript:void(0);">山西</a><a id="p_12" isTrkCustom="1" href="javascript:void(0);">四川</a><a id="p_26" isTrkCustom="1"  href="javascript:void(0);">陕西</a></li>');
d.push('<li>T<a id="p_3" isTrkCustom="1" href="javascript:void(0);">天津</a></li>');d.push('<li>X<a id="p_25" isTrkCustom="1" href="javascript:void(0);">西藏</a><a id="p_29" isTrkCustom="1" href="javascript:void(0);">新疆</a></li>');d.push('<li>Y<a id="p_24" isTrkCustom="1" href="javascript:void(0);">云南</a></li>');d.push('<li>Z<a id="p_6" isTrkCustom="1" href="javascript:void(0);">浙江</a></li>')};var _defaultProvinceData=[{key:"华北",value:[{id:2,name:"北京"},{id:3,name:"天津"},{id:4,name:"河北"},{id:32,name:"山西"},{id:8,name:"内蒙古"}]},{key:"华东",value:[{id:1,name:"上海"},{id:5,name:"江苏"},{id:6,name:"浙江"},{id:13,name:"安徽"},{id:14,name:"福建"},{id:16,name:"山东"}]},{key:"华南",value:[{id:20,name:"广东"},{id:21,name:"广西"},{id:22,name:"海南"}]},{key:"华中",value:[{id:15,name:"江西"},{id:17,name:"河南"},{id:18,name:"湖北"},{id:19,name:"湖南"}]},{key:"西南",value:[{id:7,name:"重庆"},{id:12,name:"四川"},{id:23,name:"贵州"},{id:24,name:"云南"},{id:25,name:"西藏"}]},{key:"西北",value:[{id:26,name:"陕西"},{id:27,name:"甘肃"},{id:28,name:"青海"},{id:30,name:"宁夏"},{id:29,name:"新疆"}]},{key:"东北",value:[{id:9,name:"辽宁"},{id:10,name:"吉林"},{id:11,name:"黑龙江"}]}];
YHDPROVINCE.buildProvinceHtml=function(){var l=[];l.push("<dl class='hd_hot_city clearfix' data-tpc='1'>");l.push("<dt>热门省市<i></i></dt>");var k=jQuery("#headerAllProvince").attr("data-hot");if(k){var m=k.split(",");for(var h=0;h<m.length;h++){var n=m[h].split(":");l.push('<dd><a data-value="'+n[0]+'" isTrkCustom="1" href="javascript:void(0);">'+n[1]+"</a></dd>")}}l.push("</dl>");l.push("<div class='hd_province_detail clearfix' data-tpc='2'>");for(var h=0;h<_defaultProvinceData.length;h++){var j=_defaultProvinceData[h].value;l.push("<dl class='clearfix'>");l.push("<dt>"+_defaultProvinceData[h].key+"：</dt>");for(var i=0;i<j.length;i++){l.push("<dd><a data-value='"+j[i].id+"'  href='javascript:;'>"+j[i].name+"</a></dd>")}l.push("</dl>")}l.push("</div>");return l.join("")};YHDPROVINCE.headerSelectProvince=function(){var d=$("#headerAllProvince"),e=$("#currProvince");
if($.trim(d.html()).length==0){YHDPROVINCE.yhdExistsProvinceInfo(d)}d.toggle();e.toggleClass("fold");$("#headerAllPvcClose").click(function(){f()});d.find("a").click(function(){f();e.text($(this).text());var a=$(this).attr("data-value");setAddressCity(a);return false});function f(){e.removeClass("fold");d.hide()}};YHDPROVINCE.yhdExistsProvinceInfo=function(c){var d=YHDPROVINCE.buildProvinceHtml();c.html(d)};YHDPROVINCE.yhdExistProvinceHoverEvent=function(){if(jQuery("#headerSelectProvince")[0]&&currSiteId==1){var b;jQuery("#headerSelectProvince").hover(function(){var a=loli.spm.getData(this);gotracker("2","hoverProvince",null,a);b=setTimeout(function(){showProvincesV2();jQuery("#currProvince").addClass("hd_fold");$("#headerSelectProvince").css("z-index","1211")},200)},function(){if(b){clearTimeout(b)
}var d=jQuery("#headerAllProvince"),a=jQuery("#currProvince");a.removeClass("fold");a.removeClass("hd_fold");d.hide();$("#headerSelectProvince").css("z-index","1201")})}};YHDPROVINCE.yhdNoExistsProvinceInfo=function(c){var d=[];d.push('<div class="province_box" id="provinceBox">');d.push('<div class="province_title">');d.push("<h4>欢迎来到1号店</h4>");d.push("<p>目前我们提供31个地区的配送服务,请根据您的收货地址选择站点。</p>");d.push("</div>");d.push('<div class="province_select">');d.push('<div class="province_input">');d.push('<div class="province_input_con">');d.push('<span id="selectProvince" class="notsure">请选择</span>');d.push('<ul id="allProvinceSelect" class="provinceList">');YHDPROVINCE.yhdCommonProvinceInfo(c,d);d.push("</ul>");d.push("送货至");d.push("</div>");d.push("您的商品将会：");d.push("</div>");d.push('<p><button id="startShopping" class="disabled">开始购物<span></span></button></p>');
d.push("</div>");d.push("</div>");yhdLib.popwin({fix:false,popcontentstr:d.join(""),fun:["globalChangeTop"]})};function globalChangeTop(){$(".popGeneral .notsure").click(function(){$(".popGeneral .provinceList").show();var i=$(window).height(),l=$(".popGeneral .province_box").height()+$(".popGeneral .provinceList").height()-115,k=i-l,g=$(".popGeneral").offset().top;if(g>k){if(l>i){$(".popGeneral").stop().animate({"margin-top":-i/2},300)}else{var j=parseInt($(".popGeneral").css("margin-top")),h=g-k;$(".popGeneral").stop().animate({"margin-top":j-h},300)}}})}YHDPROVINCE.chooseProvincePop=function(m){$.cookie("search_keyword_history","",{domain:".yhd.com",path:"/"});YHDPROVINCE.yhdNoExistsProvinceInfo(m);var r=m.ipProvinceId?m.ipProvinceId:"1";var l=m.ipProvinceIdStr?m.ipProvinceIdStr:"上海";var s=-1;
var q=false,k=$("#provinceboxDiv"),n=$("#selectProvince"),t=$("#allProvinceSelect"),p=$("#startShopping");function o(a,b){s=a;n.removeClass("notsure fold").html(b);$("#currProvince").html(b).show();t.hide();p.removeClass("disabled")}if(r&&l){q=true;o(r,l)}if(!q){n.addClass("notsure");p.addClass("disabled")}n.click(function(){var a=$(this);if(!a.hasClass("fold")){a.addClass("notsure fold");t.show();return false}});t.click(function(){return false});t.find("a").click(function(){q=true;o($(this).attr("id").split("_")[1],$(this).text())});$("#provinceBox").click(function(){if(n.hasClass("fold")){t.hide();n.removeClass("fold");if(q){n.removeClass("notsure")}}});p.click(function(){if($(this).hasClass("disabled")){return}k.hide();if(s!=-1){setAddressCity(s)}})};jQuery(document).ready(function(){if(isIndex!=1){initProvince()
}YHDPROVINCE.yhdExistProvinceHoverEvent()});