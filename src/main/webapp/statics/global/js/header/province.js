var YHDPROVINCE={};YHDPROVINCE.getCurentDomain=function(){return URLPrefix.central};YHDPROVINCE.getOppositeDomain=function(){return URLPrefix.central};YHDPROVINCE.proviceObj={p_1:"上海",p_2:"北京",p_3:"天津",p_4:"河北",p_5:"江苏",p_6:"浙江",p_7:"重庆",p_8:"内蒙古",p_9:"辽宁",p_10:"吉林",p_11:"黑龙江",p_12:"四川",p_13:"安徽",p_14:"福建",p_15:"江西",p_16:"山东",p_17:"河南",p_18:"湖北",p_19:"湖南",p_20:"广东",p_21:"广西",p_22:"海南",p_23:"贵州",p_24:"云南",p_25:"西藏",p_26:"陕西",p_27:"甘肃",p_28:"青海",p_29:"新疆",p_30:"宁夏",p_32:"山西"};YHDPROVINCE.swithAddressCity=function(c,d){provinceSwitchProvince(c,oldProvinceId,paramObj)};function setAddressCity(e,g){var h=jQuery.cookie("provinceId");var f={};if(g){f.targetUrl=g}jQuery.cookie("provinceId",e,{domain:no3wUrl,path:"/",expires:800});glaCookieHandler.genGlaCookie({provinceId:e});provinceSwitchProvince(e,h,f)
}function provinceSwitchProvince(d,f,e){moveCartItem(d,f,e)}function setAddressCityback(P){var O=null;if(P&&P.targetUrl){O=P.targetUrl;window.location.href=O;return}var Q=window.location.href;if(Q.indexOf("merchantID=")!=-1){Q=Q.substring(0,Q.indexOf("merchantID=")-1);window.location.href=Q;return}if(Q.indexOf("merchant=")!=-1){Q=Q.substring(0,Q.indexOf("merchant=")-1);window.location.href=Q;return}if(Q.indexOf("/tuangou/")!=-1){if(Q.indexOf("/tuangou/myGroupon.do")!=-1){window.location.href=Q}return}if(Q.indexOf("openProvincePage=")!=-1){Q=Q.substring(0,Q.indexOf("openProvincePage=")-1);window.location.href=Q;return}if(Q.indexOf("/cart/cart.do?action=view")!=-1){window.location.href="/cart/cart.do?action=view";return}var L=/^\S*product\/\d+_?\d+/;if(Q.match(L)){if(Q.indexOf("_")!=-1){Q=Q.substring(0,Q.indexOf("_"))
}else{if(Q.indexOf("#")!=-1){var J=Q.indexOf("#");Q=Q.substring(0,J)}}window.location.href=Q;return}var K=/^(http:\/\/){0,1}([^\/]+\/)[0-9]+\/([^\/]*)$/;if(Q.match(K)){Q=Q.replace(K,"$1$2$3");var H=jQuery.cookie("provinceId");var A=jQuery("#p_"+H);loli.spm.refreshPage(Q,A);return}var x=/^(http:\/\/){0,1}([^\/]+\/)([^\/]*)$/;if(Q.match(x)){var H=jQuery.cookie("provinceId");var A=jQuery("#p_"+H);loli.spm.refreshPage(Q,A);return}var B=/^(http:\/\/){0,1}[^\/]+\/channel\/[0-9]+_[0-9]+\/$/;if(Q.match(B)){Q=Q.substring(0,Q.lastIndexOf("_"));window.location.href=Q;return}var R=/^(http:\/\/){0,1}[^\/]+\/cms\/view.do\?topicId=[0-9]+&merchant=[0-9]+$/;if(Q.match(R)){Q=Q.substring(0,Q.lastIndexOf("&merchant"));var H=jQuery.cookie("provinceId");var A=jQuery("#p_"+H);loli.spm.refreshPage(Q,A);return}var C=/^(http:\/\/){0,1}[^\/]+\/brand\/[0-9]+\/{0,1}(\?[^\/]+)*$/;
if(Q.match(C)){window.location.href=Q;return}var N=/^(http:\/\/){0,1}[^\/]+\/try\/[0-9]+\/{0,1}(\?[^\/]+)*$/;if(Q.match(N)){if(Q.lastIndexOf("/")==Q.length-1){Q=Q.substring(0,Q.lastIndexOf("/"))}Q=Q.substring(0,Q.lastIndexOf("/"));window.location.href=Q;return}var F=/^(http:\/\/){0,1}[^\/]+\/try\/[0-9]+_[0-9]+\/{0,1}(\?[^\/]+)*$/;if(Q.match(F)){Q=Q.substring(0,Q.lastIndexOf("_"))+"_0/";window.location.href=Q;return}var d=/^(http:\/\/){0,1}[^\/]+\/S-theme\/[0-9]+\/{0,1}(\?[^\/]+)*$/;if(Q.match(d)){window.location.href=Q;return}var D=/^(http:\/\/){0,1}[^\/]+\/s2\/c([0-9]*)-([^?^\/]*)\/([0-9]*)\/$/;var G=/^(http:\/\/){0,1}[^\/]+\/c([0-9]*)-([^?^\/]*)\/([0-9]*)\/$/;if(Q.match(D)||Q.match(G)){if(Q.lastIndexOf("/")==Q.length-1){Q=Q.substring(0,Q.lastIndexOf("/"))}Q=Q.substring(0,Q.lastIndexOf("/")+1);
var H=jQuery.cookie("provinceId");var A=jQuery("#p_"+H);loli.spm.refreshPage(Q,A);return}var y=/^(http:\/\/){0,1}search.[^\/]+\/c([0-9]*)-([^?^\/]*)\/k([^?^\/]*)\/([0-9]*)\/$/;if(Q.match(y)){if(Q.lastIndexOf("/")==Q.length-1){Q=Q.substring(0,Q.lastIndexOf("/"))}Q=Q.substring(0,Q.lastIndexOf("/")+1);var H=jQuery.cookie("provinceId");var A=jQuery("#p_"+H);loli.spm.refreshPage(Q,A);return}var z=/^(http:\/\/){0,1}channel\.[^\/]+\/[^\/^_^\.]+(\/[^\/^\.]+){0,1}\/[0-9]+\/{0,1}(\?[^\/]+){0,1}(#[^\/]+)*$/;if(Q.match(z)){if(Q.indexOf("#")!=-1){Q=Q.substring(0,Q.indexOf("#"))}if(Q.indexOf("?")!=-1){var M=Q.substring(Q.indexOf("?"));var I=Q.substring(0,Q.indexOf("?"));if(Q.lastIndexOf("/")==Q.length-1){I=I.substring(0,I.lastIndexOf("/"));M="/"+M}I=I.substring(0,I.lastIndexOf("/"));Q=I+M}else{if(Q.lastIndexOf("/")==Q.length-1){Q=Q.substring(0,Q.lastIndexOf("/"))
}Q=Q.substring(0,Q.lastIndexOf("/"))}window.location.href=Q;return}if(Q.indexOf("confirmOrder")!=-1&&Q.indexOf("saveOrder")!=-1){window.location.href=YHDPROVINCE.getCurentDomain();return}var E=URLPrefix.search+"/s/";if(Q.substr(0,E.length)==E){var L=/-p\d{0,3}/;if(Q.match(L)){Q=Q.replace(L,"-p1");var H=jQuery.cookie("provinceId");var A=jQuery("#p_"+H);loli.spm.refreshPage(Q,A);return}}loli.spm.reloadPage(jQuery("#currProvince"))}function moveCartItem(k,o,p){var l=1;var i={};var n={};var j=[];if(typeof p!="undefined"&&p){if(typeof p.isSetAddress!="undefined"&&p.isSetAddress){if(p.isSetAddress==0){l=p.isSetAddress}}if(typeof p.callback!="undefined"&&p.callback){i=p.callback;if(typeof i.func!="undefined"&&i.func){n=i.func}if(typeof i.args!="undefined"&&i.func){j=i.args}}}var m=URLPrefix.cartDomain||"http://cart.yhd.com";
jQuery.getJSON(m+"/cart/opt/switchProvince.do?provinceId="+k+((o)?"&oldProvinceId="+o:"")+"&timestamp="+new Date().getTime()+"&callback=?",function(a){if(typeof l!="undefined"&&l!=0){setAddressCityback(p)}if(typeof n!="undefined"&&typeof n=="function"){n.apply(this,j)}})}function initProvince(){var g=jQuery.cookie("provinceId");if(g&&g>0){jQuery("#currProvince").text(YHDPROVINCE.proviceObj["p_"+g]).show();var e=jQuery("#weibo");if(g==2){e.attr("href","http://weibo.com/yihaodianbeijing")}else{if(g==20){e.attr("href","http://weibo.com/yihaodianguangzhou")}else{e.attr("href","http://weibo.com/yihaodian")}}if(!glaCookieHandler.check2ProvinceIsSame()){glaCookieHandler.genGlaCookie({provinceId:g})}}else{var h=(typeof hideGlobalCookieCheckMsgFlag!="undefined"&&hideGlobalCookieCheckMsgFlag=="1")?1:0;
if(h){return}var f=(typeof globalShowProWin!="undefined"&&globalShowProWin=="1")?1:0;if(f){return}if(jQuery("#p_1")[0]){showProvinces()}else{showProvincesV2()}}}function closeProvinces(d){if(d<=0){d=1}var c=jQuery("#currProvince").text();if(c==""){setAddressCity(d)}else{jQuery("#allProvinces").hide()}}function showProvinces(){var d=YHDPROVINCE.getCurentDomain();var c=d+"/header/selectProvincebox.do?timestamp="+new Date().getTime()+"&callback=?";jQuery.getJSON(c,function(a){if(a&&!a.ERROR&&a.value){jQuery("#provinceboxDiv").html(a.value);jQuery("#allProvinces").jqm({overlay:50,closeClass:"jqmClose",trigger:".jqModal",overlayClass:"pop_win_bg",modal:true,toTop:true}).jqmShow().jqmAddClose(".popwinClose")}jQuery.getJSON(d+"/header/cartIsEmpty.do?callback=?",function(f){if("no"==f.value){jQuery("#provincesPoptips").show()
}else{jQuery("#provincesPoptips").hide()}});if(jQuery("#allProvinces")){var b=jQuery("#allProvinces").find("#currentProvinceName");if(b){YHDPROVINCE.getProvinceName(b.attr("proviceId"))}}})}function showProvincesV2(){if(jQuery.cookie("provinceId")){YHDPROVINCE.headerSelectProvince();return}var d=YHDPROVINCE.getCurentDomain();var c=d+"/header/selectProvinceboxV2.do?timestamp="+new Date().getTime()+"&callback=?";jQuery.getJSON(c,function(a){if(a&&!a.ERROR){YHDPROVINCE.processProvince(a)}})}YHDPROVINCE.processProvince=function(b){if(!jQuery.cookie("provinceId")){YHDPROVINCE.chooseProvincePop(b)}};YHDPROVINCE.getProvinceName=function(b){jQuery("#currentProvinceName").html("<strong>"+jQuery("#p_"+b).text()+"站</strong> >>")};YHDPROVINCE.yhdCommonProvinceInfo=function(c,d){d.push('<li>A<a id="p_13" isTrkCustom="1" href="javascript:void(0);">安徽</a></li>');
d.push('<li>B<a id="p_2" isTrkCustom="1" href="javascript:void(0);">北京</a></li>');d.push('<li>C<a id="p_7" isTrkCustom="1" href="javascript:void(0);">重庆</a></li>');d.push('<li>G<a id="p_20" isTrkCustom="1" href="javascript:void(0);">广东</a><a id="p_21" isTrkCustom="1" href="javascript:void(0);">广西</a><a isTrkCustom="1" id="p_23" href="javascript:void(0);">贵州</a><a id="p_27" isTrkCustom="1" href="javascript:void(0);">甘肃</a></li>');d.push('<li>F<a id="p_14" isTrkCustom="1" href="javascript:void(0);">福建</a></li>');d.push('<li>H<a id="p_4" isTrkCustom="1" href="javascript:void(0);">河北</a><a id="p_11" isTrkCustom="1" href="javascript:void(0);">黑龙江</a><a id="p_22" isTrkCustom="1" href="javascript:void(0);">海南</a><a id="p_18" isTrkCustom="1" href="javascript:void(0);">湖北</a><a id="p_19" isTrkCustom="1" href="javascript:void(0);">湖南</a><a id="p_17" isTrkCustom="1" href="javascript:void(0);">河南</a></li>');
d.push('<li>J<a id="p_5" isTrkCustom="1" href="javascript:void(0);">江苏</a><a id="p_10"  isTrkCustom="1" href="javascript:void(0);">吉林</a><a id="p_15" isTrkCustom="1" href="javascript:void(0);">江西</a></li>');d.push('<li>L<a id="p_9" isTrkCustom="1" href="javascript:void(0);">辽宁</a></li>');d.push('<li>N<a id="p_8" isTrkCustom="1" href="javascript:void(0);">内蒙古</a><a id="p_30" isTrkCustom="1" href="javascript:void(0);">宁夏</a></li>');d.push('<li>Q<a id="p_28" isTrkCustom="1" href="javascript:void(0);">青海</a></li>');d.push('<li>S<a id="p_1" isTrkCustom="1" href="javascript:void(0);">上海</a><a id="p_16" isTrkCustom="1" href="javascript:void(0);">山东</a><a id="p_32" isTrkCustom="1" href="javascript:void(0);">山西</a><a id="p_12" isTrkCustom="1" href="javascript:void(0);">四川</a><a id="p_26" isTrkCustom="1"  href="javascript:void(0);">陕西</a></li>');
d.push('<li>T<a id="p_3" isTrkCustom="1" href="javascript:void(0);">天津</a></li>');d.push('<li>X<a id="p_25" isTrkCustom="1" href="javascript:void(0);">西藏</a><a id="p_29" isTrkCustom="1" href="javascript:void(0);">新疆</a></li>');d.push('<li>Y<a id="p_24" isTrkCustom="1" href="javascript:void(0);">云南</a></li>');d.push('<li>Z<a id="p_6" isTrkCustom="1" href="javascript:void(0);">浙江</a></li>')};YHDPROVINCE.headerSelectProvince=function(){var d=$("#headerAllProvince"),e=$("#currProvince");if($.trim(d.html()).length==0){YHDPROVINCE.yhdExistsProvinceInfo(d)}d.toggle();e.toggleClass("fold");$("#headerAllPvcClose").click(function(){f()});d.find("a").click(function(){f();e.text($(this).text());var a=$(this).attr("id").split("_")[1];setAddressCity(a);return false});function f(){e.removeClass("fold");d.hide()
}};YHDPROVINCE.yhdExistsProvinceInfo=function(c){var d=[];d.push('<li><h4><i id="headerAllPvcClose"></i>请根据您的收货地址选择</h4></li>');YHDPROVINCE.yhdCommonProvinceInfo(null,d);c.html(d.join(""))};YHDPROVINCE.yhdExistProvinceHoverEvent=function(){if(jQuery("#headerSelectProvince")[0]&&currSiteId==1){var b;jQuery("#headerSelectProvince").hover(function(){b=setTimeout(function(){showProvincesV2();jQuery("#currProvince").addClass("hd_fold");$("#headerSelectProvince").css("z-index","1211")},200)},function(){if(b){clearTimeout(b)}var d=jQuery("#headerAllProvince"),a=jQuery("#currProvince");a.removeClass("fold");a.removeClass("hd_fold");d.hide();$("#headerSelectProvince").css("z-index","1201")})}};YHDPROVINCE.yhdNoExistsProvinceInfo=function(c){var d=[];d.push('<div class="province_box" id="provinceBox">');
d.push('<div class="province_title">');d.push("<h4>欢迎来到1号店</h4>");d.push("<p>目前我们提供31个地区的配送服务,请根据您的收货地址选择站点。</p>");d.push("</div>");d.push('<div class="province_select">');d.push('<div class="province_input">');d.push('<div class="province_input_con">');d.push('<span id="selectProvince" class="notsure">请选择</span>');d.push('<ul id="allProvinceSelect" class="provinceList">');YHDPROVINCE.yhdCommonProvinceInfo(c,d);d.push("</ul>");d.push("送货至");d.push("</div>");d.push("您的商品将会：");d.push("</div>");d.push('<p><button id="startShopping" class="disabled">开始购物<span></span></button></p>');d.push("</div>");d.push("</div>");yhdLib.popwin({fix:true,popcontentstr:d.join(""),fun:["globalChangeTop"]})};function globalChangeTop(){$(".popGeneral .notsure").click(function(){$(".popGeneral .provinceList").show();
var i=$(window).height(),l=$(".popGeneral .province_box").height()+$(".popGeneral .provinceList").height()-115,k=i-l,g=$(".popGeneral").offset().top;if(g>k){if(l>i){$(".popGeneral").stop().animate({"margin-top":-i/2},300)}else{var j=parseInt($(".popGeneral").css("margin-top")),h=g-k;$(".popGeneral").stop().animate({"margin-top":j-h},300)}}})}YHDPROVINCE.chooseProvincePop=function(q){$.cookie("search_keyword_history","",{domain:".yhd.com",path:"/"});YHDPROVINCE.yhdNoExistsProvinceInfo(q);var l=q.ipProvinceId?q.ipProvinceId:"1";var p=q.ipProvinceIdStr?q.ipProvinceIdStr:"上海";var m=-1;var k=false,o=$("#provinceboxDiv"),r=$("#selectProvince"),n=$("#allProvinceSelect"),t=$("#startShopping");function s(a,b){m=a;r.removeClass("notsure fold").html(b);$("#currProvince").html(b).show();n.hide();t.removeClass("disabled")
}if(l&&p){k=true;s(l,p)}if(!k){r.addClass("notsure");t.addClass("disabled")}r.click(function(){var a=$(this);if(!a.hasClass("fold")){a.addClass("notsure fold");n.show();return false}});n.click(function(){return false});n.find("a").click(function(){k=true;s($(this).attr("id").split("_")[1],$(this).text())});$("#provinceBox").click(function(){if(r.hasClass("fold")){n.hide();r.removeClass("fold");if(k){r.removeClass("notsure")}}});t.click(function(){if($(this).hasClass("disabled")){return}o.hide();if(m!=-1){setAddressCity(m)}})};jQuery(document).ready(function(){if(isIndex!=1){initProvince()}YHDPROVINCE.yhdExistProvinceHoverEvent()});