(function(u){u.fn.jqm=function(a){var b={overlay:50,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:f,ajaxP:f,ajaxText:"",target:f,modal:f,toTop:f,onShow:f,onHide:f,onLoad:f};return this.each(function(){if(this._jqm){return i[this._jqm].c=u.extend({},i[this._jqm].c,a)}e++;this._jqm=e;i[e]={c:u.extend(b,u.jqm.params,a),a:f,w:u(this).addClass("jqmID"+e),s:e};if(b.trigger){u(this).jqmAddTrigger(b.trigger)}})};u.fn.jqmAddClose=function(a){return m(this,a,"jqmHide")};u.fn.jqmAddTrigger=function(a){return m(this,a,"jqmShow")};u.fn.jqmShow=function(a){return this.each(function(){a=a||window.event;u.jqm.open(this._jqm,a)})};u.fn.jqmHide=function(a){return this.each(function(){a=a||window.event;u.jqm.close(this._jqm,a)})};u.jqm={hash:{},open:function(h,j){var k=i[h],g=k.c,l="."+g.closeClass,d=(parseInt(k.w.css("z-index"))),d=(d>0)?d:3000,n=u("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":d-1,opacity:g.overlay/100});
if(k.a){return f}k.t=j;k.a=true;k.w.css("z-index",d);if(g.modal){if(!x[0]){q("bind")}x.push(h)}else{if(g.overlay>0){k.w.jqmAddClose(n)}else{n=f}}k.o=(n)?n.addClass(g.overlayClass).prependTo("body"):f;if(v){u("html,body").css({height:"100%",width:"100%"});if(n){n=n.css({position:"absolute"})[0];for(var c in {Top:1,Left:1}){n.style.setExpression(c.toLowerCase(),"(_=(document.documentElement.scroll"+c+" || document.body.scroll"+c+"))+'px'")}}}if(g.ajax){var a=g.target||k.w,b=g.ajax,a=(typeof a=="string")?u(a,k.w):u(a),b=(b.substr(0,1)=="@")?u(j).attr(b.substring(1)):b;a.html(g.ajaxText).load(b,g.ajaxP,function(){if(g.onLoad){g.onLoad.call(this,k)}if(l){k.w.jqmAddClose(u(l,k.w))}r(k)})}else{if(l){k.w.jqmAddClose(u(l,k.w))}}if(g.toTop&&k.o){k.w.before('<span id="jqmP'+k.w[0]._jqm+'"></span>').insertAfter(k.o)
}(g.onShow)?g.onShow(k):k.w.show();r(k);return f},close:function(a){var b=i[a];if(!b.a){return f}b.a=f;if(x[0]){x.pop();if(!x[0]){q("unbind")}}if(b.c.toTop&&b.o){u("#jqmP"+b.w[0]._jqm).after(b.w).remove()}if(b.c.onHide){b.c.onHide(b)}else{b.w.hide();if(b.o){b.o.remove()}}return f},params:{}};var e=0,i=u.jqm.hash,x=[],v=u.browser.msie&&(u.browser.version=="6.0"),f=false,t=u('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0}),r=function(a){if(v){if(a.o){a.o.html('<p style="width:100%;height:100%"/>').prepend(t)}else{if(!u("iframe.jqm",a.w)[0]){a.w.prepend(t)}}}s(a)},s=function(a){try{u(":input:visible",a.w)[0].focus()}catch(b){}},q=function(a){u()[a]("keypress",w)[a]("keydown",w)[a]("mousedown",w)},w=function(b){var a=i[x[x.length-1]],c=(!u(b.target).parents(".jqmID"+a.s)[0]);
if(c){s(a)}return !c},m=function(a,c,b){return a.each(function(){var d=this._jqm;u(c).each(function(){if(!this[b]){this[b]=[];u(this).click(function(){for(var h in {jqmShow:1,jqmHide:1}){for(var g in this[h]){if(i[this[h][g]]){i[this[h][g]].w[h](this)}}}return f})}this[b].push(d)})})}})(jQuery);