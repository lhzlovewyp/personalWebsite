(function(p){function u(){this.regional=[];this.regional[""]={labels:["Years","Months","Weeks","Days","Hours","Minutes","Seconds"],labels1:["Year","Month","Week","Day","Hour","Minute","Second"],compactLabels:["y","m","w","d"],whichLabels:null,timeSeparator:":",isRTL:false};this._defaults={until:null,since:null,timezone:null,serverSync:null,format:"dHMS",layout:"",compact:false,significant:0,description:"",expiryUrl:"",expiryText:"",alwaysExpire:false,onExpiry:null,onTick:null,tickInterval:1};p.extend(this._defaults,this.regional[""]);this._serverSyncs=[]}var m="countdown";var t=0;var o=1;var s=2;var v=3;var l=4;var n=5;var q=6;p.extend(u.prototype,{markerClassName:"hasCountdown",_timer:setInterval(function(){p.countdown._updateTargets()},980),_timerTargets:[],setDefaults:function(a){this._resetExtraLabels(this._defaults,a);
r(this._defaults,a||{})},UTCDate:function(e,a,c,i,h,f,d,g){if(typeof a=="object"&&a.constructor==Date){g=a.getMilliseconds();d=a.getSeconds();f=a.getMinutes();h=a.getHours();i=a.getDate();c=a.getMonth();a=a.getFullYear()}var b=new Date();b.setUTCFullYear(a);b.setUTCDate(1);b.setUTCMonth(c||0);b.setUTCDate(i||1);b.setUTCHours(h||0);b.setUTCMinutes((f||0)-(Math.abs(e)<30?e*60:e));b.setUTCSeconds(d||0);b.setUTCMilliseconds(g||0);return b},periodsToSeconds:function(a){return a[0]*31557600+a[1]*2629800+a[2]*604800+a[3]*86400+a[4]*3600+a[5]*60+a[6]},_settingsCountdown:function(c,b){if(!b){return p.countdown._defaults}var a=p.data(c,m);return(b=="all"?a.options:a.options[b])},_attachCountdown:function(c,a){var b=p(c);if(b.hasClass(this.markerClassName)){return}b.addClass(this.markerClassName);var d={options:p.extend({},a),_periods:[0,0,0,0,0,0,0]};
p.data(c,m,d);this._changeCountdown(c)},_addTarget:function(a){if(!this._hasTarget(a)){this._timerTargets.push(a)}},_hasTarget:function(a){return(p.inArray(a,this._timerTargets)>-1)},_removeTarget:function(a){this._timerTargets=p.map(this._timerTargets,function(b){return(b==a?null:b)})},_updateTargets:function(){for(var a=this._timerTargets.length-1;a>=0;a--){this._updateCountdown(this._timerTargets[a])}},_updateCountdown:function(a,c){var e=p(a);c=c||p.data(a,m);if(!c){return}e.html(this._generateHTML(c));e[(this._get(c,"isRTL")?"add":"remove")+"Class"]("countdown_rtl");var d=this._get(c,"onTick");if(d){var k=c._hold!="lap"?c._periods:this._calculatePeriods(c,c._show,this._get(c,"significant"),new Date());var g=this._get(c,"tickInterval");if(g==1||this.periodsToSeconds(k)%g==0){d.apply(a,[k])
}}var j=c._hold!="pause"&&(c._since?c._now.getTime()<c._since.getTime():c._now.getTime()>=c._until.getTime());if(j&&!c._expiring){c._expiring=true;if(this._hasTarget(a)||this._get(c,"alwaysExpire")){this._removeTarget(a);var f=this._get(c,"onExpiry");if(f){f.apply(a,[])}var h=this._get(c,"expiryText");if(h){var b=this._get(c,"layout");c.options.layout=h;this._updateCountdown(a,c);c.options.layout=b}var i=this._get(c,"expiryUrl");if(i){window.location=i}}c._expiring=false}else{if(c._hold=="pause"){this._removeTarget(a)}}p.data(a,m,c)},_changeCountdown:function(c,f,d){f=f||{};if(typeof f=="string"){var a=f;f={};f[a]=d}var e=p.data(c,m);if(e){this._resetExtraLabels(e.options,f);r(e.options,f);this._adjustSettings(c,e);p.data(c,m,e);var b=new Date();if((e._since&&e._since<b)||(e._until&&e._until>b)){this._addTarget(c)
}this._updateCountdown(c,e)}},_resetExtraLabels:function(d,b){var a=false;for(var c in b){if(c!="whichLabels"&&c.match(/[Ll]abels/)){a=true;break}}if(a){for(var c in d){if(c.match(/[Ll]abels[0-9]/)){d[c]=null}}}},_adjustSettings:function(a,c){var f;var i=this._get(c,"serverSync");var d=0;var h=null;for(var e=0;e<this._serverSyncs.length;e++){if(this._serverSyncs[e][0]==i){h=this._serverSyncs[e][1];break}}if(h!=null){d=(i?h:0);f=new Date()}else{var g=(i?i.apply(a,[]):null);f=new Date();d=(g?f.getTime()-g.getTime():0);this._serverSyncs.push([i,d])}var b=this._get(c,"timezone");b=(b==null?-f.getTimezoneOffset():b);c._since=this._get(c,"since");if(c._since!=null){c._since=this.UTCDate(b,this._determineTime(c._since,null));if(c._since&&d){c._since.setMilliseconds(c._since.getMilliseconds()+d)}}c._until=this.UTCDate(b,this._determineTime(this._get(c,"until"),f));
if(d){c._until.setMilliseconds(c._until.getMilliseconds()+d)}c._show=this._determineShow(c)},_destroyCountdown:function(a){var b=p(a);if(!b.hasClass(this.markerClassName)){return}this._removeTarget(a);b.removeClass(this.markerClassName).empty();p.removeData(a,m)},_pauseCountdown:function(a){this._hold(a,"pause")},_lapCountdown:function(a){this._hold(a,"lap")},_resumeCountdown:function(a){this._hold(a,null)},_hold:function(c,d){var a=p.data(c,m);if(a){if(a._hold=="pause"&&!d){a._periods=a._savePeriods;var b=(a._since?"-":"+");a[a._since?"_since":"_until"]=this._determineTime(b+a._periods[0]+"y"+b+a._periods[1]+"o"+b+a._periods[2]+"w"+b+a._periods[3]+"d"+b+a._periods[4]+"h"+b+a._periods[5]+"m"+b+a._periods[6]+"s");this._addTarget(c)}a._hold=d;a._savePeriods=(d=="pause"?a._periods:null);p.data(c,m,a);
this._updateCountdown(c,a)}},_getTimesCountdown:function(a){var b=p.data(a,m);return(!b?null:(!b._hold?b._periods:this._calculatePeriods(b,b._show,this._get(b,"significant"),new Date())))},_get:function(a,b){return(a.options[b]!=null?a.options[b]:p.countdown._defaults[b])},_determineTime:function(d,b){var e=function(f){var g=new Date();g.setTime(g.getTime()+f*1000);return g};var a=function(B){B=B.toLowerCase();var f=new Date();var i=f.getFullYear();var k=f.getMonth();var h=f.getDate();var C=f.getHours();var D=f.getMinutes();var g=f.getSeconds();var j=/([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g;var A=j.exec(B);while(A){switch(A[2]||"s"){case"s":g+=parseInt(A[1],10);break;case"m":D+=parseInt(A[1],10);break;case"h":C+=parseInt(A[1],10);break;case"d":h+=parseInt(A[1],10);break;case"w":h+=parseInt(A[1],10)*7;
break;case"o":k+=parseInt(A[1],10);h=Math.min(h,p.countdown._getDaysInMonth(i,k));break;case"y":i+=parseInt(A[1],10);h=Math.min(h,p.countdown._getDaysInMonth(i,k));break}A=j.exec(B)}return new Date(i,k,h,C,D,g,0)};var c=(d==null?b:(typeof d=="string"?a(d):(typeof d=="number"?e(d):d)));if(c){c.setMilliseconds(0)}return c},_getDaysInMonth:function(b,a){return 32-new Date(b,a,32).getDate()},_normalLabels:function(a){return a},_generateHTML:function(c){var e=this._get(c,"significant");c._periods=(c._hold?c._periods:this._calculatePeriods(c,c._show,e,new Date()));var C=false;var g=0;var d=e;var k=p.extend({},c._show);for(var D=t;D<=q;D++){C|=(c._show[D]=="?"&&c._periods[D]>0);k[D]=(c._show[D]=="?"&&!C?null:c._show[D]);g+=(k[D]?1:0);d-=(c._periods[D]>0?1:0)}var B=[false,false,false,false,false,false,false];
for(var D=q;D>=t;D--){if(c._show[D]){if(c._periods[D]){B[D]=true}else{B[D]=d>0;d--}}}var E=this._get(c,"compact");var a=this._get(c,"layout");var b=(E?this._get(c,"compactLabels"):this._get(c,"labels"));var h=this._get(c,"whichLabels")||this._normalLabels;var i=this._get(c,"timeSeparator");var j=this._get(c,"description")||"";var F=function(w){var x=p.countdown._get(c,"compactLabels"+h(c._periods[w]));return(k[w]?c._periods[w]+(x?x[w]:b[w])+" ":"")};var f=function(w){var x=p.countdown._get(c,"labels"+h(c._periods[w]));return((!e&&k[w])||(e&&B[w])?'<span class="countdown_section"><span class="countdown_amount">'+c._periods[w]+"</span><br/>"+(x?x[w]:b[w])+"</span>":"")};return(a?this._buildLayout(c,k,a,E,e,B):((E?'<span class="countdown_row countdown_amount'+(c._hold?" countdown_holding":"")+'">'+F(t)+F(o)+F(s)+F(v)+(k[l]?this._minDigits(c._periods[l],2):"")+(k[n]?(k[l]?i:"")+this._minDigits(c._periods[n],2):"")+(k[q]?(k[l]||k[n]?i:"")+this._minDigits(c._periods[q],2):""):'<span class="countdown_row countdown_show'+(e||g)+(c._hold?" countdown_holding":"")+'">'+f(t)+f(o)+f(s)+f(v)+f(l)+f(n)+f(q))+"</span>"+(j?'<span class="countdown_row countdown_descr">'+j+"</span>":"")))
},_buildLayout:function(b,j,D,B,i,k){var a=this._get(b,(B?"compactLabels":"labels"));var f=this._get(b,"whichLabels")||this._normalLabels;var g=function(w){return(p.countdown._get(b,(B?"compactLabels":"labels")+f(b._periods[w]))||a)[w]};var A=function(x,w){return Math.floor(x/w)%10};var e={desc:this._get(b,"description"),sep:this._get(b,"timeSeparator"),yl:g(t),yn:b._periods[t],ynn:this._minDigits(b._periods[t],2),ynnn:this._minDigits(b._periods[t],3),y1:A(b._periods[t],1),y10:A(b._periods[t],10),y100:A(b._periods[t],100),y1000:A(b._periods[t],1000),ol:g(o),on:b._periods[o],onn:this._minDigits(b._periods[o],2),onnn:this._minDigits(b._periods[o],3),o1:A(b._periods[o],1),o10:A(b._periods[o],10),o100:A(b._periods[o],100),o1000:A(b._periods[o],1000),wl:g(s),wn:b._periods[s],wnn:this._minDigits(b._periods[s],2),wnnn:this._minDigits(b._periods[s],3),w1:A(b._periods[s],1),w10:A(b._periods[s],10),w100:A(b._periods[s],100),w1000:A(b._periods[s],1000),dl:g(v),dn:b._periods[v],dnn:this._minDigits(b._periods[v],2),dnnn:this._minDigits(b._periods[v],3),d1:A(b._periods[v],1),d10:A(b._periods[v],10),d100:A(b._periods[v],100),d1000:A(b._periods[v],1000),hl:g(l),hn:b._periods[l],hnn:this._minDigits(b._periods[l],2),hnnn:this._minDigits(b._periods[l],3),h1:A(b._periods[l],1),h10:A(b._periods[l],10),h100:A(b._periods[l],100),h1000:A(b._periods[l],1000),ml:g(n),mn:b._periods[n],mnn:this._minDigits(b._periods[n],2),mnnn:this._minDigits(b._periods[n],3),m1:A(b._periods[n],1),m10:A(b._periods[n],10),m100:A(b._periods[n],100),m1000:A(b._periods[n],1000),sl:g(q),sn:b._periods[q],snn:this._minDigits(b._periods[q],2),snnn:this._minDigits(b._periods[q],3),s1:A(b._periods[q],1),s10:A(b._periods[q],10),s100:A(b._periods[q],100),s1000:A(b._periods[q],1000)};
var c=D;for(var d=t;d<=q;d++){var C="yowdhms".charAt(d);var h=new RegExp("\\{"+C+"<\\}(.*)\\{"+C+">\\}","g");c=c.replace(h,((!i&&j[d])||(i&&k[d])?"$1":""))}p.each(e,function(x,w){var y=new RegExp("\\{"+x+"\\}","g");c=c.replace(y,w)});return c},_minDigits:function(a,b){a=""+a;if(a.length>=b){return a}a="0000000000"+a;return a.substr(a.length-b)},_determineShow:function(a){var c=this._get(a,"format");var b=[];b[t]=(c.match("y")?"?":(c.match("Y")?"!":null));b[o]=(c.match("o")?"?":(c.match("O")?"!":null));b[s]=(c.match("w")?"?":(c.match("W")?"!":null));b[v]=(c.match("d")?"?":(c.match("D")?"!":null));b[l]=(c.match("h")?"?":(c.match("H")?"!":null));b[n]=(c.match("m")?"?":(c.match("M")?"!":null));b[q]=(c.match("s")?"?":(c.match("S")?"!":null));return b},_calculatePeriods:function(I,j,h,K){I._now=K;
I._now.setMilliseconds(0);var F=new Date(I._now.getTime());if(I._since){if(K.getTime()<I._since.getTime()){I._now=K=F}else{K=I._since}}else{F.setTime(I._until.getTime());if(K.getTime()>I._until.getTime()){I._now=K=F}}var L=[0,0,0,0,0,0,0];if(j[t]||j[o]){var c=p.countdown._getDaysInMonth(K.getFullYear(),K.getMonth());var b=p.countdown._getDaysInMonth(F.getFullYear(),F.getMonth());var k=(F.getDate()==K.getDate()||(F.getDate()>=Math.min(c,b)&&K.getDate()>=Math.min(c,b)));var E=function(w){return(w.getHours()*60+w.getMinutes())*60+w.getSeconds()};var g=Math.max(0,(F.getFullYear()-K.getFullYear())*12+F.getMonth()-K.getMonth()+((F.getDate()<K.getDate()&&!k)||(k&&E(F)<E(K))?-1:0));L[t]=(j[t]?Math.floor(g/12):0);L[o]=(j[o]?g-L[t]*12:0);K=new Date(K.getTime());var i=(K.getDate()==c);var H=p.countdown._getDaysInMonth(K.getFullYear()+L[t],K.getMonth()+L[o]);
if(K.getDate()>H){K.setDate(H)}K.setFullYear(K.getFullYear()+L[t]);K.setMonth(K.getMonth()+L[o]);if(i){K.setDate(H)}}var d=Math.floor((F.getTime()-K.getTime())/1000);var J=function(w,x){L[w]=(j[w]?Math.floor(d/x):0);d-=L[w]*x};J(s,604800);J(v,86400);J(l,3600);J(n,60);J(q,1);if(d>0&&!I._since){var f=[1,12,4.3482,7,24,60,60];var e=q;var a=1;for(var G=q;G>=t;G--){if(j[G]){if(L[e]>=a){L[e]=0;d=1}if(d>0){L[G]++;d=0;e=G;a=1}}a*=f[G]}}if(h){for(var G=t;G<=q;G++){if(h&&L[G]){h--}else{if(!h){L[G]=0}}}}return L}});function r(c,a){p.extend(c,a);for(var b in a){if(a[b]==null){c[b]=null}}return c}p.fn.countdown=function(a){var b=Array.prototype.slice.call(arguments,1);if(a=="getTimes"||a=="settings"){return p.countdown["_"+a+"Countdown"].apply(p.countdown,[this[0]].concat(b))}return this.each(function(){if(typeof a=="string"){p.countdown["_"+a+"Countdown"].apply(p.countdown,[this].concat(b))
}else{p.countdown._attachCountdown(this,a)}})};p.countdown=new u()})(jQuery);