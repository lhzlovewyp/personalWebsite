(function(b){b.fn.lazyload=function(a){var f={threshold:0,failurelimit:0,event:"scroll",effect:"show",container:window};if(a){b.extend(f,a)}var e=this;if("scroll"==f.event){b(f.container).bind("scroll",function(c){var h=0;e.each(function(){if(b.abovethetop(this,f)||b.leftofbegin(this,f)){}else{if(!b.belowthefold(this,f)&&!b.rightoffold(this,f)){b(this).trigger("appear")}else{if(h++>f.failurelimit){return false}}}});var d=b.grep(e,function(g){return !g.loaded});e=b(d)})}this.each(function(){var c=this;if(undefined==b(c).attr("original")){b(c).attr("original",b(c).attr("src"))}if("scroll"!=f.event||undefined==b(c).attr("src")||f.placeholder==b(c).attr("src")||(b.abovethetop(c,f)||b.leftofbegin(c,f)||b.belowthefold(c,f)||b.rightoffold(c,f))){if(f.placeholder){b(c).attr("src",f.placeholder)}else{b(c).removeAttr("src")
}c.loaded=false}else{c.loaded=true}b(c).one("appear",function(){if(!this.loaded){b("<img />").bind("load",function(){b(c).hide().attr("src",b(c).attr("original"))[f.effect](f.effectspeed);c.loaded=true}).attr("src",b(c).attr("original"))}});if("scroll"!=f.event){b(c).bind(f.event,function(d){if(!c.loaded){b(c).trigger("appear")}})}});b(f.container).trigger(f.event);return this};b.belowthefold=function(f,e){if(e.container===undefined||e.container===window){var a=b(window).height()+b(window).scrollTop()}else{var a=b(e.container).offset().top+b(e.container).height()}return a<=b(f).offset().top-e.threshold};b.rightoffold=function(f,e){if(e.container===undefined||e.container===window){var a=b(window).width()+b(window).scrollLeft()}else{var a=b(e.container).offset().left+b(e.container).width()}return a<=b(f).offset().left-e.threshold
};b.abovethetop=function(f,e){if(e.container===undefined||e.container===window){var a=b(window).scrollTop()}else{var a=b(e.container).offset().top}return a>=b(f).offset().top+e.threshold+b(f).height()};b.leftofbegin=function(f,e){if(e.container===undefined||e.container===window){var a=b(window).scrollLeft()}else{var a=b(e.container).offset().left}return a>=b(f).offset().left+e.threshold+b(f).width()};b.extend(b.expr[":"],{"below-the-fold":"$.belowthefold(a, {threshold : 0, container: window})","above-the-fold":"!$.belowthefold(a, {threshold : 0, container: window})","right-of-fold":"$.rightoffold(a, {threshold : 0, container: window})","left-of-fold":"!$.rightoffold(a, {threshold : 0, container: window})"})})(jQuery);