var YHDPROVINCE={};YHDPROVINCE.getCurentDomain=function(){return URLPrefix.central};YHDPROVINCE.getOppositeDomain=function(){return URLPrefix.central};YHDPROVINCE.proviceObj={p_1:"上海",p_2:"北京",p_3:"天津",p_4:"河北",p_5:"江苏",p_6:"浙江",p_7:"重庆",p_8:"内蒙古",p_9:"辽宁",p_10:"吉林",p_11:"黑龙江",p_12:"四川",p_13:"安徽",p_14:"福建",p_15:"江西",p_16:"山东",p_17:"河南",p_18:"湖北",p_19:"湖南",p_20:"广东",p_21:"广西",p_22:"海南",p_23:"贵州",p_24:"云南",p_25:"西藏",p_26:"陕西",p_27:"甘肃",p_28:"青海",p_29:"新疆",p_30:"宁夏",p_32:"山西"};YHDPROVINCE.swithAddressCity=function(b,a){provinceSwitchProvince(b,oldProvinceId,paramObj)};function setAddressCity(b,d){var c=jQuery.cookie("provinceId");var a={};if(d){a.targetUrl=d}jQuery.cookie("provinceId",b,{domain:no3wUrl,path:"/",expires:800});glaCookieHandler.genGlaCookie({provinceId:b});provinceSwitchProvince(b,c,a)
}function provinceSwitchProvince(c,a,b){moveCartItem(c,a,b)}function setAddressCityback(c){var e=null;if(c&&c.targetUrl){e=c.targetUrl;window.location.href=e;return}var b=window.location.href;if(b.indexOf("merchantID=")!=-1){b=b.substring(0,b.indexOf("merchantID=")-1);window.location.href=b;return}if(b.indexOf("merchant=")!=-1){b=b.substring(0,b.indexOf("merchant=")-1);window.location.href=b;return}if(b.indexOf("/tuangou/")!=-1){if(b.indexOf("/tuangou/myGroupon.do")!=-1){window.location.href=b}return}if(b.indexOf("openProvincePage=")!=-1){b=b.substring(0,b.indexOf("openProvincePage=")-1);window.location.href=b;return}if(b.indexOf("/cart/cart.do?action=view")!=-1){window.location.href="/cart/cart.do?action=view";return}var h=/^\S*product\/\d+_?\d+/;if(b.match(h)){if(b.indexOf("_")!=-1){b=b.substring(0,b.indexOf("_"))
}else{if(b.indexOf("#")!=-1){var u=b.indexOf("#");b=b.substring(0,u)}}window.location.href=b;return}var p=/^(http:\/\/){0,1}([^\/]+\/)[0-9]+\/([^\/]*)$/;if(b.match(p)){b=b.replace(p,"$1$2$3");var l=jQuery.cookie("provinceId");var t=jQuery("#p_"+l);loli.spm.refreshPage(b,t);return}var j=/^(http:\/\/){0,1}([^\/]+\/)([^\/]*)$/;if(b.match(j)){var l=jQuery.cookie("provinceId");var t=jQuery("#p_"+l);loli.spm.refreshPage(b,t);return}var r=/^(http:\/\/){0,1}[^\/]+\/channel\/[0-9]+_[0-9]+\/$/;if(b.match(r)){b=b.substring(0,b.lastIndexOf("_"));window.location.href=b;return}var a=/^(http:\/\/){0,1}[^\/]+\/cms\/view.do\?topicId=[0-9]+&merchant=[0-9]+$/;if(b.match(a)){b=b.substring(0,b.lastIndexOf("&merchant"));var l=jQuery.cookie("provinceId");var t=jQuery("#p_"+l);loli.spm.refreshPage(b,t);return}var o=/^(http:\/\/){0,1}[^\/]+\/brand\/[0-9]+\/{0,1}(\?[^\/]+)*$/;
if(b.match(o)){window.location.href=b;return}var f=/^(http:\/\/){0,1}[^\/]+\/try\/[0-9]+\/{0,1}(\?[^\/]+)*$/;if(b.match(f)){if(b.lastIndexOf("/")==b.length-1){b=b.substring(0,b.lastIndexOf("/"))}b=b.substring(0,b.lastIndexOf("/"));window.location.href=b;return}var k=/^(http:\/\/){0,1}[^\/]+\/try\/[0-9]+_[0-9]+\/{0,1}(\?[^\/]+)*$/;if(b.match(k)){b=b.substring(0,b.lastIndexOf("_"))+"_0/";window.location.href=b;return}var w=/^(http:\/\/){0,1}[^\/]+\/S-theme\/[0-9]+\/{0,1}(\?[^\/]+)*$/;if(b.match(w)){window.location.href=b;return}var q=/^(http:\/\/){0,1}[^\/]+\/s2\/c([0-9]*)-([^?^\/]*)\/([0-9]*)\/$/;var n=/^(http:\/\/){0,1}[^\/]+\/c([0-9]*)-([^?^\/]*)\/([0-9]*)\/$/;if(b.match(q)||b.match(n)){if(b.lastIndexOf("/")==b.length-1){b=b.substring(0,b.lastIndexOf("/"))}b=b.substring(0,b.lastIndexOf("/")+1);
var l=jQuery.cookie("provinceId");var t=jQuery("#p_"+l);loli.spm.refreshPage(b,t);return}var s=/^(http:\/\/){0,1}search.[^\/]+\/c([0-9]*)-([^?^\/]*)\/k([^?^\/]*)\/([0-9]*)\/$/;if(b.match(s)){if(b.lastIndexOf("/")==b.length-1){b=b.substring(0,b.lastIndexOf("/"))}b=b.substring(0,b.lastIndexOf("/")+1);var l=jQuery.cookie("provinceId");var t=jQuery("#p_"+l);loli.spm.refreshPage(b,t);return}var i=/^(http:\/\/){0,1}channel\.[^\/]+\/[^\/^_^\.]+(\/[^\/^\.]+){0,1}\/[0-9]+\/{0,1}(\?[^\/]+){0,1}(#[^\/]+)*$/;if(b.match(i)){if(b.indexOf("#")!=-1){b=b.substring(0,b.indexOf("#"))}if(b.indexOf("?")!=-1){var g=b.substring(b.indexOf("?"));var v=b.substring(0,b.indexOf("?"));if(b.lastIndexOf("/")==b.length-1){v=v.substring(0,v.lastIndexOf("/"));g="/"+g}v=v.substring(0,v.lastIndexOf("/"));b=v+g}else{if(b.lastIndexOf("/")==b.length-1){b=b.substring(0,b.lastIndexOf("/"))
}b=b.substring(0,b.lastIndexOf("/"))}window.location.href=b;return}if(b.indexOf("confirmOrder")!=-1&&b.indexOf("saveOrder")!=-1){window.location.href=YHDPROVINCE.getCurentDomain();return}var m=URLPrefix.search+"/s/";if(b.substr(0,m.length)==m){var h=/-p\d{0,3}/;if(b.match(h)){b=b.replace(h,"-p1");var l=jQuery.cookie("provinceId");var t=jQuery("#p_"+l);loli.spm.refreshPage(b,t);return}}loli.spm.reloadPage(jQuery("#currProvince"))}function moveCartItem(d,h,g){var c=1;var f={};var a={};var e=[];if(typeof g!="undefined"&&g){if(typeof g.isSetAddress!="undefined"&&g.isSetAddress){if(g.isSetAddress==0){c=g.isSetAddress}}if(typeof g.callback!="undefined"&&g.callback){f=g.callback;if(typeof f.func!="undefined"&&f.func){a=f.func}if(typeof f.args!="undefined"&&f.func){e=f.args}}}var b=URLPrefix.cartDomain||"http://cart.yhd.com";
jQuery.getJSON(b+"/cart/opt/switchProvince.do?provinceId="+d+((h)?"&oldProvinceId="+h:"")+"&timestamp="+new Date().getTime()+"&callback=?",function(i){if(typeof c!="undefined"&&c!=0){setAddressCityback(g)}if(typeof a!="undefined"&&typeof a=="function"){a.apply(this,e)}})}function initProvince(){var d=jQuery.cookie("provinceId");if(d&&d>0){jQuery("#currProvince").text(YHDPROVINCE.proviceObj["p_"+d]).show();var b=jQuery("#weibo");if(d==2){b.attr("href","http://weibo.com/yihaodianbeijing")}else{if(d==20){b.attr("href","http://weibo.com/yihaodianguangzhou")}else{b.attr("href","http://weibo.com/yihaodian")}}if(!glaCookieHandler.check2ProvinceIsSame()){glaCookieHandler.genGlaCookie({provinceId:d})}}else{var c=(typeof hideGlobalCookieCheckMsgFlag!="undefined"&&hideGlobalCookieCheckMsgFlag=="1")?1:0;
if(c){return}var a=(typeof globalShowProWin!="undefined"&&globalShowProWin=="1")?1:0;if(a){return}showProvincesV2()}}function showProvincesV2(){if(jQuery.cookie("provinceId")){YHDPROVINCE.headerSelectProvince();return}var a=YHDPROVINCE.getCurentDomain();var b=a+"/header/selectProvinceboxV2.do?timestamp="+new Date().getTime()+"&callback=?";jQuery.getJSON(b,function(c){if(c&&!c.ERROR){YHDPROVINCE.processProvince(c)}})}YHDPROVINCE.processProvince=function(a){if(!jQuery.cookie("provinceId")){YHDPROVINCE.chooseProvincePop(a)}};YHDPROVINCE.getProvinceName=function(a){jQuery("#currentProvinceName").html("<strong>"+jQuery("#p_"+a).text()+"站</strong> >>")};YHDPROVINCE.yhdCommonProvinceInfo=function(b,a){a.push('<li>A<a id="p_13" isTrkCustom="1" href="javascript:void(0);">安徽</a></li>');a.push('<li>B<a id="p_2" isTrkCustom="1" href="javascript:void(0);">北京</a></li>');
a.push('<li>C<a id="p_7" isTrkCustom="1" href="javascript:void(0);">重庆</a></li>');a.push('<li>G<a id="p_20" isTrkCustom="1" href="javascript:void(0);">广东</a><a id="p_21" isTrkCustom="1" href="javascript:void(0);">广西</a><a isTrkCustom="1" id="p_23" href="javascript:void(0);">贵州</a><a id="p_27" isTrkCustom="1" href="javascript:void(0);">甘肃</a></li>');a.push('<li>F<a id="p_14" isTrkCustom="1" href="javascript:void(0);">福建</a></li>');a.push('<li>H<a id="p_4" isTrkCustom="1" href="javascript:void(0);">河北</a><a id="p_11" isTrkCustom="1" href="javascript:void(0);">黑龙江</a><a id="p_22" isTrkCustom="1" href="javascript:void(0);">海南</a><a id="p_18" isTrkCustom="1" href="javascript:void(0);">湖北</a><a id="p_19" isTrkCustom="1" href="javascript:void(0);">湖南</a><a id="p_17" isTrkCustom="1" href="javascript:void(0);">河南</a></li>');
a.push('<li>J<a id="p_5" isTrkCustom="1" href="javascript:void(0);">江苏</a><a id="p_10"  isTrkCustom="1" href="javascript:void(0);">吉林</a><a id="p_15" isTrkCustom="1" href="javascript:void(0);">江西</a></li>');a.push('<li>L<a id="p_9" isTrkCustom="1" href="javascript:void(0);">辽宁</a></li>');a.push('<li>N<a id="p_8" isTrkCustom="1" href="javascript:void(0);">内蒙古</a><a id="p_30" isTrkCustom="1" href="javascript:void(0);">宁夏</a></li>');a.push('<li>Q<a id="p_28" isTrkCustom="1" href="javascript:void(0);">青海</a></li>');a.push('<li>S<a id="p_1" isTrkCustom="1" href="javascript:void(0);">上海</a><a id="p_16" isTrkCustom="1" href="javascript:void(0);">山东</a><a id="p_32" isTrkCustom="1" href="javascript:void(0);">山西</a><a id="p_12" isTrkCustom="1" href="javascript:void(0);">四川</a><a id="p_26" isTrkCustom="1"  href="javascript:void(0);">陕西</a></li>');
a.push('<li>T<a id="p_3" isTrkCustom="1" href="javascript:void(0);">天津</a></li>');a.push('<li>X<a id="p_25" isTrkCustom="1" href="javascript:void(0);">西藏</a><a id="p_29" isTrkCustom="1" href="javascript:void(0);">新疆</a></li>');a.push('<li>Y<a id="p_24" isTrkCustom="1" href="javascript:void(0);">云南</a></li>');a.push('<li>Z<a id="p_6" isTrkCustom="1" href="javascript:void(0);">浙江</a></li>')};var _defaultProvinceData=[{key:"华北",value:[{id:2,name:"北京"},{id:3,name:"天津"},{id:4,name:"河北"},{id:32,name:"山西"},{id:8,name:"内蒙古"}]},{key:"华东",value:[{id:1,name:"上海"},{id:5,name:"江苏"},{id:6,name:"浙江"},{id:13,name:"安徽"},{id:14,name:"福建"},{id:16,name:"山东"}]},{key:"华南",value:[{id:20,name:"广东"},{id:21,name:"广西"},{id:22,name:"海南"}]},{key:"华中",value:[{id:15,name:"江西"},{id:17,name:"河南"},{id:18,name:"湖北"},{id:19,name:"湖南"}]},{key:"西南",value:[{id:7,name:"重庆"},{id:12,name:"四川"},{id:23,name:"贵州"},{id:24,name:"云南"},{id:25,name:"西藏"}]},{key:"西北",value:[{id:26,name:"陕西"},{id:27,name:"甘肃"},{id:28,name:"青海"},{id:30,name:"宁夏"},{id:29,name:"新疆"}]},{key:"东北",value:[{id:9,name:"辽宁"},{id:10,name:"吉林"},{id:11,name:"黑龙江"}]}];
YHDPROVINCE.buildProvinceHtml=function(){var b=[];b.push("<dl class='hd_hot_city clearfix' data-tpc='1'>");b.push("<dt>热门省市<i></i></dt>");var c=jQuery("#headerAllProvince").attr("data-hot");if(c){var a=c.split(",");for(var f=0;f<a.length;f++){var g=a[f].split(":");b.push('<dd><a data-value="'+g[0]+'" isTrkCustom="1" href="javascript:void(0);">'+g[1]+"</a></dd>")}}b.push("</dl>");b.push("<div class='hd_province_detail clearfix' data-tpc='2'>");for(var f=0;f<_defaultProvinceData.length;f++){var d=_defaultProvinceData[f].value;b.push("<dl class='clearfix'>");b.push("<dt>"+_defaultProvinceData[f].key+"：</dt>");for(var e=0;e<d.length;e++){b.push("<dd><a data-value='"+d[e].id+"'  href='javascript:;'>"+d[e].name+"</a></dd>")}b.push("</dl>")}b.push("</div>");return b.join("")};YHDPROVINCE.headerSelectProvince=function(){var c=$("#headerAllProvince"),b=$("#currProvince");
if($.trim(c.html()).length==0){YHDPROVINCE.yhdExistsProvinceInfo(c)}c.toggle();b.toggleClass("fold");$("#headerAllPvcClose").click(function(){a()});c.find("a").click(function(){a();b.text($(this).text());var d=$(this).attr("data-value");setAddressCity(d);return false});function a(){b.removeClass("fold");c.hide()}};YHDPROVINCE.yhdExistsProvinceInfo=function(b){var a=YHDPROVINCE.buildProvinceHtml();b.html(a)};YHDPROVINCE.yhdExistProvinceHoverEvent=function(){if(jQuery("#headerSelectProvince")[0]&&currSiteId==1){var a;jQuery("#headerSelectProvince").hover(function(){var b=loli.spm.getData(this);gotracker("2","hoverProvince",null,b);a=setTimeout(function(){showProvincesV2();jQuery("#currProvince").addClass("hd_fold");$("#headerSelectProvince").css("z-index","1211")},200)},function(){if(a){clearTimeout(a)
}var c=jQuery("#headerAllProvince"),b=jQuery("#currProvince");b.removeClass("fold");b.removeClass("hd_fold");c.hide();$("#headerSelectProvince").css("z-index","1201")})}};YHDPROVINCE.yhdNoExistsProvinceInfo=function(b){var a=[];a.push('<div class="province_box" id="provinceBox">');a.push('<div class="province_title">');a.push("<h4>欢迎来到1号店</h4>");a.push("<p>目前我们提供31个地区的配送服务,请根据您的收货地址选择站点。</p>");a.push("</div>");a.push('<div class="province_select">');a.push('<div class="province_input">');a.push('<div class="province_input_con">');a.push('<span id="selectProvince" class="notsure">请选择</span>');a.push('<ul id="allProvinceSelect" class="provinceList">');YHDPROVINCE.yhdCommonProvinceInfo(b,a);a.push("</ul>");a.push("送货至");a.push("</div>");a.push("您的商品将会：");a.push("</div>");a.push('<p><button id="startShopping" class="disabled">开始购物<span></span></button></p>');
a.push("</div>");a.push("</div>");yhdLib.popwin({fix:false,popcontentstr:a.join(""),fun:["globalChangeTop"]})};function globalChangeTop(){$(".popGeneral .notsure").click(function(){$(".popGeneral .provinceList").show();var d=$(window).height(),a=$(".popGeneral .province_box").height()+$(".popGeneral .provinceList").height()-115,b=d-a,f=$(".popGeneral").offset().top;if(f>b){if(a>d){$(".popGeneral").stop().animate({"margin-top":-d/2},300)}else{var c=parseInt($(".popGeneral").css("margin-top")),e=f-b;$(".popGeneral").stop().animate({"margin-top":c-e},300)}}})}YHDPROVINCE.chooseProvincePop=function(f){$.cookie("search_keyword_history","",{domain:".yhd.com",path:"/"});YHDPROVINCE.yhdNoExistsProvinceInfo(f);var a=f.ipProvinceId?f.ipProvinceId:"1";var g=f.ipProvinceIdStr?f.ipProvinceIdStr:"上海";var j=-1;
var b=false,h=$("#provinceboxDiv"),e=$("#selectProvince"),i=$("#allProvinceSelect"),c=$("#startShopping");function d(l,k){j=l;e.removeClass("notsure fold").html(k);$("#currProvince").html(k).show();i.hide();c.removeClass("disabled")}if(a&&g){b=true;d(a,g)}if(!b){e.addClass("notsure");c.addClass("disabled")}e.click(function(){var k=$(this);if(!k.hasClass("fold")){k.addClass("notsure fold");i.show();return false}});i.click(function(){return false});i.find("a").click(function(){b=true;d($(this).attr("id").split("_")[1],$(this).text())});$("#provinceBox").click(function(){if(e.hasClass("fold")){i.hide();e.removeClass("fold");if(b){e.removeClass("notsure")}}});c.click(function(){if($(this).hasClass("disabled")){return}h.hide();if(j!=-1){setAddressCity(j)}})};jQuery(document).ready(function(){if(isIndex!=1){initProvince()
}YHDPROVINCE.yhdExistProvinceHoverEvent()});