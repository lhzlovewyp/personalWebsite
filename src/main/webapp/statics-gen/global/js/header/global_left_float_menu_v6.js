(function(c){var d=(function(){var o=300;var m=function(){};var n={rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,over:m,out:m,active:m,deactive:m,exit:m};var p=[],b=null,a=null;var k=false;var l=function(e,f){return(f.y-e.y)/(f.x-e.x)};return function(j){var g=c(this);var f=c.extend(n,j);var e=null;var i=function(){if(this==e){return}if(e){f.deactive.call(e)}f.active.call(this);e=this};var r=function(q){var t=h();if(t){a=setTimeout(function(){i.call(q)},t)}else{i.call(q)}};var h=function(){if(!e||!c(e).is(f.submenuSelector)){return 200}var M=g.offset(),E={x:M.left,y:M.top-f.tolerance},G={x:M.left+g.outerWidth(),y:E.y},q={x:M.left,y:M.top+g.outerHeight()+f.tolerance},L={x:M.left+g.outerWidth(),y:q.y},K=p[p.length-1],H=p[0];if(!K){return 0}if(!H){H=K}if(H.x<M.left||H.x>L.x||H.y<M.top||H.y>L.y){return 0
}if(b&&K.x==b.x&&K.y==b.y){return 0}var I=G,P=L;if(f.submenuDirection=="left"){I=q;P=E}else{if(f.submenuDirection=="below"){I=L;P=q}else{if(f.submenuDirection=="above"){I=E;P=G}}}var O=l(K,I),J=l(K,P),F=l(H,I),N=l(H,P);if(O<F&&J>N){b=K;return o}b=null;return 0};k===false&&c(document).bind("mousemove.initMenu",function(q){p.push({x:q.pageX,y:q.pageY});if(p.length>3){p.shift()}});g.bind("mouseleave.initMenu",function(){a&&clearTimeout(a);if(f.exit.call(this)===true){if(e){f.deactive.call(e)}e=null}}).find(f.rowSelector).bind("mouseenter.initMenu",function(){a&&clearTimeout(a);f.over.call(this);r(this)}).bind("mouseleave.initMenu",function(){f.out.call(this)}).bind("click.initMenu",function(){i.call(this)})}})();c.fn.yhdMenu=function(a){return this.each(function(){d.call(this,a)})}})(jQuery);(function(s){function w(a,i){var j=s(a);
if(j.size()==0){return}var z=j.data("flag");if(z==1){return}j.data("flag",1);var e=new Date().getTime();var f=j.find("div[categoryId]");var c=f.attr("categoryId");var g=f.attr("cindex");var k="GLOBALLEFTMENU_"+c;var b=jQuery.cookie("provinceId");var l=typeof(currProvinceId)!="undefined"?currProvinceId:(b?b:1);var d={categoryId:c,cindex:g,leftMenuProvinceId:l,isFixTopNav:isFixTopNav};var h=function(I){f.append(I.value);var F=j.find(".hd_show_sort");F.removeClass("global_loading");j.data("loaded",1);if(j.hasClass("cur")){F.show();if(typeof require!="undefined"&&require){var y=j.find("[data-recordTracker]");require(["base_observer"],function(A){A.fire("adContentTrackerEvent",y)});require(["base_observer"],function(A){j.attr("data-mrt",0);A.fire("impressionEvent",j)})}}var G=new Date().getTime();
loli.timing.sendTimerTracker("LMT_"+(G-e));var H=f.find("div.hd_sort_spot img");var J=typeof isWidescreen!="undefined"?isWidescreen:false;H.each(function(B,C){var A=s(C);A.attr("src",J?A.attr("wi"):A.attr("si"))});if(H.size()!=0&&(J)){if(typeof(loli)!="undefine"&&loli.cpm){loli.cpm.initAjaxReplaceAdvertise(f.find("textarea"))}j.removeClass("hd_no_pic")}};s.ajax({url:i,data:d,dataType:"jsonp",timeout:5000,jsonpCallback:k,cache:true,success:function(y){if(y){h(y)}}})}function n(){var a=(isIndex==1&&(typeof(indexFlag)!="undefined"&&typeof(indexFlag)=="number"&&indexFlag==1));if(!a&&typeof isMallIndex!="undefined"&&isMallIndex==1){a=1}var c=function(){var e=currDomain+"/header/ajaxGetGlobalLeftFloatMenuDataV12.do";if(typeof isMallIndex!="undefined"&&isMallIndex==1){e=currDomain+"/header/ajaxGetGlobalLeftFloatMenuDataV11.do"
}var g=s("#j_allsort");var f=g.children();g.yhdMenu({active:function(){var h=s(this);h.addClass("cur");w(h,e);var j=h.index();for(var k=j+1;k<j+4;k++){if(f[k]){w(f[k],e)}}for(var k=j-3;k<j;k++){if(f[k]){w(f[k],e)}}if(h.data("loaded")&&typeof require!="undefined"&&require){var i=h.find("[data-recordTracker]");require(["content_tracker_expo"],function(l){l.run("adContentTrackerEvent","ad.dolphin.bidding",i)});require(["base_observer"],function(l){h.attr("data-mrt",0);l.fire("impressionEvent",h)})}},deactive:function(){s(this).removeClass("cur")},exit:function(){return true}})};if(a){c();if(typeof isIndex!="undefined"&&isIndex==1&&typeof isFixTopNav!="undefined"&&isFixTopNav==true){var d=function(){var e;jQuery("#allSortOuterbox").hover(function(){if(e){clearTimeout(e)}e=setTimeout(function(){if(!s("#headerNav").hasClass("hd_nav_fixed")){return
}s("#allCategoryHeader").show();s("#allSortOuterbox").addClass("hover")},300)},function(){if(e){clearTimeout(e)}e=setTimeout(function(){if(!s("#headerNav").hasClass("hd_nav_fixed")){return}s("#allSortOuterbox li.cur").removeClass("cur").children(".hd_show_sort").hide();s("#allSortOuterbox").removeClass("hover");s("#allCategoryHeader").hide()},300)})};d()}return}var b=function(){var g=currDomain+"/header/ajaxGetGlobalRootMenuV6.do?callback=?";var e=function(h){if(h.value){s("#allCategoryHeader").data("loaded",1);s("#allCategoryHeader").removeClass("global_loading").html(h.value).show();s("#allSortOuterbox").addClass("hover");c()}};var f={currSiteId:(typeof currSiteId=="undefined")?1:currSiteId,currSiteType:1,version:1,provinceId:s.cookie("provinceId")||1};s.ajax({url:g,data:f,dataType:"jsonp",timeout:5000,jsonpCallback:"GLOBALROOTMENU",cache:true,success:function(h){if(h){e(h)
}}})};var d=function(){var e;jQuery("#allSortOuterbox").hover(function(){if(e){clearTimeout(e)}e=setTimeout(function(){s("#allCategoryHeader").show();s("#allSortOuterbox").addClass("hover");var f=s("#allCategoryHeader").data("loaded");if(!f){b()}},300)},function(){if(e){clearTimeout(e)}e=setTimeout(function(){jQuery("#allSortOuterbox li.cur").removeClass("cur").children(".hd_show_sort").hide();jQuery("#allSortOuterbox").removeClass("hover");jQuery("#allCategoryHeader").hide()},300)})};d()}function m(h){if(!s("#headerNav").hasClass("hd_nav_fixed")){var f=s("#allCategoryHeader").offset().top;var g=h.offset().top-f;var a=h.find(".hd_show_sort");var b=document.documentElement.scrollTop||document.body.scrollTop;var d=g+a.height()+f-b;var e=s(window).height()-30;var c=d-e;if(d>e){if(h.offset().top-b+h.height()-e>-10){g=h.position().top-a.height()+h.height()-2
}else{g=g-c-10}}if(a.height()>e){g=b-f}a.css({top:g})}else{h.find(".hd_show_sort").css({top:"0px"})}}function r(a){var b=window.loli||(window.loli={});var c=b.yhdStore;if(c){c.getFromRoot("category_history",function(h){if(h&&h.status==1){var i=h.value;var j=[];if(i){var z=i.split(",");for(var g=0;g<z.length;g++){var d=z[g];if(d){var f=d.split("~");var e=f[0];var k=decodeURIComponent(f[1]);var l=decodeURIComponent(f[2]);j.push({cateId:e,cateName:k,cateUrl:l})}}}if(typeof a=="function"){a(j)}}})}}function x(b){var c=[];if(b&&b.length>0){c.push("<div class='hd_sort_history clearfix'>历史记录");for(var a=b.length-1;a>=0;a--){c.push("<a href='"+b[a].cateUrl+"' target='_blank' data-ref='YHD_GLOBAL_CatMenu_History_"+b[a].cateId+"'>"+b[a].cateName+"</a>")}c.push("<a href='javascript:void(0);' tk='YHD_GLOBAL_CatMenu_DeleteHistory' class='hd_clear_history'>清除记录</a>");
c.push("</div>")}return c.join("")}function o(){s("#allCategoryHeader").delegate("div.hd_sort_list a","click",function(){var c=s(this);var a=c.text();var d=c.attr("href");var b=c.attr("categoryId");var e=window.loli||(window.loli={});var f=e.yhdStore;if(f){f.getFromRoot("category_history",function(E){if(E&&E.status==1){var F=E.value;var I=[];if(F){I=F.split(",");var i=false;var j=0;for(var l=0;l<I.length;l++){var J=I[l];if(J){var k=J.split("~");var g=k[0];var G=decodeURIComponent(k[1]);var H=decodeURIComponent(k[2]);if(b==g){i=true;j=l;break}}}if(!i){I.push(b+"~"+encodeURIComponent(a)+"~"+encodeURIComponent(d));if(I.length>10){I.shift()}}else{if(j!=I.length-1){var h=I.splice(j,1);I.push(h[0])}}}else{I.push(b+"~"+encodeURIComponent(a)+"~"+encodeURIComponent(d))}f.setFromRoot("category_history",I.join(","),q)
}})}});s("#allCategoryHeader").delegate("div.hd_sort_history a.hd_clear_history","click",function(){var a=s(this).tk;gotracker(2,a);v()})}function v(){var a=window.loli||(window.loli={});var b=a.yhdStore;if(b){b.setFromRoot("category_history","")}s("#allCategoryHeader div.hd_sort_history").remove()}function q(){var a=function(c){var b=x(c);if(b.length>0){s("#allCategoryHeader div.hd_sort_history").remove();s("#allCategoryHeader div.hd_sort_list_wrap").append(b)}};r(a)}function p(b){var a=function(d){var c=x(d);if(c.length>0){s("div.hd_sort_list_wrap",b).append(c)}};r(a)}function u(){var b=window.navigator.userAgent;var a=/(iPad|pad)/i;if(!a.test(b)){return}jQuery("#j_allsort li").delegate("a","click",function(){var d=jQuery(this);var e=d.closest("li");if(e.hasClass("cur")){return true}else{return false
}});var c=jQuery("#allSortOuterbox");if(c.hasClass("not_index")){c.delegate(".hd_all_sort_link a","click",function(){if(c.hasClass("hover")){jQuery("#allSortOuterbox li.cur").removeClass("cur").children(".hd_show_sort").hide();c.children(".hd_allsort_out_box").hide();c.removeClass("hover")}else{c.children(".hd_allsort_out_box").show();c.addClass("hover")}return false})}}function t(){var a;s("#allCategoryHeader,#mallCategoryHeader").delegate("div.hd_show_sort .hd_good_category","mouseenter",function(){var j=s(this);a=j.parents(".hd_show_sort");var h=a.width();var d=j.attr("data-info");var g=s(this).position().left+s(this).outerWidth();var e=s(this).position().top-10;s(".hd_good_category_hover span",a).text(d);var c=s(".hd_good_category_hover",a).width();var f=/msie ([\d\.]+)/.test(window.navigator.userAgent.toLowerCase())&&parseInt(/msie ([\d\.]+)/.exec(window.navigator.userAgent.toLowerCase())[1])<=6;
if(f){var i=286;if(c>i){s(".hd_good_category_hover",a).width(i);c=i}else{s(".hd_good_category_hover",a).width("auto")}}if(c>h-g){var b=h-g+s(this).outerWidth();s(".hd_good_category_hover",a).show().css({left:"auto",right:b,top:e});s(".hd_good_category_hover b",a).css({left:"auto",right:"-1px","background-position":"0 -410px"})}else{s(".hd_good_category_hover",a).show().css({left:g,right:"auto",top:e});s(".hd_good_category_hover b",a).css({left:"-1px",right:"auto","background-position":"0 -400px"})}});s("#allCategoryHeader,#mallCategoryHeader").delegate("div.hd_show_sort .hd_good_category","mouseleave",function(){s(".hd_good_category_hover",a).hide()})}s(document).ready(function(){n();u();t()})})(jQuery);