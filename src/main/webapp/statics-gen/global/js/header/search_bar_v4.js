(function(b){var j=(typeof isSearchKeyWords!="undefined"&&isSearchKeyWords=="1")?1:0;var d=(typeof isIndex!="undefined"&&isIndex==1)?1:0;var i=(typeof globalSearchSelectFlag!="undefined"&&globalSearchSelectFlag=="0")?0:1;var l=(typeof globalSearchHotkeywordsFlag!="undefined"&&globalSearchHotkeywordsFlag=="0")?0:1;var g=b("#keyword");var o=b("#searchSuggest");var n=b("#fix_keyword");var f=b("#fix_searchSuggest");var m=b("#leaf");var e=b("#hdSearchTab");var c=window.loli||(window.loli={});var h=c.app=c.app||{};var k=c.app.search=c.app.search||{};var a=URLPrefix.search_keyword||"http://search.yhd.com";k.delayCall=function(u,s,r,t){b(u).data("lastTime",new Date().getTime());if(s){var p=s.call(b(u));b(u).data("lastResult",p)}var q=setTimeout(function(){var x=b(u).data("lastTime")?b(u).data("lastTime"):new Date().getTime();
var w=(typeof b(u).data("lastResult")=="undefined"||b(u).data("lastResult"))?true:false;var v=new Date().getTime();if(v-x>=(t-50)){if(r&&w){r.call(b(u))}}},t)};k.filterXml=function(p){if(p!=null&&p!=""){p=p.replace(/\&/g,"");p=p.replace(/\</g,"");p=p.replace(/\>/g,"");p=p.replace(/\\/g,"");p=p.replace(/\'/g,"");p=p.replace(/\"/g,"")}return p};k.showHistory=function(q,t){if(!i){return}var w=m.size()>0?m.val():"0";var s=q.val();var r=q.attr("original");var u=c.yhdStore;var p=function(){var x=a+"/get_new_keywords.do?keyword=&leaf="+w+"&flag=v1&hotSearchFlag=new&localStorageFlag=new&callback=?";b.getJSON(x,function(A){if(A.ERROR){return}else{t.html(A.value);var z;if(u){u.getFromRoot("search_keyword_history",function(D){if(D&&D.status==1){var B=D.value;if(B){z=B.split(",")}var E="";if(typeof(z)!="undefined"&&z.length>0){E+='<dt><a id="hd_clear_history_record" href="javascript:void(0);" onclick="clearRecord(this);gotracker(\'2\',\'clear_record\',0);">清除</a>历史记录</dt>';
for(var F=z.length-1;F>=0;F--){var C=k.filterXml(decodeURIComponent(decodeURIComponent(z[F])));if(C!=null&&C.length>0){E+="<dd>";E+='<a roll="true" href="javascript:void(0);" onclick="searchMe(\''+C+"');addTrackPositionToCookie('1','search_history');\">"+C+"</a></dd>"}}}else{E="<dt>历史记录</dt>"}}else{E="<dt>历史记录</dt>"}t.find(".hd_s_history").html(E)})}else{var y="<dt>历史记录</dt>";t.find(".hd_s_history").html(y)}t.addClass("hd_search_history");if(typeof(z)=="undefined"||z.length==0){b("#hd_clear_history_record",t).hide()}v(q,t);t.show()}})};var v=function(y,x){x.delegate("#hd_clear_history_record","click",function(){u.setFromRoot("search_keyword_history","");b(this).hide();b(".hd_s_history dd",x).remove()})};if(s==""||b.trim(s)==""||b.trim(s)=="请输入关键词"||(b.trim(s)==r&&!j)){p()}};k.showSuggest=function(r,u){if(!i){return
}var p=m.size()>0?m.val():"0";var t=r.val();var s=r.attr("original");var q=function(){var w=a+"/get_new_keywords.do?keyword="+encodeURIComponent(encodeURIComponent(t))+"&leaf="+p+"&flag=v1&hotSearchFlag=new&newSmartBoxFlag=new&callback=?";b.getJSON(w,function(x){if(x.ERROR){return}else{u.html(x.value);u.removeClass("hd_search_history");v(r,u);u.show()}})};var v=function(x,y){var w=y.find("ul>li");y.data("suggestLength",w.length);y.data("curSuggestIndex",-1);w.mouseenter(function(){var z=w.index(this);if(b(this).hasClass("haslist")){b(this).addClass("select_haslist").siblings().removeClass("select_haslist select");y.children("ul").css("height","336px")}else{b(this).addClass("select").siblings().removeClass("select_haslist select");y.children("ul").css("height","")}y.data("curSuggestIndex",z)
});w.mouseleave(function(){b(this).removeClass("select select_haslist")});if(w.size()>0&&w.eq(0).hasClass("select_haslist")){y.children("ul").css("height","336px")}y.delegate("#choose_list dd","mouseover",function(){b(this).find("#s_cart_btn").show();return false});y.delegate("#choose_list dd","mouseout",function(){b(this).find("#s_cart_btn").hide();return false});b("a[id=s_cart_btn]").hide()};if((t!=""&&b.trim(t)!=""&&b.trim(t)!="请输入关键词"&&b.trim(t)!=s)||(b.trim(t)==s&&j)){q()}};k.registerGlobalEvent=function(){b("#site_header").find(".hd_search_wrap").bind("mouseleave",function(){o.hide()});b(document).bind("click",function(t){var s=t.target;if(s.id=="hd_clear_history_record"||s.className=="keywordInput"||s.className=="fl"){return}o.hide();f.hide()});var p=function(s,x,v){s=s||window.event;
var z=s.keyCode;var A=v.find("ul>li");var u=A.length;var t=(v.data("curSuggestIndex")!=null)?v.data("curSuggestIndex"):-1;v.data("suggestLength",u);if(u>0){if(z=="38"){if(t<=0){t=u-1}else{t=t-1}v.data("curSuggestIndex",t)}else{if(z=="40"){if(t>=(u-1)){t=0}else{t=t+1}v.data("curSuggestIndex",t)}}if(z=="38"||z=="40"){var w=A.eq(t);if(w.hasClass("haslist")){w.addClass("select_haslist").siblings().removeClass("select_haslist select");v.children("ul").css("height","336px")}else{w.addClass("select").siblings().removeClass("select_haslist select");v.children("ul").css("height","")}if(w.attr("id")){x.val(A.eq(0).children("a").text());if(w.attr("id")=="recom1"){b("#recommendId",v).val(b("#recom1Id",v).val());b("#recommendName",v).val(b("#recom1Name",v).val())}if(w.attr("id")=="recom2"){b("#recommendId",v).val(b("#recom2Id",v).val());
b("#recommendName",v).val(b("#recom2Name",v).val())}}else{x.val(w.children("a").text());b("#recommendId",v).val("");b("#recommendName",v).val("")}if(d){x.siblings("label").hide()}}if(z=="13"){var y=b("#hdSearchTab");if(y.size()>0&&y.attr("data-type")=="2"){searchMe(x.val(),"0","0",1);return}var w=A.eq(t);if(w.attr("id")){searchMe(x.val(),b("#recommendId",v).val(),b("#recommendName",v).val())}else{searchMe(x.val(),"0","0")}}}else{if(z=="13"){var y=b("#hdSearchTab");if(y.size()>0&&y.attr("data-type")=="2"){searchMe(x.val(),"0","0",1);return}searchMe(x.val(),"0","0")}}};var r=function(v,s,x){v=v||window.event;var w=v.keyCode;if(w=="116"||w=="16"||w=="17"||w=="18"||w=="38"||w=="40"||w=="13"){return}var u=s.val();var t=s.attr("original");if(u==""||b.trim(u)==""||b.trim(u)=="请输入关键词"||(b.trim(u)==t&&!j)){k.delayCall(s,null,function(){k.showHistory(s,x)
},200)}else{k.delayCall(s,null,function(){k.showSuggest(s,x)},200)}};var q=function(t,z,v){t=t||window.event;if(t){var u=document.createElement("input").webkitSpeech===undefined;if(!u){var s=t.pageX;var w=z.outerWidth();var y=z.offset().left;var A=y+w-25;var x=y+w;if(s>=A&&s<=x){return}}}r(t,z,v)};g.keydown(function(s){p(s,g,o)});g.keyup(function(s){r(s,g,o)});g.click(function(s){q(s,g,o)});if(typeof isIndex=="undefined"||isIndex!=1){n.keydown(function(s){p(s,n,f)});n.keyup(function(s){r(s,n,f)});n.click(function(s){q(s,n,f)})}e.mouseenter(function(){b(this).addClass("hd_serach_tab_hover")});e.mouseleave(function(){b(this).removeClass("hd_serach_tab_hover")});e.delegate("a","click",function(){var s=b(this).index();if(s!==0){b(this).prependTo(e);e.attr("data-type",b(this).attr("data-type"));
e.removeClass("hd_serach_tab_hover");if(e.attr("data-type")=="2"){e.next().attr("data-tpa","YHD_GLOBAl_HEADER_SEARCHSHOP").removeAttr("data-tc")}else{e.next().attr("data-tpa","YHD_GLOBAl_HEADER_SEARCH").removeAttr("data-tc")}}})};k.loadHotKeywords=function(){var s=g.val();var p=g.attr("original");if(b("#hotKeywordsShow").size()==0){return}if(!l){return}var r=function(z){var x=1;var v=1;var u=URLPrefix.search_keyword+"/recommend/headHotKeywordRecommend.do?threshold=10&mcSiteId="+x+"&siteType="+v;if((typeof(s)!="undefined"&&s!=""&&b.trim(s)!=p)||(b.trim(s)==p&&j)){u+="&keyword="+encodeURIComponent(encodeURIComponent(s))}var w=jQuery("#curCategoryIdToGlobal").val();if(typeof(w)!="undefined"){u+="&categoryId="+w}if(z){u+="&historyKeywords="+z}var A=false;var t=jQuery("#hotKeywordsShow").data("isLoaded");
if(t=="1"){return}jQuery("#hotKeywordsShow").data("isLoaded","1");var B=function(G){if(d==1){var C=b("#hotKeywordsShow").attr("data-specialHotword");var D=(typeof globalSpecialHotwordFlag!="undefined"&&globalSpecialHotwordFlag=="0")?0:1;if(D&&C){var F=b.parseJSON(C);if(F&&F.text&&F.linkUrl){var E="<a title='"+F.text+"' href='"+F.linkUrl+"' target='_blank' data-tc='"+(F.tc||"")+"' data-tce='"+(F.tce||"")+"'  data-ref='"+F.perTracker+"'>"+F.text+"</a>";G=E+G}}}return G};try{jQuery.ajax({url:u,dataType:"jsonp",jsonp:"callback",jsonpCallback:"keywordRecommendCallback",cache:true,timeout:3000,success:function(G){if(G&&G.headhotkeywords&&G.headhotkeywords.length>0){var I=G.headhotkeywords;var C=[];for(var E=0;E<I.length;E++){var D=I[E];var H=URLPrefix.search_keyword+"/c0-0/k"+encodeURIComponent(D)+"/"+jQuery.cookie("provinceId")+"/";
D='<a title="'+D+'" target="_blank" href="'+H+'" data-ref="shkw_'+encodeURIComponent(D)+'" data-tc="SEARCH.0.KEYWORD.shkw_'+encodeURIComponent(D)+"."+(E+1)+'">'+D+"</a>";C.push(D)}var F=B(C.join(" "));jQuery("#hotKeywordsShow > a").remove();jQuery("#hotKeywordsShow").append(F);jQuery("#hotKeywordsShow").data("searchKeyLoaded","1")}}})}catch(y){}};var q=c.yhdStore;if(q){q.getFromRoot("search_keyword_history",function(t){if(t&&t.status==1){r(t.value)}else{r("")}})}else{r("")}};k.changeTab=function(r){if(typeof r=="undefined"||isNaN(r)||q==r||(r!="1"&&r!="2")){return}var q=e.attr("data-type");var p=e.find("a[data-type='"+r+"']");p.prependTo(e);e.attr("data-type",p.attr("data-type"));e.removeClass("hd_serach_tab_hover");if(e.attr("data-type")=="2"){e.next().attr("data-tpa","YHD_GLOBAl_HEADER_SEARCHSHOP").removeAttr("data-tc")
}else{e.next().attr("data-tpa","YHD_GLOBAl_HEADER_SEARCH").removeAttr("data-tc")}};b(document).ready(function(){k.registerGlobalEvent();k.loadHotKeywords()})})(jQuery);function findNames(){}function _goSearch(){}function goSearch(){}function findNamesByDiv(){}function _goSearchByDiv(){}function goSearchByDiv(){}function loadComplete_findNames(){}function searchListHover(){}function clearRecord(){}function roll(){}function hotKeywords_onDocumentReady(){}function reloadKeyWordsData(){}function addKeywordHistory(){}function selectSearchCategory(){}function readAdv_hotKeywords_onDocumentReady(){}function indexReadAdv_hotKeywords_onDocumentReady(){}function getHotkeywordHtml(){}function searchKeywords_onDocumentReady(){}function searchFocus(){}function searchRecommend(a){if(a!=null&&a!=""){window.location=a
}}function cutString(a,b){if(a==null||a.length<=b){return a}return a.substring(0,b)}function emptySearchBar(d){if(!d){d="#keyword"}var e=jQuery(d);var a=e.parent("div").find("label");var b=e.attr("original");var c=e.val();if(e.val()!=""&&a.size()>0){a.hide();e.trigger("click");return}if(c.indexOf(b)==0){e.val(c.substring(b.length));e.css("color","#333333")}if(e.val()!=""){e.trigger("click")}}function searchMe(c,b,o,l){var i=null;var k=document.getElementById("recommendId");if(k){i=k.value}var d=null;var j=document.getElementById("recommendName");if(j){d=j.value}var h=jQuery("#keyword");if(!c){c=h.val()}else{if(c instanceof jQuery){h=c;c=h.val()}}if(c!=null&&c!=""){var m=h.attr("original");if(m!=null&&m!=""&&m!="请输入关键词"){if(m==c){var g=h.attr("url");if(g!=null&&g!=""){loli.spm.refreshPage(g,h);
return}}}}else{if((isIndex==1&&(typeof(indexFlag)!="undefined"&&typeof(indexFlag)=="number"&&indexFlag==1))){var a=h.parent("div").find("label");if(a.size()>0&&(a.css("display")=="block"||a.css("display")=="inline")){var g=h.attr("url");if(g!=null&&g!=""){loli.spm.refreshPage(g,h);return}}}}if(!c||c=="请输入关键词"){return}c=c.replace(/\//gi," ");var f="0";if(jQuery("#leaf").size()>0){f=jQuery("#leaf").val()}if(l){var n=URLPrefix.search_keyword+"/c0-0-0/b/a-s1-v2-p1-price-d0-f0b-m1-rt0-pid-mid0-k"+encodeURIComponent(encodeURIComponent(c))+"/";loli.spm.refreshPage(n,h);return}var e=jQuery.cookie("provinceId");if(b!=null&&b!="0"){var n=URLPrefix.search_keyword+"/c"+b+"-"+o+"/k"+encodeURIComponent(encodeURIComponent(c))+"/"+e+"/";loli.spm.refreshPage(n,h)}else{if(i!=null&&i!=""){var n=URLPrefix.search_keyword+"/c"+i+"-"+d+"/k"+encodeURIComponent(encodeURIComponent(c))+"/"+e+"/";
loli.spm.refreshPage(n,h)}else{var n=URLPrefix.search_keyword+"/c"+f+"-0/k"+encodeURIComponent(encodeURIComponent(c))+"/"+e+"/";loli.spm.refreshPage(n,h)}}}function searchMeForBrand(){var a=jQuery("#keyword");var b=a.val();if(b==""||b=="商品、品牌"){return}searchMe()}function searchMeForClick(){var a=$("#hdSearchTab");if(a.size()>0&&a.attr("data-type")=="2"){searchMe(null,null,null,1);return}searchMe()}function searchInputFocus(d){var c=jQuery("#keyword");if(d){c=jQuery(d)}if(c.size()==0){return}var b=c.attr("original");var a=c.val();var e=(typeof isSearchKeyWords!="undefined"&&isSearchKeyWords=="1")?1:0;if(a==null||a==""){if(b==null||b==""){b="请输入关键词";c.attr("original",b)}c.val(b);a=b}if(!e){c.css("color","#999999");c.bind("focus",function(){if(this.value==b){this.value="";this.style.color="#333333"
}}).bind("blur",function(){if(this.value==""){this.value=b;this.style.color="#999999"}})}else{c.css("color","#333333");c.bind("blur",function(){if(this.value==""){this.value=b}})}}function indexSearchInputFocus(){var b=jQuery("#keyword").attr("original");var c=jQuery("#keyword").val();var a=jQuery("#keyword").parent("div").find("label");if(a.size()==0){return}if(c==b||c==""){a.css({display:"block"});jQuery("#keyword").css("color","#333333")}jQuery("#keyword").bind("focus",function(){a.css({color:"#CCCCCC"});if(this.value==b){this.style.color="#CCCCCC"}else{this.style.color="#333333"}}).bind("blur",function(){if(this.value==""||this.value==b||this.value=="请输入关键词"){a.css({color:"#666666",display:"block"});jQuery("#keyword").val("")}}).bind("keydown",function(){if(this.value==""||this.value==b){a.hide()
}})}jQuery(document).ready(function(){if(typeof isIndex!="undefined"&&isIndex==1){indexSearchInputFocus();if(typeof isFixTopNav!="undefined"&&isFixTopNav==true){searchInputFocus("#fix_keyword")}}else{searchInputFocus();if(typeof isFixTopNav!="undefined"&&isFixTopNav==true){searchInputFocus("#fix_keyword");if(typeof headerType!="undefined"&&headerType=="search"){$("#fix_keyword").bind("focus",function(){$(this).removeClass("hd_ipt_corner").addClass("focus_ipt")});$("#fix_keyword").bind("blur",function(){$(this).addClass("hd_ipt_corner").removeClass("focus_ipt")})}}}});