var YHDPROVINCE={};YHDPROVINCE.getCurentDomain=function(){return URLPrefix.central};YHDPROVINCE.getOppositeDomain=function(){return URLPrefix.central};YHDPROVINCE.proviceObj={p_1:"上海",p_2:"北京",p_3:"天津",p_4:"河北",p_5:"江苏",p_6:"浙江",p_7:"重庆",p_8:"内蒙古",p_9:"辽宁",p_10:"吉林",p_11:"黑龙江",p_12:"四川",p_13:"安徽",p_14:"福建",p_15:"江西",p_16:"山东",p_17:"河南",p_18:"湖北",p_19:"湖南",p_20:"广东",p_21:"广西",p_22:"海南",p_23:"贵州",p_24:"云南",p_25:"西藏",p_26:"陕西",p_27:"甘肃",p_28:"青海",p_29:"新疆",p_30:"宁夏",p_32:"山西"};YHDPROVINCE.swithAddressCity=function(b,a){provinceSwitchProvince(b,oldProvinceId,paramObj)};function setAddressCity(d,b){var a=jQuery.cookie("provinceId");var c={};if(b){c.targetUrl=b}jQuery.cookie("provinceId",d,{domain:no3wUrl,path:"/",expires:800});glaCookieHandler.genGlaCookie({provinceId:d});provinceSwitchProvince(d,a,c)
}function provinceSwitchProvince(c,a,b){moveCartItem(c,a,b)}function setAddressCityback(c){var e=null;if(c&&c.targetUrl){e=c.targetUrl;window.location.href=e;return}var b=window.location.href;if(b.indexOf("merchantID=")!=-1){b=b.substring(0,b.indexOf("merchantID=")-1);window.location.href=b;return}if(b.indexOf("merchant=")!=-1){b=b.substring(0,b.indexOf("merchant=")-1);window.location.href=b;return}if(b.indexOf("/tuangou/")!=-1){if(b.indexOf("/tuangou/myGroupon.do")!=-1){window.location.href=b}return}if(b.indexOf("openProvincePage=")!=-1){b=b.substring(0,b.indexOf("openProvincePage=")-1);window.location.href=b;return}if(b.indexOf("/cart/cart.do?action=view")!=-1){window.location.href="/cart/cart.do?action=view";return}var h=/^\S*product\/\d+_?\d+/;if(b.match(h)){if(b.indexOf("_")!=-1){b=b.substring(0,b.indexOf("_"))
}else{if(b.indexOf("#")!=-1){var l=b.indexOf("#");b=b.substring(0,l)}}window.location.href=b;return}var j=/^(http:\/\/){0,1}([^\/]+\/)[0-9]+\/([^\/]*)$/;if(b.match(j)){b=b.replace(j,"$1$2$3");var o=jQuery.cookie("provinceId");var v=jQuery("#p_"+o);loli.spm.refreshPage(b,v);return}var n=/^(http:\/\/){0,1}([^\/]+\/)([^\/]*)$/;if(b.match(n)){var o=jQuery.cookie("provinceId");var v=jQuery("#p_"+o);loli.spm.refreshPage(b,v);return}var u=/^(http:\/\/){0,1}[^\/]+\/channel\/[0-9]+_[0-9]+\/$/;if(b.match(u)){b=b.substring(0,b.lastIndexOf("_"));window.location.href=b;return}var a=/^(http:\/\/){0,1}[^\/]+\/cms\/view.do\?topicId=[0-9]+&merchant=[0-9]+$/;if(b.match(a)){b=b.substring(0,b.lastIndexOf("&merchant"));var o=jQuery.cookie("provinceId");var v=jQuery("#p_"+o);loli.spm.refreshPage(b,v);return}var t=/^(http:\/\/){0,1}[^\/]+\/brand\/[0-9]+\/{0,1}(\?[^\/]+)*$/;
if(b.match(t)){window.location.href=b;return}var f=/^(http:\/\/){0,1}[^\/]+\/try\/[0-9]+\/{0,1}(\?[^\/]+)*$/;if(b.match(f)){if(b.lastIndexOf("/")==b.length-1){b=b.substring(0,b.lastIndexOf("/"))}b=b.substring(0,b.lastIndexOf("/"));window.location.href=b;return}var q=/^(http:\/\/){0,1}[^\/]+\/try\/[0-9]+_[0-9]+\/{0,1}(\?[^\/]+)*$/;if(b.match(q)){b=b.substring(0,b.lastIndexOf("_"))+"_0/";window.location.href=b;return}var w=/^(http:\/\/){0,1}[^\/]+\/S-theme\/[0-9]+\/{0,1}(\?[^\/]+)*$/;if(b.match(w)){window.location.href=b;return}var s=/^(http:\/\/){0,1}[^\/]+\/s2\/c([0-9]*)-([^?^\/]*)\/([0-9]*)\/$/;var p=/^(http:\/\/){0,1}[^\/]+\/c([0-9]*)-([^?^\/]*)\/([0-9]*)\/$/;if(b.match(s)||b.match(p)){if(b.lastIndexOf("/")==b.length-1){b=b.substring(0,b.lastIndexOf("/"))}b=b.substring(0,b.lastIndexOf("/")+1);
var o=jQuery.cookie("provinceId");var v=jQuery("#p_"+o);loli.spm.refreshPage(b,v);return}var k=/^(http:\/\/){0,1}search.[^\/]+\/c([0-9]*)-([^?^\/]*)\/k([^?^\/]*)\/([0-9]*)\/$/;if(b.match(k)){if(b.lastIndexOf("/")==b.length-1){b=b.substring(0,b.lastIndexOf("/"))}b=b.substring(0,b.lastIndexOf("/")+1);var o=jQuery.cookie("provinceId");var v=jQuery("#p_"+o);loli.spm.refreshPage(b,v);return}var i=/^(http:\/\/){0,1}channel\.[^\/]+\/[^\/^_^\.]+(\/[^\/^\.]+){0,1}\/[0-9]+\/{0,1}(\?[^\/]+){0,1}(#[^\/]+)*$/;if(b.match(i)){if(b.indexOf("#")!=-1){b=b.substring(0,b.indexOf("#"))}if(b.indexOf("?")!=-1){var g=b.substring(b.indexOf("?"));var m=b.substring(0,b.indexOf("?"));if(b.lastIndexOf("/")==b.length-1){m=m.substring(0,m.lastIndexOf("/"));g="/"+g}m=m.substring(0,m.lastIndexOf("/"));b=m+g}else{if(b.lastIndexOf("/")==b.length-1){b=b.substring(0,b.lastIndexOf("/"))
}b=b.substring(0,b.lastIndexOf("/"))}window.location.href=b;return}if(b.indexOf("confirmOrder")!=-1&&b.indexOf("saveOrder")!=-1){window.location.href=YHDPROVINCE.getCurentDomain();return}var r=URLPrefix.search+"/s/";if(b.substr(0,r.length)==r){var h=/-p\d{0,3}/;if(b.match(h)){b=b.replace(h,"-p1");var o=jQuery.cookie("provinceId");var v=jQuery("#p_"+o);loli.spm.refreshPage(b,v);return}}loli.spm.reloadPage(jQuery("#currProvince"))}function moveCartItem(c,g,f){var b=1;var e={};var h={};var d=[];if(typeof f!="undefined"&&f){if(typeof f.isSetAddress!="undefined"&&f.isSetAddress){if(f.isSetAddress==0){b=f.isSetAddress}}if(typeof f.callback!="undefined"&&f.callback){e=f.callback;if(typeof e.func!="undefined"&&e.func){h=e.func}if(typeof e.args!="undefined"&&e.func){d=e.args}}}var a=URLPrefix.cartDomain||"http://cart.yhd.com";
jQuery.getJSON(a+"/cart/opt/switchProvince.do?provinceId="+c+((g)?"&oldProvinceId="+g:"")+"&timestamp="+new Date().getTime()+"&callback=?",function(i){if(typeof b!="undefined"&&b!=0){setAddressCityback(f)}if(typeof h!="undefined"&&typeof h=="function"){h.apply(this,d)}})}function initProvince(){var b=jQuery.cookie("provinceId");if(b&&b>0){jQuery("#currProvince").text(YHDPROVINCE.proviceObj["p_"+b]).show();var d=jQuery("#weibo");if(b==2){d.attr("href","http://weibo.com/yihaodianbeijing")}else{if(b==20){d.attr("href","http://weibo.com/yihaodianguangzhou")}else{d.attr("href","http://weibo.com/yihaodian")}}if(!glaCookieHandler.check2ProvinceIsSame()){glaCookieHandler.genGlaCookie({provinceId:b})}}else{var a=(typeof hideGlobalCookieCheckMsgFlag!="undefined"&&hideGlobalCookieCheckMsgFlag=="1")?1:0;
if(a){return}var c=(typeof globalShowProWin!="undefined"&&globalShowProWin=="1")?1:0;if(c){return}if(jQuery("#p_1")[0]){showProvinces()}else{showProvincesV2()}}}function closeProvinces(a){if(a<=0){a=1}var b=jQuery("#currProvince").text();if(b==""){setAddressCity(a)}else{jQuery("#allProvinces").hide()}}function showProvinces(){var a=YHDPROVINCE.getCurentDomain();var b=a+"/header/selectProvincebox.do?timestamp="+new Date().getTime()+"&callback=?";jQuery.getJSON(b,function(d){if(d&&!d.ERROR&&d.value){jQuery("#provinceboxDiv").html(d.value);jQuery("#allProvinces").jqm({overlay:50,closeClass:"jqmClose",trigger:".jqModal",overlayClass:"pop_win_bg",modal:true,toTop:true}).jqmShow().jqmAddClose(".popwinClose")}jQuery.getJSON(a+"/header/cartIsEmpty.do?callback=?",function(e){if("no"==e.value){jQuery("#provincesPoptips").show()
}else{jQuery("#provincesPoptips").hide()}});if(jQuery("#allProvinces")){var c=jQuery("#allProvinces").find("#currentProvinceName");if(c){YHDPROVINCE.getProvinceName(c.attr("proviceId"))}}})}function showProvincesV2(){if(jQuery.cookie("provinceId")){YHDPROVINCE.headerSelectProvince();return}var a=YHDPROVINCE.getCurentDomain();var b=a+"/header/selectProvinceboxV2.do?timestamp="+new Date().getTime()+"&callback=?";jQuery.getJSON(b,function(c){if(c&&!c.ERROR){YHDPROVINCE.processProvince(c)}})}YHDPROVINCE.processProvince=function(a){if(!jQuery.cookie("provinceId")){YHDPROVINCE.chooseProvincePop(a)}};YHDPROVINCE.getProvinceName=function(a){jQuery("#currentProvinceName").html("<strong>"+jQuery("#p_"+a).text()+"站</strong> >>")};YHDPROVINCE.yhdCommonProvinceInfo=function(b,a){a.push('<li>A<a id="p_13" isTrkCustom="1" href="javascript:void(0);">安徽</a></li>');
a.push('<li>B<a id="p_2" isTrkCustom="1" href="javascript:void(0);">北京</a></li>');a.push('<li>C<a id="p_7" isTrkCustom="1" href="javascript:void(0);">重庆</a></li>');a.push('<li>G<a id="p_20" isTrkCustom="1" href="javascript:void(0);">广东</a><a id="p_21" isTrkCustom="1" href="javascript:void(0);">广西</a><a isTrkCustom="1" id="p_23" href="javascript:void(0);">贵州</a><a id="p_27" isTrkCustom="1" href="javascript:void(0);">甘肃</a></li>');a.push('<li>F<a id="p_14" isTrkCustom="1" href="javascript:void(0);">福建</a></li>');a.push('<li>H<a id="p_4" isTrkCustom="1" href="javascript:void(0);">河北</a><a id="p_11" isTrkCustom="1" href="javascript:void(0);">黑龙江</a><a id="p_22" isTrkCustom="1" href="javascript:void(0);">海南</a><a id="p_18" isTrkCustom="1" href="javascript:void(0);">湖北</a><a id="p_19" isTrkCustom="1" href="javascript:void(0);">湖南</a><a id="p_17" isTrkCustom="1" href="javascript:void(0);">河南</a></li>');
a.push('<li>J<a id="p_5" isTrkCustom="1" href="javascript:void(0);">江苏</a><a id="p_10"  isTrkCustom="1" href="javascript:void(0);">吉林</a><a id="p_15" isTrkCustom="1" href="javascript:void(0);">江西</a></li>');a.push('<li>L<a id="p_9" isTrkCustom="1" href="javascript:void(0);">辽宁</a></li>');a.push('<li>N<a id="p_8" isTrkCustom="1" href="javascript:void(0);">内蒙古</a><a id="p_30" isTrkCustom="1" href="javascript:void(0);">宁夏</a></li>');a.push('<li>Q<a id="p_28" isTrkCustom="1" href="javascript:void(0);">青海</a></li>');a.push('<li>S<a id="p_1" isTrkCustom="1" href="javascript:void(0);">上海</a><a id="p_16" isTrkCustom="1" href="javascript:void(0);">山东</a><a id="p_32" isTrkCustom="1" href="javascript:void(0);">山西</a><a id="p_12" isTrkCustom="1" href="javascript:void(0);">四川</a><a id="p_26" isTrkCustom="1"  href="javascript:void(0);">陕西</a></li>');
a.push('<li>T<a id="p_3" isTrkCustom="1" href="javascript:void(0);">天津</a></li>');a.push('<li>X<a id="p_25" isTrkCustom="1" href="javascript:void(0);">西藏</a><a id="p_29" isTrkCustom="1" href="javascript:void(0);">新疆</a></li>');a.push('<li>Y<a id="p_24" isTrkCustom="1" href="javascript:void(0);">云南</a></li>');a.push('<li>Z<a id="p_6" isTrkCustom="1" href="javascript:void(0);">浙江</a></li>')};YHDPROVINCE.headerSelectProvince=function(){var c=$("#headerAllProvince"),b=$("#currProvince");if($.trim(c.html()).length==0){YHDPROVINCE.yhdExistsProvinceInfo(c)}c.toggle();b.toggleClass("fold");$("#headerAllPvcClose").click(function(){a()});c.find("a").click(function(){a();b.text($(this).text());var d=$(this).attr("id").split("_")[1];setAddressCity(d);return false});function a(){b.removeClass("fold");c.hide()
}};YHDPROVINCE.yhdExistsProvinceInfo=function(b){var a=[];a.push('<li><h4><i id="headerAllPvcClose"></i>请根据您的收货地址选择</h4></li>');YHDPROVINCE.yhdCommonProvinceInfo(null,a);b.html(a.join(""))};YHDPROVINCE.yhdExistProvinceHoverEvent=function(){if(jQuery("#headerSelectProvince")[0]&&currSiteId==1){var a;jQuery("#headerSelectProvince").hover(function(){a=setTimeout(function(){showProvincesV2();jQuery("#currProvince").addClass("hd_fold");$("#headerSelectProvince").css("z-index","1211")},200)},function(){if(a){clearTimeout(a)}var c=jQuery("#headerAllProvince"),b=jQuery("#currProvince");b.removeClass("fold");b.removeClass("hd_fold");c.hide();$("#headerSelectProvince").css("z-index","1201")})}};YHDPROVINCE.yhdNoExistsProvinceInfo=function(b){var a=[];a.push('<div class="province_box" id="provinceBox">');
a.push('<div class="province_title">');a.push("<h4>欢迎来到1号店</h4>");a.push("<p>目前我们提供31个地区的配送服务,请根据您的收货地址选择站点。</p>");a.push("</div>");a.push('<div class="province_select">');a.push('<div class="province_input">');a.push('<div class="province_input_con">');a.push('<span id="selectProvince" class="notsure">请选择</span>');a.push('<ul id="allProvinceSelect" class="provinceList">');YHDPROVINCE.yhdCommonProvinceInfo(b,a);a.push("</ul>");a.push("送货至");a.push("</div>");a.push("您的商品将会：");a.push("</div>");a.push('<p><button id="startShopping" class="disabled">开始购物<span></span></button></p>');a.push("</div>");a.push("</div>");yhdLib.popwin({fix:true,popcontentstr:a.join(""),fun:["globalChangeTop"]})};function globalChangeTop(){$(".popGeneral .notsure").click(function(){$(".popGeneral .provinceList").show();
var d=$(window).height(),a=$(".popGeneral .province_box").height()+$(".popGeneral .provinceList").height()-115,b=d-a,f=$(".popGeneral").offset().top;if(f>b){if(a>d){$(".popGeneral").stop().animate({"margin-top":-d/2},300)}else{var c=parseInt($(".popGeneral").css("margin-top")),e=f-b;$(".popGeneral").stop().animate({"margin-top":c-e},300)}}})}YHDPROVINCE.chooseProvincePop=function(b){$.cookie("search_keyword_history","",{domain:".yhd.com",path:"/"});YHDPROVINCE.yhdNoExistsProvinceInfo(b);var g=b.ipProvinceId?b.ipProvinceId:"1";var c=b.ipProvinceIdStr?b.ipProvinceIdStr:"上海";var f=-1;var h=false,d=$("#provinceboxDiv"),a=$("#selectProvince"),e=$("#allProvinceSelect"),i=$("#startShopping");function j(l,k){f=l;a.removeClass("notsure fold").html(k);$("#currProvince").html(k).show();e.hide();i.removeClass("disabled")
}if(g&&c){h=true;j(g,c)}if(!h){a.addClass("notsure");i.addClass("disabled")}a.click(function(){var k=$(this);if(!k.hasClass("fold")){k.addClass("notsure fold");e.show();return false}});e.click(function(){return false});e.find("a").click(function(){h=true;j($(this).attr("id").split("_")[1],$(this).text())});$("#provinceBox").click(function(){if(a.hasClass("fold")){e.hide();a.removeClass("fold");if(h){a.removeClass("notsure")}}});i.click(function(){if($(this).hasClass("disabled")){return}d.hide();if(f!=-1){setAddressCity(f)}})};jQuery(document).ready(function(){if(isIndex!=1){initProvince()}YHDPROVINCE.yhdExistProvinceHoverEvent()});