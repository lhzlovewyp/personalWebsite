(function(s,y){var v=("createTouch" in document)||("ontouchstart" in s),p=document.createElement("div").style,t=(function(){var b={OTransform:["-o-","otransitionend"],WebkitTransform:["-webkit-","webkitTransitionEnd"],MozTransform:["-moz-","transitionend"],msTransform:["-ms-","MSTransitionEnd"],transform:["","transitionend"]},a;for(a in b){if(a in p){return b[a]}}return false})(),w=[["width","left","right"],["height","top","bottom"]],u=t&&t[0],C=function(a){return(a+"").replace(/^-ms-/,"ms-").replace(/-([a-z]|[0-9])/ig,function(c,b){return(b+"").toUpperCase()})},q=function(a){var b=C(u+a);return(a in p)&&a||(b in p)&&b},x=function(c,a){for(var b in a){if(typeof c[b]=="undefined"){c[b]=a[b]}}return c},z=function(a){var b=a.children||a.childNodes,c=[],d=0;for(;d<b.length;d++){if(b[d].nodeType===1){c.push(b[d])
}}return c},r=function(d,a){var b=0,c=d.length;for(;b<c;b++){if(a.call(d[b],b,d[b])===false){break}}},A=function(a){a=B.fn.eventHook(a);a.preventDefault()},D=t[1]||"",B=function(a,b){if(!(this instanceof B)){return new B(a,b)}if(typeof a!="string"&&!a.nodeType){b=a;a=b.id}if(!a.nodeType){a=document.getElementById(a)}this.cfg=x(b||{},this._default);this.element=a;if(this.element){this.container=this.element.parentNode||document.body;this.setup()}};B.fn=B.prototype={version:"1.3.1",_default:{id:"slider",begin:0,auto:true,speed:600,timeout:5000,direction:"left",align:"center",fixWidth:true,mouseDrag:true,before:function(){},after:function(){}},css:function(b,d){if(typeof d=="string"){var c=document.defaultView&&document.defaultView.getComputedStyle&&getComputedStyle(b,null)||b.currentStyle||b.style||{};
return c[C(d)]}else{var a,e;for(a in d){if(a=="float"){e=("cssFloat" in p)?"cssFloat":"styleFloat"}else{e=C(a)}b.style[e]=d[a]}}},addListener:function(c,a,b,d){if(c.addEventListener){c.addEventListener(a,b,d);return true}else{if(c.attachEvent){c.attachEvent("on"+a,b);return true}}return false},removeListener:function(c,a,b,d){if(c.addEventListener){c.removeEventListener(a,b,d);return true}else{if(c.attachEvent){c.detachEvent("on"+a,b);return true}}return false},eventHook:function(c){var d={},b="changedTouches touches scale target view which clientX clientY fromElement offsetX offsetY pageX pageY toElement".split(" ");c=c||s.event;r(b,function(){d[this]=c[this]});d.target=c.target||c.srcElement||document;if(d.target.nodeType===3){d.target=d.target.parentNode}d.preventDefault=function(){c.preventDefault&&c.preventDefault();
d.returnValue=c.returnValue=false};d.stopPropagation=function(){c.stopPropagation&&c.stopPropagation();d.cancelBubble=c.cancelBubble=true};if(v&&d.touches.length){d.pageX=d.touches.item(0).pageX;d.pageY=d.touches.item(0).pageY}else{if(typeof c.pageX=="undefined"){var a=document.documentElement,e=document.body;d.pageX=c.clientX+(a&&a.scrollLeft||e&&e.scrollLeft||0)-(a&&a.clientLeft||e&&e.clientLeft||0);d.pageY=c.clientY+(a&&a.scrollTop||e&&e.scrollTop||0)-(a&&a.clientTop||e&&e.clientTop||0)}}d.origEvent=c;return d},bind:function(b,a){return function(){return b.apply(a,arguments)}},setup:function(){var c=v||!this.cfg.mouseDrag,d=c?"touchstart":"mousedown",b=c?"touchmove":"mousemove",a=c?"touchend":"mouseup";this.slides=z(this.element);this.cacheSlides=z(this.element);this.length=this.slides.length;
this.cfg.timeout=parseInt(this.cfg.timeout);this.cfg.speed=parseInt(this.cfg.speed);this.cfg.begin=parseInt(this.cfg.begin);this.cfg.auto=!!this.cfg.auto;this.cfg.timeout=Math.max(this.cfg.timeout,this.cfg.speed);this.touching=!!v;this.css3transition=!!t;this.index=this.cfg.begin<0||this.cfg.begin>=this.length?0:this.cfg.begin;if(this.length<1){return false}this.direction=this.direction||"left";this.vertical=0;this.addListener(this.element,d,this.bind(this._start,this),false);this.addListener(document,b,this.bind(this._move,this),false);this.addListener(document,a,this.bind(this._end,this),false);this.addListener(document,"touchcancel",this.bind(this._end,this),false);this.addListener(this.element,D,this.bind(this.transitionend,this),false);this.addListener(s,"resize",this.bind(function(){clearTimeout(this.resizeTimer);
this.resizeTimer=setTimeout(this.bind(this.resize,this),100)},this),false);this.playing=this.cfg.auto;this.resize()},getSum:function(b,a,f){var c=0,d=a,e=C("-"+b);for(;d<f;d++){c+=this["getOuter"+e](this.slides[d])}return c},getPos:function(a,c){var d=C("-"+a),b=this.getSum(a,0,c)+this["getOuter"+d](this.element)/2-this["get"+d](this.element)/2;return -b},resize:function(){clearTimeout(this.aniTimer);var a=this,e,d=w[this.vertical][0],f=C("-"+d),c=this.css(this.container,"position");this.css(this.container,{overflow:"hidden",visibility:"hidden",listStyle:"none",position:c=="static"?"relative":c});this[d]=this["get"+f](this.container);var b=this.vertical?"none":"left";e={"float":b,display:"block"};r(this.slides,function(){if(a.cfg.fixWidth){e[d]=a[d]-a["margin"+f](this)-a["padding"+f](this)-a["border"+f](this)+"px"
}a.css(this,e)});this.total=this.getSum(d,0,this.length);e={position:"relative",overflow:"hidden"};e[u+"transition-duration"]="0ms";e[d]=this.total+"px";e[w[this.vertical][1]]=this.length?this.getPos(d,this.index)+"px":0;this.css(this.element,e);this.css(this.container,{visibility:"visible"});this.playing&&this.play();return this},getRealIndex:function(b){var a=this.index;r(this.cacheSlides,function(d,c){if(b===c){a=d}});return a},go:function(c){var a=this.cacheSlides[c];var b=c;r(this.slides,function(e,d){if(a===d){b=e}});this.slide(b)},slide:function(i,m){this.animateLock=true;var b=w[this.vertical][1],g=w[this.vertical][0],h=q("transition"),H=parseFloat(this.css(this.element,b))||0,d,k={},f,o=this.getSum(g,i,i+1);i=Math.min(Math.max(0,i),this.length-1);m=typeof m=="undefined"?this.cfg.speed:parseInt(m);
d=this.getPos(g,i);f=d-H;m=Math.abs(f)<o?Math.ceil(Math.abs(f)/o*m):m;if(h){k[h]=b+" ease "+m+"ms";k[b]=d+"px";this.css(this.element,k)}else{var j=this,a=0,n=m/10,e=function(K,L,E,F){return -E*((K=K/F-1)*K*K*K-1)+L},l=function(){if(a<n){a++;j.element.style[b]=Math.ceil(e(a,H,f,n))+"px";j.aniTimer=setTimeout(l,10)}else{j.element.style[b]=d+"px";j.transitionend({propertyName:b})}};clearTimeout(this.aniTimer);l()}var c=this.slides[this.index];this.index=i;var G=this.getRealIndex(this.slides[this.index]);this.cfg.before.call(this,G,c);return this},play:function(){clearTimeout(this.timer);this.playing=true;this.timer=setTimeout(this.bind(function(){this.next()},this),this.cfg.timeout);return this},pause:function(){clearTimeout(this.timer);this.playing=false;return this},stop:function(){this.pause();
return this.slide(0)},prev:function(a,b,c){if(this.animateLock){return}clearTimeout(this.timer);var f=this.index;var g=this.slides.length;var d=null;var e=null;if(!c&&f===0){d=this.slides[g-1];e=this.slides[0];this.element.removeChild(d);this.element.insertBefore(d,e);this.refresh();this.element.style[this.cfg.direction]=-this.getOuterWidth(d)+"px"}a=typeof a=="undefined"?a=1:a%this.length;if(f===0){}else{f-=a}if(b===false){f=Math.max(f,0)}else{f=f<0?this.length+f:f}return this.slide(f)},next:function(a,b,c){if(this.animateLock){return}clearTimeout(this.timer);var f=this.index;var h=this.slides.length;var d=null;var e=null;if(!c&&f===h-1){d=this.slides[0];e=this.slides[h-1];this.element.removeChild(d);this.element.appendChild(d,e);this.refresh();var g=parseInt(this.element.style[this.cfg.direction],10);
this.element.style[this.cfg.direction]=(g+this.getOuterWidth(d))+"px"}if(typeof a=="undefined"){a=1}if(f===h-1){}else{f+=a}if(b===false){f=Math.min(f,this.length-1)}else{f%=this.length}return this.slide(f)},_start:function(b){b=this.eventHook(b);var a=b.target.nodeName.toLowerCase();if(!this.touching&&(a=="a"||a=="img")){b.preventDefault()}this.removeListener(this.element,"click",A);this.startPos=[b.pageX,b.pageY];this.element.style[C(u+"transition-duration")]="0ms";this.startTime=+new Date();this._pos=parseFloat(this.css(this.element,w[this.vertical][1]))||0},_move:function(d){if(!this.startPos||d.scale&&d.scale!==1){return}d=this.eventHook(d);this.stopPos=[d.pageX,d.pageY];var i,e=w[this.vertical][1],f=w[this.vertical][0],a=this.stopPos[this.vertical]-this.startPos[this.vertical];if(this.scrolling||typeof this.scrolling=="undefined"&&Math.abs(a)>=Math.abs(this.stopPos[1-this.vertical]-this.startPos[1-this.vertical])){d.preventDefault();
var g=this.slides.length;var h=null;var b=null;a=a/((!this.index&&a>0||this.index==this.length-1&&a<0)?(Math.abs(a)/this[f]+1):1);if(!this.tempCreate&&this.index===0){this.tempCreate=true;h=this.slides[g-1];b=this.slides[0];this.element.removeChild(h);this.element.insertBefore(h,b);this.refresh();this._pos=-this.getOuterWidth(h)}else{if(!this.tempCreate&&(this.index===g-1)){this.tempCreate=true;h=this.slides[0];b=this.slides[g-1];this.element.removeChild(h);this.element.appendChild(h,b);var c=parseInt(this.element.style[this.cfg.direction],10);this.refresh();this._pos=c+this.getOuterWidth(h)}}this.element.style[e]=this._pos+a+"px";if(s.getSelection!=null){i=s.getSelection();if(i.empty){i.empty()}else{if(i.removeAllRanges){i.removeAllRanges()}}}if(a&&typeof this.scrolling=="undefined"){this.scrolling=true;
clearTimeout(this.timer);clearTimeout(this.aniTimer)}}else{this.scrolling=false}},_end:function(){if(this.startPos){if(this.scrolling){this.tempCreate=false;var d=w[this.vertical][0],g=this.stopPos[this.vertical]-this.startPos[this.vertical],e=Math.abs(g),c=e/g,b,h,a,f=this.index,i=0;this.addListener(this.element,"click",A);if(e>20){h=parseFloat(this.css(this.element,w[this.vertical][1]));do{if(f>=0&&f<this.length){a=this.getPos(d,f);b=this.getSum(d,f,f+1)}else{f+=c;break}}while(Math.abs(a-h)>b/2&&(f-=c));i=Math.abs(f-this.index);if(!i&&+new Date()-this.startTime<250){i=1}}g>0?this.prev(i,false,true):this.next(i,false,true);this.playing&&this.play()}delete this._pos;delete this.stopPos;delete this.startPos;delete this.scrolling;delete this.startTime}},transitionend:function(b){if(b.propertyName==w[this.vertical][1]){var a=this.getRealIndex(this.slides[this.index]);
this.cfg.after.call(this,a,this.slides[this.index]);this.playing&&this.play()}this.animateLock=false},refresh:function(){if(this.direction==null){this.setup()}else{this.slides=z(this.element);this.length=this.slides.length;this.index=Math.max(Math.min(this.length-1,this.index),0);this.resize()}},append:function(a){this.element.appendChild(a);this.refresh()},prepend:function(a){this.length?this.insertBefore(a,0):this.append(a)},insertBefore:function(a,b){this.element.insertBefore(a,this.slides[b]);if(this.index>=b){this.index++}this.refresh()},remove:function(a){this.element.removeChild(this.slides[a]);if(this.index>=a){this.index--}this.refresh()}};r(["Width","Height"],function(b,a){r(["margin","padding","border"],function(c,d){B.fn[d+a]=function(e){return(parseFloat(this.css(e,d+"-"+w[b][1]+(d=="border"?"-width":"")))||0)+(parseFloat(this.css(e,d+"-"+w[b][2]+(d=="border"?"-width":"")))||0)
}});B.fn["get"+a]=function(c){return c["offset"+a]-this["padding"+a](c)-this["border"+a](c)};B.fn["getOuter"+a]=function(c){return c["offset"+a]+this["margin"+a](c)}});s.TouchSlider=B})(window);