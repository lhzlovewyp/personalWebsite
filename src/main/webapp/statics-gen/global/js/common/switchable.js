(function(){loli=window.loli||{};loli.ui=loli.ui||{};loli.ui.switchable=function(h,e,g){function f(O,K,W){var c=this,U={triggerType:"mouseenter",effect:"none",easing:"easeOutQuart",duration:500,delay:100,interval:5000,visible:1,steps:1,autoPlay:false,circular:false,prefix:"L_tab"};var K=c.config=$.extend(U,K);if(K.autoPlay){K.circular=true}if(K.triggerType=="click"){K.delay=0}c.activeIndex=0;var M=K.effect,Q=K.steps,X=K.visible,aa=K.duration,L=K.panelClass,H=K.circular,G=K.easing,b=K.prefix,J=b+"_prev",ab=b+"_prev_disabled",I=b+"_next",T=b+"_next_disabled";var R=O.find("."+b+"_panel"),F=R.first(),N=O.find("."+b+"_trigger"),Y=O.find("."+b+"_arrow");var Z=R.length,a=Z/X;var V;N.bind(K.triggerType,function(){var i=$(this).index(),k=c.activeIndex;if(i==k){return}var j=(i>k)?"forward":"backward";
V=setTimeout(function(){c.switchTo(i,j)},K.delay)});if(K.triggerType=="mouseenter"){N.bind("mouseleave",function(){clearTimeout(V)})}Y.bind("click",function(){if((M=="scrollX"||M=="scrollY")&&R.parent().is(":animated")){return}var i=$(this);if(i.hasClass(ab)||i.hasClass(T)){return}if(i.hasClass(J)){var j=c.activeIndex-1;c.switchTo(c.activeIndex-1,"backward")}else{c.switchTo(c.activeIndex+1,"forward")}});var P=function(i){var l=c.activeIndex,j,k;if(l>-1){j=R.slice(l*X,(l+1)*X)}else{j=null}k=R.slice(i*X,(i+1)*X);return{fromPanels:j,toPanels:k}};c.switchTo=function(i,j){var k=c.activeIndex;if(j=="backward"&&k===0){i=i+a}else{if(j=="forward"&&k==a-1){i=i-a}}N.eq(k).removeClass("cur");N.eq(i).addClass("cur");var l=d[M];l(i,j);c.activeIndex=i;if(!H){if(c.activeIndex===0){O.find("."+J).addClass(ab)
}else{if(c.activeIndex==(a-1)){O.find("."+I).addClass(T)}else{Y.removeClass(ab+" "+T)}}}c.toPanels=P(i).toPanels;W&&W.call(c)};var d={none:function(i){var j=P(i);j.fromPanels.hide();j.toPanels.show()},fade:function(i){var j=P(i);j.fromPanels.animate({opacity:0},aa);j.toPanels.animate({opacity:1},aa)},scroll:function(o,l){var j=l==="forward",i=K.effect=="scrollX",m=R.parent();m.stop();if(i){var s="left",r="marginLeft",q=F.outerWidth(true),u=q*Q}else{var s="top",r="marginTop",q=F.outerHeight(true),u=q*Q}var t={};if((j&&o===0)||(!j&&o===a-1)){var k={position:"relative"},p=P(o).toPanels;k[s]=(j?1:-1)*u*a;p.css(k);t[r]=j?-u*a:u;m.animate(t,aa,G,function(){$(this).css(r,j?0:-u*(a-1));n(p,s)})}else{t[r]=-o*u;m.animate(t,aa,G,function(){if(R.eq(0).css("position")=="relative"){n(R.slice(0,X),s)}else{if(R.eq(Z-1).css("position")=="relative"){n(R.slice((a-1)*X,a*X),s)
}}})}function n(x,v){var w={position:"static"};w[v]=0;x.css(w)}}};d.scrollX=d.scrollY=d.scroll;var S=function(){if(!H){O.find("."+J).addClass(ab);if(Z<=X){O.find("."+I).addClass(T)}}switch(M){case"none":R.slice(0,X).show();break;case"fade":R.slice(0,X).css("opacity",1);break;default:break}O.data("L_inited",true)};if(!O.data("L_inited")){S()}if(K.autoPlay){c.start();O.hover(function(){c.stop()},function(){c.start()})}return this}f.prototype.start=function(){var a=this;if(a.autoPlay){return}a.autoPlay=setInterval(function(){a.switchTo(a.activeIndex+1,"forward")},a.config.interval)};f.prototype.stop=function(){clearInterval(this.autoPlay);this.autoPlay=undefined};return new f(h,e,g)}})();