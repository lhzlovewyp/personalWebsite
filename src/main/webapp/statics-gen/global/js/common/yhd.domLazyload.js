(function(c){var d=function(b){var f=b,a={activeLoadTime:2000,load:true,activeLoadNum:1,hfix:100,callback:null,attr:"lazyLoad_textarea",flushPrice:true,flushPriceAttr:"productid",indexLoad:false,scrollLoad:true};c.extend(a,f);this.param=a};d.prototype={constructor:d,doc:document,areaArray:[],lazyDom:function(j,a){var h=this,b=h.param,i=j;if(a){h.param=c.extend(b,a)}h.areaArray=h._getJqueryDomArray(i,b);if(b.indexLoad){h._domScrollLoad(h.areaArray,b)}if(b.scrollLoad){h._loadScrollDom(function(){if(h.areaArray.length==0){return}h._domScrollLoad(h.areaArray,b)})}if(b.load){h._loadActiveDom(h.areaArray,b)}},_loadActiveDom:function(b,m){var n=this,a=m,k=a.activeLoadTime,j=b;var l=setInterval(function(){var e=j.length;if(e==0){clearInterval(l);return}n._domActiveLoad(j,a)},k)},_loadScrollDom:function(a){loli.scroll(function(){a()
},50)},_domScrollLoad:function(m,i){var n=this,i=n.param,a=[];for(var k=0,b=m.length;k<b;k++){var l=n._getJqueryDom(m[k]);if(n.isInCurrScreen(l)){n._rendDom(l,i)}else{a.push(l)}}n.areaArray=a},_domActiveLoad:function(o,b){var p=this,i=b,m=o,n=m.length,l=Math.min(i.activeLoadNum,n);for(var a=0;a<l;a++){p._rendDom(p._getJqueryDom(m.shift()),i)}},_rendDom:function(a,q){var l=a,o=q,p=o.attr,m=l.attr(p),b=c("#"+m),n=o.flushPrice,r=o.flushPriceAttr;if(b.size()>0){l.html(b.val())}l.removeAttr(p);if(n){l.lazyPrice({attr:r,oneOffLoad:true})}if(o.callback){o.callback.call(l)}},isInCurrScreen:function(o){var m=this,l=o,r=m.doc,b=r.documentElement,n=m.param,q=n.hfix,p=Math.max(b.scrollTop,r.body.scrollTop),a=b.clientHeight+p;if(l){return(l.offset().top<a+q)&&(l.offset().top>p-q)}return false},_getJqueryDomArray:function(a,b){var h=[],g=b.attr;
if(a instanceof c){h=a.find("["+g+"]").get()}else{if(c.isArray(a)){h=a;return h}else{a=c(a);h=a.find("["+g+"]").get()}}if(h.length==0){if(a.attr(g)){h.push(a)}}return h},_getJqueryDom:function(a){if(!a){return a}if(a instanceof c){return a}return c(a)}};c.fn.extend({lazyDom:function(a){var b=new d();return b.lazyDom(this,a)}})})(jQuery);