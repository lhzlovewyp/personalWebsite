(function(){function b(a){this.option={container:null,content:null,trigger:null,pageButton:[],steps:1,effect:"visible",autoPlay:false,interval:3000,activeClass:"on",speed:300,eventType:"mouseover",delay:0};$.extend(this.option,a);this.index=0;this.timer=0;this.handlers={};this.box=$(this.option.container);if(this.box.length==0){return false}this.sprite=this.box.find(this.option.content);if(this.sprite.length==0){return false}this.trig=this.box.find(this.option.trigger).children();this.btnLast=this.box.find(this.option.pageButton[0]);this.btnNext=this.box.find(this.option.pageButton[1]);this.items=this.sprite.children();if(this.items.length==0){return false}this.total=this.items.length;if(this.total<=this.option.steps){return false}this.page=Math.ceil(this.total/this.option.steps);this.width=this.items.eq(0).outerWidth(true);
this.height=this.items.eq(0).outerHeight(true);this.init()}b.prototype={init:function(){this.initStyle();this.cutover(0);this.bindUI();this.autoPlay()},on:function(d,a){if(typeof this.handlers[d]=="undefined"){this.handlers[d]=[]}this.handlers[d].push(a);return this},fire:function(h,g){if(this.handlers[h] instanceof Array){var j=this.handlers[h];for(var i=0,a=j.length;i<a;i++){j[i](g)}}},initStyle:function(){var a=function(c){for(var d=0;d<c.option.steps;d++){c.items.eq(c.total-(d+1)).clone().prependTo(c.sprite);c.items.eq(d).clone().appendTo(c.sprite)}};switch(this.option.effect){case"scrollx":a(this);this.sprite.css({width:this.sprite.children().length*this.width,left:-this.option.steps*this.width});this.sprite.children().css("float","left");break;case"scrolly":a(this);this.sprite.css({top:-this.option.steps*this.height});
break;case"fade":this.items.css({position:"absolute",zIndex:0}).eq(this.index).css({zIndex:1});break;case"visible":this.items.css({display:"none"}).eq(this.index).css({display:"block"});break}var e=this;var f=setTimeout(function(){clearTimeout(f);e.fire("init")},30)},cutover:function(i){var h=(i==null)?this.option.speed:0;var g=this.index!=this.page?this.index:0;this.trig.eq(g).addClass(this.option.activeClass).siblings().removeClass(this.option.activeClass);switch(this.option.effect){case"visible":this.items.css({display:"none"}).eq(g).css({display:"block"});break;case"fade":this.items.css({position:"absolute",zIndex:0}).fadeOut(h);this.items.eq(g).css({zIndex:1}).fadeIn(h);break;case"scrollx":var a=this.width*this.option.steps;this.sprite.stop().animate({left:-a*this.index-a},h);break;case"scrolly":var j=this.height*this.option.steps;
this.sprite.stop().animate({top:-j*this.index-j},h);break}this.fire("cutover",g)},bindUI:function(){var d=this;var a=0;this.trig.bind(this.option.eventType,function(){var c=this;if(d.option.eventType=="mouseover"||d.option.eventType=="mouseenter"){if(d.index==$(c).index()){return}clearTimeout(a);a=setTimeout(function(){d.index=$(c).index();d.cutover();clearTimeout(a)},d.option.delay)}else{d.index=$(this).index();d.cutover()}});this.btnLast.click(function(){d.lastPage()});this.btnNext.click(function(){d.nextPage()});this.box.bind({mouseenter:function(){d.btnLast.show();d.btnNext.show();clearInterval(d.timer)},mouseleave:function(){d.btnLast.hide();d.btnNext.hide();d.autoPlay()}})},lastPage:function(){this.index--;if(this.index<-1){this.index=this.page-1;this.cutover(0);this.index=this.page-2
}this.cutover()},nextPage:function(){this.index++;if(this.index>this.page){this.index=0;this.cutover(0);this.index=1}this.cutover()},autoPlay:function(){var a=this;if(!this.option.autoPlay){return false}clearInterval(this.timer);this.timer=setInterval(function(){a.nextPage()},this.option.interval)}};window.Switchable=b})();