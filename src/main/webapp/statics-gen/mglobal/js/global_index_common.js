common_globalTimingRely={relyResource:[],_getResource:function(c){for(var b=0;b<this.relyResource.length;b++){var a=this.relyResource[b];if(a.key==c){return a}}return null},addResource:function(d,c,b){var a=this._getResource(d);if(!a){var a={key:d,status:(c||0),time:(b||-1)};this.relyResource.push(a)}},getRelyResource:function(){return this.relyResource},setRelyResource:function(b,a){var c=this._getResource(b);if(c){c.status=1;c.time=a}}};define("common_mcookie",function(b,a){a.setCookie=function(e,g,d){var f=d||30;var c=new Date();c.setTime(c.getTime()+f*24*60*60*1000);document.cookie=e+"="+g+";expires="+c.toGMTString()+";path=/"};a.getCookie=function(c){var e,d=new RegExp("(^| )"+c+"=([^;]*)(;|$)");if(e=document.cookie.match(d)){return(e[2])}else{return null}};a.delCookie=function(e){var d=new Date();
d.setTime(d.getTime()-1);var c=getCookie(e);if(c!=null){document.cookie=e+"="+c+";expires="+d.toGMTString()+";path=/"}}});if(require&&require.config){if(!window.pathurl){pathurl=window.pathurl="http://image.yihaodianimg.com/front-homepage"}require.config({baseUrl:pathurl+"/js/",paths:{common_cart:pathurl+"/mglobal/js/common/cart",common_lazyload:pathurl+"/mglobal/js/common/lazyload",common_popupTips:pathurl+"/mglobal/js/common/popupTips","common_yhd.storage":pathurl+"/mglobal/js/common/yhd.storage",common_slider:pathurl+"/mglobal/js/libs/slider",libs_c_slide:pathurl+"/mglobal/js/libs/c_slide",common_touch:pathurl+"/mglobal/js/libs/touch",common_mcookie:pathurl+"/mglobal/js/common/cookie",common_globalTiming:pathurl+"/mglobal/js/common/yhd.globalTiming",util_globalLogin:pathurl+"/mglobal/js/util/yhd.globalLogin",global_env:pathurl+"/mglobal/js/global/env","tracker_ref_yhd.global_spm":pathurl+"/mglobal/js/tracker/ref/yhd.global_spm","tracker_ref_yhd.uid":pathurl+"/mglobal/js/tracker/ref/yhd.uid",tracker_adContentTracker:pathurl+"/mglobal/js/tracker/adContentTracker",common_search:pathurl+"/mglobal/js/common/search_v2",biz_yhd_productInfo:pathurl+"/mglobal/js/biz/yhd.productInfo",biz_loli_page:pathurl+"/mglobal/js/biz/loli.page",biz_appDownloadBottom:pathurl+"/mglobal/js/biz/appDownloadBottom",biz_newUserMesssage:pathurl+"/mglobal/js/biz/newUserMesssage",common_popupWindow:pathurl+"/mglobal/js/common/popupWindow",common_redirect:pathurl+"/mglobal/js/common/redirect",native_redirect:pathurl+"/mglobal/js/common/redirectNative",common_fastclick:pathurl+"/mglobal/js/libs/fastclick",base_observer:pathurl+"/global/js/base/yhd.observer",global_provinceSwitch:pathurl+"/mglobal/js/global/provinceSwitch",libs_jweixin:pathurl+"/mglobal/js/libs/jweixin-1.0.0",common_yhd_webp:pathurl+"/mglobal/js/common/yhd.webp",common_back:pathurl+"/mglobal/js/common/yhd.globalBack",nearshop_redirectCart:pathurl+"/mglobal/js/nearshop/redirectCart",abtestPv_tracker:pathurl+"/mglobal/js/tracker/abtestPvTracker"}})
}(function(){var rsplit=function(string,regex){var result=regex.exec(string),retArr=new Array(),first_idx,last_idx,first_bit;while(result!=null){first_idx=result.index;last_idx=regex.lastIndex;if((first_idx)!=0){first_bit=string.substring(0,first_idx);retArr.push(string.substring(0,first_idx));string=string.slice(first_idx)}retArr.push(result[0]);string=string.slice(result[0].length);result=regex.exec(string)}if(!string==""){retArr.push(string)}return retArr},chop=function(string){return string.substr(0,string.length-1)},extend=function(d,s){for(var n in s){if(s.hasOwnProperty(n)){d[n]=s[n]}}};EJS=function(options){options=typeof options=="string"?{view:options}:options;this.set_options(options);if(options.precompiled){this.template={};this.template.process=options.precompiled;EJS.update(this.name,this);
return}if(options.element){if(typeof options.element=="string"){var name=options.element;options.element=document.getElementById(options.element);if(options.element==null){throw name+"does not exist!"}}if(options.element.value){this.text=options.element.value}else{this.text=options.element.innerHTML}this.name=options.element.id;if(!options.type){this.type="["}this.type=options.type}else{if(options.url){options.url=EJS.endExt(options.url,this.extMatch);this.name=this.name?this.name:options.url;var url=options.url;var template=EJS.get(this.name,this.cache);if(template){return template}if(template==EJS.INVALID_PATH){return null}try{this.text=EJS.request(url+(this.cache?"":"?"+Math.random()))}catch(e){}if(this.text==null){throw ({type:"EJS",message:"There is no template at "+url})}else{if(options.srcTemplateText){this.text=options.srcTemplateText
}}}}var template=new EJS.Compiler(this.text,this.type);template.compile(options,this.name);EJS.update(this.name,this);this.template=template};EJS.prototype={render:function(object,extra_helpers){object=object||{};this._extra_helpers=extra_helpers;var v=new EJS.Helpers(object,extra_helpers||{});return this.template.process.call(object,object,v)},update:function(element,options){if(typeof element=="string"){element=document.getElementById(element)}if(options==null){_template=this;return function(object){EJS.prototype.update.call(_template,element,object)}}if(typeof options=="string"){params={};params.url=options;_template=this;params.onComplete=function(request){var object=eval(request.responseText);EJS.prototype.update.call(_template,element,object)};EJS.ajax_request(params)}else{element.innerHTML=this.render(options)
}},out:function(){return this.template.out},set_options:function(options){this.type=options.type||EJS.type;this.cache=options.cache!=null?options.cache:EJS.cache;this.text=options.text||null;this.name=options.name||null;this.ext=options.ext||EJS.ext;this.extMatch=new RegExp(this.ext.replace(/\./,"."))}};EJS.endExt=function(path,match){if(!path){return null}match.lastIndex=0;return path+(match.test(path)?"":this.ext)};EJS.Scanner=function(source,left,right){extend(this,{left_delimiter:left+"%",right_delimiter:"%"+right,double_left:left+"%%",double_right:"%%"+right,left_equal:left+"%=",left_comment:left+"%#"});this.SplitRegexp=left=="["?/(\[%%)|(%%\])|(\[%=)|(\[%#)|(\[%)|(%\]\n)|(%\])|(\n)/:new RegExp("("+this.double_left+")|(%%"+this.double_right+")|("+this.left_equal+")|("+this.left_comment+")|("+this.left_delimiter+")|("+this.right_delimiter+"\n)|("+this.right_delimiter+")|(\n)");
this.source=source;this.stag=null;this.lines=0};EJS.Scanner.to_text=function(input){if(input==null||input===undefined){return""}if(input instanceof Date){return input.toDateString()}if(input.toString){return input.toString()}return""};EJS.Scanner.prototype={scan:function(block){scanline=this.scanline;regex=this.SplitRegexp;if(!this.source==""){var source_split=rsplit(this.source,/\n/);for(var i=0;i<source_split.length;i++){var item=source_split[i];this.scanline(item,regex,block)}}},scanline:function(line,regex,block){this.lines++;var line_split=rsplit(line,regex);for(var i=0;i<line_split.length;i++){var token=line_split[i];if(token!=null){try{block(token,this)}catch(e){throw {type:"EJS.Scanner",line:this.lines}}}}}};EJS.Buffer=function(pre_cmd,post_cmd){this.line=new Array();this.script="";
this.pre_cmd=pre_cmd;this.post_cmd=post_cmd;for(var i=0;i<this.pre_cmd.length;i++){this.push(pre_cmd[i])}};EJS.Buffer.prototype={push:function(cmd){this.line.push(cmd)},cr:function(){this.script=this.script+this.line.join("; ");this.line=new Array();this.script=this.script+"\n"},close:function(){if(this.line.length>0){for(var i=0;i<this.post_cmd.length;i++){this.push(pre_cmd[i])}this.script=this.script+this.line.join("; ");line=null}}};EJS.Compiler=function(source,left){this.pre_cmd=["var ___ViewO = [];"];this.post_cmd=new Array();this.source=" ";if(source!=null){if(typeof source=="string"){source=source.replace(/\r\n/g,"\n");source=source.replace(/\r/g,"\n");this.source=source}else{if(source.innerHTML){this.source=source.innerHTML}}if(typeof this.source!="string"){this.source=""}}left=left||"<";
var right=">";switch(left){case"[":right="]";break;case"<":break;default:throw left+" is not a supported deliminator";break}this.scanner=new EJS.Scanner(this.source,left,right);this.out=""};EJS.Compiler.prototype={compile:function(options,name){options=options||{};this.out="";var put_cmd="___ViewO.push(";var insert_cmd=put_cmd;var buff=new EJS.Buffer(this.pre_cmd,this.post_cmd);var content="";var clean=function(content){content=content.replace(/\\/g,"\\\\");content=content.replace(/\n/g,"\\n");content=content.replace(/"/g,'\\"');return content};this.scanner.scan(function(token,scanner){if(scanner.stag==null){switch(token){case"\n":content=content+"\n";buff.push(put_cmd+'"'+clean(content)+'");');buff.cr();content="";break;case scanner.left_delimiter:case scanner.left_equal:case scanner.left_comment:scanner.stag=token;
if(content.length>0){buff.push(put_cmd+'"'+clean(content)+'")')}content="";break;case scanner.double_left:content=content+scanner.left_delimiter;break;default:content=content+token;break}}else{switch(token){case scanner.right_delimiter:switch(scanner.stag){case scanner.left_delimiter:if(content[content.length-1]=="\n"){content=chop(content);buff.push(content);buff.cr()}else{buff.push(content)}break;case scanner.left_equal:buff.push(insert_cmd+"(EJS.Scanner.to_text("+content+")))");break}scanner.stag=null;content="";break;case scanner.double_right:content=content+scanner.right_delimiter;break;default:content=content+token;break}}});if(content.length>0){buff.push(put_cmd+'"'+clean(content)+'")')}buff.close();this.out=buff.script+";";var to_be_evaled="/*"+name+"*/this.process = function(_CONTEXT,_VIEW) { try { with(_VIEW) { with (_CONTEXT) {"+this.out+" return ___ViewO.join('');}}}catch(e){e.lineNumber=null;throw e;}};";
try{eval(to_be_evaled)}catch(e){if(typeof JSLINT!="undefined"){JSLINT(this.out);for(var i=0;i<JSLINT.errors.length;i++){var error=JSLINT.errors[i];if(error.reason!="Unnecessary semicolon."){error.line++;var e=new Error();e.lineNumber=error.line;e.message=error.reason;if(options.view){e.fileName=options.view}throw e}}}else{throw e}}}};EJS.config=function(options){EJS.cache=options.cache!=null?options.cache:EJS.cache;EJS.type=options.type!=null?options.type:EJS.type;EJS.ext=options.ext!=null?options.ext:EJS.ext;var templates_directory=EJS.templates_directory||{};EJS.templates_directory=templates_directory;EJS.get=function(path,cache){if(cache==false){return null}if(templates_directory[path]){return templates_directory[path]}return null};EJS.update=function(path,template){if(path==null){return
}templates_directory[path]=template};EJS.INVALID_PATH=-1};EJS.config({cache:true,type:"<",ext:".ejs"});EJS.Helpers=function(data,extras){this._data=data;this._extras=extras;extend(this,extras)};EJS.Helpers.prototype={view:function(options,data,helpers){if(!helpers){helpers=this._extras}if(!data){data=this._data}return new EJS(options).render(data,helpers)},to_text:function(input,null_text){if(input==null||input===undefined){return null_text||""}if(input instanceof Date){return input.toDateString()}if(input.toString){return input.toString().replace(/\n/g,"<br />").replace(/''/g,"'")}return""}};EJS.newRequest=function(){var factories=[function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];for(var i=0;
i<factories.length;i++){try{var request=factories[i]();if(request!=null){return request}}catch(e){continue}}};EJS.request=function(path){var request=new EJS.newRequest();request.open("GET",path,false);try{request.send(null)}catch(e){return null}if(request.status==404||request.status==2||(request.status==0&&request.responseText=="")){return null}return request.responseText};EJS.ajax_request=function(params){params.method=(params.method?params.method:"GET");var request=new EJS.newRequest();request.onreadystatechange=function(){if(request.readyState==4){if(request.status==200){params.onComplete(request)}else{params.onComplete(request)}}};request.open(params.method,params.url);request.send(null)}})();if(typeof define==="function"){define("lib_template_ejs",function(c,b,a){a.exports=EJS})}else{if(typeof exports!=="undefined"){module.exports=EJS
}}$(function(){if($("#searchBox").size()>0){require(["common_search"],function(b){b.init()})}if($("#globalCart").size()>0||$("body>div.global-nav").size()>0){require(["common_cart"],function(b){b.refreshCart()})}if($("#globalMore").size()>0){$("#globalMore").on("click",function(){var b=$("#globalMoreList");if(b.hasClass("hide")){b.removeClass("hide")}else{b.addClass("hide")}});$(document.body).on("click",function(d){var c=d.target?d.target:d.srcElement;if(c){if($(c).closest("div.more_list").size()==0&&$(c).closest("#globalMore").size()==0){$("#globalMoreList").addClass("hide")}}})}if((typeof indexFlag!="undefined"&&indexFlag==1)||$("#cprovincename").length>0){require(["common_popupTips","common_mcookie","global_env"],function(h,f,e){var g=e.getProvinceId()||1;if(g&&g==currProvinceId){$("#cprovincename").html(h.proviceObj["p_"+g])
}else{if(currProvinceId){$("#cprovincename").html(h.proviceObj["p_"+currProvinceId])}else{$("#cprovincename").html(h.proviceObj.p_1)}}})}require(["common_back"],function(b){b.saveURL()})});$(function(){var e=$(".global-nav"),h=$(".global-nav__operate-wrap");h.on("click",function(){if(h.parent().hasClass("global-nav--current")){f()}else{g()}});var g=function(){e.addClass("global-nav--current")};var f=function(){e.removeClass("global-nav--current")};$(window).on("scroll",function(){if(e.hasClass("global-nav--current")){f()}});require(["global_env"],function(a){var b=a.isInApp();if(b){e.hide()}})});(function(){require(["common_popupTips","global_env"],function(h,i){if(typeof(_isNotglGeoLocation)!="undefined"&&_isNotglGeoLocation){return}var g=i.getProvinceId();if(!g&&glGeoLocation){var j=i.isInApp();
if(!j){var f=URLPrefix.index||"http://m.yhd.com";h.getGeo(f+"/mw/provice",f+"/mw/index/",pathurl+"/mglobal/css/popupTips.css")}}})})();(function(){function b(){require(["common_globalTiming"],function(d){function a(){var j=1;var c=[];if(typeof common_globalTimingRely!="undefined"&&common_globalTimingRely){var k=common_globalTimingRely.getRelyResource();if(k&&k.length>0){for(var l=0;l<k.length;l++){var i=k[l];if(i&&i.status!=1){j=0;break}else{if(i&&i.status==1){c.push(i.key+"_"+i.time)}}}}}if(j){d.loadBaseTime(c)}else{setTimeout(a,2000)}}setTimeout(a,2000)})}if(document.addEventListener){window.addEventListener("load",b,false)}else{if(document.attachEvent){document.attachEvent("onload",function(){b()})}}})();(function(){if(window.sessionStorage){var d=window.sessionStorage.getItem("latitude");
var c=window.sessionStorage.getItem("longitude");if(d&&c){trackerContainer.addParameter(new Parameter("latitude",d));trackerContainer.addParameter(new Parameter("longitude",c))}}})();$(function(){var b=$("#g_newUserMesssage");if(b){require(["biz_newUserMesssage"],function(a){})}});$(function(){var d=$("#g_openAppId");var c=document.referrer;if(d.length>0){if(c.indexOf("baidu.com")>-1||c.indexOf("haosou.com")>-1||c.indexOf("m.sm.cn")>-1||c.indexOf("sogou.com")>-1){require(["biz_appDownloadBottom"],function(a){})}else{d.hide()}}});function commonStatistics(h,g,f,e){addTrackPositionToCookie(g,f);if(e!=null&&e!=""){window.location=e+"?time="+(new Date().getTime())}else{gotracker(g,f,null)}}(function(){var f=window.utils||(window.utils={});var d=10;var e=function(h,c){var b="http:\\/\\/d(\\\d{1,2})\\.";
var a=new RegExp(b,"i");if(a.test(h)){if(d==11){d=10}else{d=11}return h.replace(a,"http://d"+d+".")}else{return h}};f.avgImgUrl=e})();define("common_globalTiming",function(){var f={};var g={};var e=".";g.checkTpPage=function(a){if(!a){return null}var b=a.split(e);return b.length==2?b:null};g.glSpmcodeToId=function(a,b){if(typeof(_globalSpmDataModelJson)!="undefined"&&_globalSpmDataModelJson){var c=0;if(a){c=_globalSpmDataModelJson[a][b]}else{c=_globalSpmDataModelJson[b]}if(c){return c}}return b};function h(){var a=$("meta[name=tp_page]").attr("content");if(typeof(a)=="undefined"){return}a=g.checkTpPage(a);if(!a){return}return g.glSpmcodeToId(null,a[0])}f.timeToStr=function(c,a){var b=[];for(var d in c){if(c[d].value==-1){continue}b.push(c[d].name+"_"+c[d].value)}if(a){if((typeof a=="object")&&a.constructor==Array){if(a.length>0){b=b.concat(a)
}}else{b.push(a)}}return(b.join("-"))};f.basicTime=function(d){if(!window.performance){return}var b=window.performance,i=b.timing,c=b.navigation,l={redirectCount:{name:"RDTT",value:c.redirectCount},redirectTime:{name:"RDTM",value:i.redirectEnd-i.redirectStart},domainLookupTime:{name:"DMLKT",value:i.domainLookupEnd-i.domainLookupStart},connectTime:{name:"CONTT",value:i.connectEnd-i.connectStart},requestTime:{name:"REQT",value:i.responseStart-(i.requestStart||i.responseStart+1)},responseTime:{name:"RSPT",func:function(){var j=i.responseEnd-i.responseStart;if(i.domContentLoadedEventStart){if(j<0){j=0}}else{j=-1}return j},value:-1},domParsingTime:{name:"DMPT",func:function(){return i.domContentLoadedEventStart?i.domInteractive-i.domLoading:-1},value:-1},domLoadedTime:{name:"DMLT",func:function(){if(i.loadEventStart){return i.loadEventStart-i.domInteractive
}return i.domComplete?i.domComplete-i.domInteractive:-1},value:-1},winOnLoadTime:{name:"ONLOADT",func:function(){return i.loadEventEnd?i.loadEventEnd-i.loadEventStart:-1},value:-1},pageLoadTime:{name:"PAGET",func:function(){if(i.loadEventStart){return i.loadEventStart-i.fetchStart}return i.domComplete?i.domComplete-i.fetchStart:-1},value:-1},allLoadTime:{name:"ALLT",func:function(){if(i.loadEventEnd){return i.loadEventEnd-i.navigationStart}return i.domComplete?i.domComplete-i.navigationStart:-1},value:-1},firstPaintTime:{name:"FPAINTT",func:function(){var j=i.firstPaint||i.msFirstPaint||i.mozFirstPaint||i.webkitFirstPaint||i.oFirstPaint;return j?j-i.navigationStart:-1},value:-1},beforeDomLoadingTime:{name:"BEFDMLT",func:function(){return i.domLoading?i.domLoading-i.navigationStart:-1},value:-1},resourcesLoadedTime:{name:"RESLOADT",func:function(){if(i.loadEventStart){return i.loadEventStart-i.domLoading
}return i.domComplete?i.domComplete-i.domLoading:-1},value:-1},scriptRunTime:{name:"SCRIPTT",func:function(){var j=i.domContentLoadedEventEnd-i.domContentLoadedEventStart;return j>0?j:-1},value:-1},customInteractTime:{name:"CINTT",func:function(){var j=window.global||(window.global={});var n=j.vars=(j.vars||{});var k=j.vars.customInteractTime;if(k){return k-window.performance.timing.navigationStart}else{return -1}},value:-1},interactTime:{name:"INTT",func:function(){if(i.domContentLoadedEventStart){return i.domContentLoadedEventStart-i.navigationStart}return -1},value:-1}};for(var a in l){if(l[a].value==-1&&typeof l[a].func=="function"){l[a].value=l[a].func()}}return this.timeToStr(l,d)};f.eventHandleTime=function(l){try{var a=[];if(typeof l=="undefined"){return false}else{if(l instanceof Array){var b=false;
for(var c=0;c<l.length;c++){var d=l[c];if(typeof d=="object"){if(typeof d.name=="undefined"||d.endTime=="undefined"||d.startTime=="undefined"){console.log("data format is wrong! propeties should have name or endTime or startTime ");continue}else{if(typeof d.endTime!="number"||typeof d.startTime!="number"){console.log(" endTime or startTime of "+d.name+"Object is not number type");continue}else{a.push(d.name+"_"+(d.endTime-d.startTime));b=true}}}else{console.log("data format of Array is wrong! should be single Object");continue}}if(b){f.sendTimerTracker(a.join("|"));return true}}else{if(typeof l=="object"){if(typeof l.name=="undefined"||l.startTime=="undefined"||l.endTime=="undefined"){console.log("data format is wrong! propeties should be name and startTime ");return false}else{if(typeof l.startTime!="number"||typeof l.endTime!="number"){console.log(" startTime of "+l.name+"Object is not number type");
return false}f.sendTimerTracker(l.name+"_"+(l.endTime-l.startTime));return true}}else{return false}}}}catch(i){}};f.sendTimerTracker=function(b){if(b&&$.trim(b)!=""){var a=h();if(!a||isNaN(a)||parseInt(a)<=0){recordTrackInfoWithType("2",b);return}var c={w_pt:a};recordTrackInfoWithType("2",b,null,null,c)}};f.loadBaseTime=function(a){if(!window.performance){return}if(typeof stopGlobalTimingLoadFlag=="undefined"){f.sendTimerTracker(f.basicTime(a))}};return f});define("common_yhd.storage",function(){var p=window.loli||(window.loli={});var v="localStorage",t="sessionStorage",n={},w={};n.set=function(a,b){};n.get=function(a){};n.remove=function(a){};n.clear=function(){};w.set=function(a,b){};w.get=function(a){};w.remove=function(a){};w.clear=function(){};function m(a){try{return(a in window&&window[a])
}catch(b){return false}}function u(b,a){var c=window[b];a.set=function(e,d){if(d===undefined){return c.remove(e)}c.setItem(e,d);return d};a.get=function(d){return c.getItem(d)};a.remove=function(d){c.removeItem(d)};a.clear=function(){c.clear()}}if(m(v)){u(v,n)}if(m(t)){u(t,w)}var q=function(){var c=true;var d=document.domain;var b=/([^\.]*)\.yhd\.com/;if(b.test(d)){var a=b.exec(d)[1];if(a!="www"){c=false}}return c};var r=function(){var a=window.navigator.userAgent.toLowerCase();var d=/safari/i;var b=/chrome/i;var c=/Android/i;if(d.test(a)&&!b.test(a)&&!c.test(a)){return true}return false};var x=function(){var a=new Date();return(a.getYear()+1900)+""+(a.getMonth()+1)};var s=function(h,j,f,l){var g=f||function(){};var a=(l&&l=="session")?w:n;if(q()){var i=a.set(h,j);g({status:1,key:h,value:i})
}else{if(r()&&l!="session"){$.fn.cookie(h,encodeURIComponent(j),{domain:"m.yhd.com",path:"/",expires:30});g({status:1,key:h,value:j});return}if(!window.postMessage||!window.addEventListener){g({status:0,key:h,value:null});return}var z="globalLocalStorageAdaptorForSet";var e=$("#"+z);if(e.size()==0){var c=document.createElement("iframe");c.setAttribute("id",z);c.setAttribute("style","display:none");c.setAttribute("src",window.location.protocol+"//www.yhd.com/html/setLocalStorageH5.html?v="+x());document.body.appendChild(c);e=$("#"+z)}if(e.attr("loaded")){var b=e.get(0).contentWindow;var k=window.location.protocol+"//www.yhd.com";var d={key:h,value:j,type:l};b.postMessage(d,k);setTimeout(function(){g({status:1,key:h,value:j})},200)}else{e.on("load",function(){$(this).attr("loaded","1");var y=$(this).get(0).contentWindow;
var D=window.location.protocol+"//www.yhd.com";var C={key:h,value:j,type:l};y.postMessage(C,D);setTimeout(function(){g({status:1,key:h,value:j})},200)})}}};var o=function(i,d,l){var h=d||function(){};var a=(l&&l=="session")?w:n;if(q()){var f=a.get(i);h({status:1,key:i,value:f})}else{if(r()&&l!="session"){var f=$.fn.cookie(i);if(f!==null){f=decodeURIComponent(f)}h({status:1,key:i,value:f});return}if(!window.postMessage||!window.addEventListener){h({status:0,key:i,value:null});return}var E=window["yhd.storage.get.callback"]||(window["yhd.storage.get.callback"]=[]);E.push(h);var k=E.length-1;var D="globalLocalStorageAdaptorForGet";var g=$("#"+D);if(g.size()==0){var C=document.createElement("iframe");C.setAttribute("id",D);C.setAttribute("style","display:none");C.setAttribute("src",window.location.protocol+"//www.yhd.com/html/getLocalStorageH5.html?v="+x());
document.body.appendChild(C);g=$("#"+D)}if(g.attr("loaded")){var b=g.get(0).contentWindow;var j=window.location.protocol+"//www.yhd.com";var e=window.location.protocol+"//"+window.location.host;var c={key:i,host:e,version:k,type:l};b.postMessage(c,j)}else{g.on("load",function(){$(this).attr("loaded","1");var y=$(this).get(0).contentWindow;var A=window.location.protocol+"//www.yhd.com";var z=window.location.protocol+"//"+window.location.host;var B={key:i,host:z,version:k,type:l};y.postMessage(B,A)})}var F=function(B){var y=/^http[s]?:\/\/([\.\w]*)\.yhd\.com/i;if(y.test(B.origin)){var z=B.data;if(z){var A=E[z.version];if(A){A({status:1,key:z.key,value:z.value})}else{h({status:1,key:z.key,value:z.value})}}}};if(!window["yhd.storage.get.handler"]){window.addEventListener("message",F);window["yhd.storage.get.handler"]=F
}}};n.setFromRoot=function(b,c,a){s(b,c,a,"local")};n.getFromRoot=function(a,b){o(a,b,"local")};w.setFromRoot=function(b,c,a){s(b,c,a,"session")};w.getFromRoot=function(a,b){o(a,b,"session")};p.yhdStore=n;p.yhdSessionStore=w;return n});define("common_search",["tracker_ref_yhd.global_spm","common_yhd.storage"],function(u,A){var s={};var x=(typeof isSearchKeyWords!="undefined"&&isSearchKeyWords=="1")?1:0;var q=(typeof indexFlag!="undefined"&&indexFlag==1)?1:0;var C=(typeof globalSearchSelectFlag!="undefined"&&globalSearchSelectFlag=="0")?0:1;var y=$("#keyword");var t=$("#searchSuggest");var B=$("#searchBtn");var D=$("#searchBox");var p=window.loli||(window.loli={});var v=p.app=p.app||{};var w=p.app.search=p.app.search||{};var z=URLPrefix.search||"http://search.m.yhd.com";w.delayCall=function(d,g,a,e){var f=$(d);
f.lastTime=new Date().getTime();if(g){var c=g.call(f);f.lastResult=c}var b=setTimeout(function(){var h=f.lastTime?f.lastTime:new Date().getTime();var i=(typeof f.lastResult=="undefined"||f.lastResult)?true:false;var j=new Date().getTime();if(j-h>=(e-50)){if(a&&i){a.call(f)}}},e)};w.filterXml=function(a){if(a!=null&&a!=""){a=a.replace(/\&/g,"");a=a.replace(/\</g,"");a=a.replace(/\>/g,"");a=a.replace(/\\/g,"");a=a.replace(/\'/g,"");a=a.replace(/\"/g,"")}return a};w.saveKeyword=function(b,c){var a=A;if(a){a.getFromRoot("search_keyword_history",function(i){if(i&&i.status==1){var f=i.value;var h=[];var d=[];if(f){h=f.split(",")}for(var e=0;e<h.length;e++){var g=w.filterXml(decodeURIComponent(decodeURIComponent(h[e])));if(g!=null&&g.length>0){d.push(g)}}var j=false;for(var e=0;e<d.length;e++){if(d[e]==b){j=true;
break}}if(!j){d.push(b);if(d.length>10){d.shift()}for(var e=0;e<d.length;e++){d[e]=encodeURIComponent(encodeURIComponent(d[e]))}a.setFromRoot("search_keyword_history",d.join(","),function(k){if(k&&k.status==1){if(c){c()}}})}else{if(c){c()}}}})}if(c){setTimeout(function(){c()},3*1000)}};w.getSearchKeywordUrl=function(a,c,b){if(b){a=a+" "+b}if(!c){c="0";return z+"/search/k"+encodeURIComponent(a)}return z+"/search/c"+c+"-0/k"+encodeURIComponent(a)};w.goSearch=function(c,a,d){var b=function(){var e=w.getSearchKeywordUrl(c,a,d);u.refreshPage(e,D)};w.saveKeyword(c,b)};w.showHistory=function(f,d){if(!C){return}var e=f.val();var c=A;var a=function(){var g=z+"/search/getSmartKeyword/?callback=?";$.getJSON(g,function(j){if(j&&j.hotSearchKeywords&&j.hotSearchKeywords.length>0){var h=[];for(var i=0;i<j.hotSearchKeywords.length;
i++){var k=w.filterXml(j.hotSearchKeywords[i]);h.push("<a class='item' href='javascript:goSearch(\""+k+"\")'>"+k+"</a>")}$("div.tags",d).html(h.join(""));$("div.tags",d).show()}if(c){c.getFromRoot("search_keyword_history",function(H){if(H&&H.status==1){var G=H.value;var m=[];var n=[];if(G){m=G.split(",")}for(var o=m.length-1;o>=0;o--){var l=w.filterXml(decodeURIComponent(decodeURIComponent(m[o])));if(l!=null&&l.length>0){n.push("<li><a class='link_text' href='javascript:goSearch(\""+l+"\")'>");n.push("<span class='icon icon-history'></span>");n.push("<span class='text'>"+l+"</span>");n.push("<span class='icon_arrow icon-right_arrow'></span>");n.push("</a></li>")}}$("ul",d).html(n.join(""));if(m.length==0){d.find("a.clear_history").hide()}else{d.find("a.clear_history").show()}}})}$("#globalHeader").addClass("search_show");
b(f,d)})};var b=function(h,g){g.on("click","a.clear_history",function(){c.setFromRoot("search_keyword_history","");$(this).hide();$("ul",g).html("")})};if(e==""||$.trim(e)==""){a()}};w.showSuggest=function(c,a){if(!C){return}var b=w.filterXml(c.val());var d=function(){var e=z+"/search/getSmartKeyword/?keyword="+encodeURIComponent(b)+"&callback=?";$.getJSON(e,function(f){if(f){var h=[];var k=b;if(f.keywords&&f.keywords.length>0){var g=f.keywords[0];k=f.keywords[0].keyword;h.push("<li>");h.push("<a class='link_text' href='javascript:goSearch(\""+g.keyword+"\")'>");h.push("<span class='icon icon-search'></span>");h.push("<span class='text'>"+g.keyword+"</span>");h.push("</a>");for(var j=0;j<g.attrs.length;j++){h.push("<a class='link_tag' href='javascript:goSearch(\""+g.keyword+'",0,"'+g.attrs[j]+"\")'>"+g.attrs[j]+"</a>")
}h.push("</li>")}if(f.recommendCID1&&f.recommendCNA1){h.push("<li><a class='link_text' href='javascript:goSearch(\""+k+'","'+f.recommendCID1+"\")'>");h.push("<span class='icon icon-sort'></span>");h.push("<span class='text_category'>在<strong>"+f.recommendCNA1+"</strong>分类中搜索</span>");h.push("<span class='icon_arrow icon-right_arrow'></span>");h.push("</li></a>")}if(f.recommendCID2&&f.recommendCNA2){h.push("<li><a class='link_text' href='javascript:goSearch(\""+k+'","'+f.recommendCID2+"\")'>");h.push("<span class='icon icon-sort'></span>");h.push("<span class='text_category'>在<strong>"+f.recommendCNA2+"</strong>分类中搜索</span>");h.push("<span class='icon_arrow icon-right_arrow'></span>");h.push("</li></a>")}if(f.keywords&&f.keywords.length>0){for(var i=1;i<f.keywords.length;i++){var g=f.keywords[i];
h.push("<li>");h.push("<a class='link_text' href='javascript:goSearch(\""+g.keyword+"\")'>");h.push("<span class='icon icon-search'></span>");h.push("<span class='text'>"+g.keyword+"</span>");h.push("</a>");for(var j=0;j<g.attrs.length;j++){h.push("<a class='link_tag' href='javascript:goSearch(\""+g.keyword+'",0,"'+g.attrs[j]+"\")'>"+g.attrs[j]+"</a>")}h.push("</li>")}}$("ul",a).html(h.join(""));$("div.tags",a).hide();a.find("a.clear_history").hide();$("#globalHeader").addClass("search_show")}})};if(b!=""&&$.trim(b)!=""){d()}};w.registerGlobalEvent=function(){var a=function(e,g,c){e=e||window.event;if(e){var d=e.keyCode;if(d=="116"||d=="16"||d=="17"||d=="18"||d=="38"||d=="40"||d=="13"){return}}var f=w.filterXml(g.val());if(f==""||$.trim(f)==""){w.delayCall(g,function(){D.find("span.icon_delete").hide()
},function(){w.showHistory(g,c)},200)}else{w.delayCall(g,function(){D.find("span.icon_delete").show()},function(){w.showSuggest(g,c)},200)}};var b=function(d,f,c){var e=w.filterXml(f.val());if(e==""||$.trim(e)==""){w.delayCall(f,null,function(){w.showHistory(f,c)},200)}else{w.delayCall(f,null,function(){w.showSuggest(f,c)},200)}};y.on("focus",function(c){b(c,y,t)});y.on("input",function(c){a(c,y,t)});B.on("click",function(c){var d=w.filterXml(y.val());if(d!=""&&$.trim(d)!=""){w.goSearch(d)}});$("#searchForm").on("submit",function(){var c=w.filterXml(y.val());if(c!=""&&$.trim(c)!=""){w.goSearch(c)}return false});r()};function r(){D.on("click","span.icon_back",function(){y.val(y.attr("data-original"));D.find("span.icon_delete").hide();$("#globalHeader").removeClass("search_show")});D.on("click","span.icon_delete",function(a){y.val("");
D.find("span.icon_delete").hide();y.trigger("focus")});$("#searchMask").on("click",function(){y.val(y.attr("data-original"));D.find("span.icon_delete").hide();$("#globalHeader").removeClass("search_show")})}s.init=function(){if("shop"==globalTopType||"groupShop"==globalTopType){r();y.on("click",function(){$("#globalHeader").addClass("search_show");t.hide()});return}w.registerGlobalEvent();window.goSearch=function(a,c,b){w.goSearch(a,c,b)}};s.show=function(){var a=w.filterXml(y.val());if(a==""||$.trim(a)==""){w.showHistory(y,t)}else{w.showSuggest(y,t)}};return s});define("biz_newUserMesssage",["common_mcookie","util_globalLogin"],function(l,h){var i=$("#g_newUserMesssage");function m(e){var a=new Date(),d=a.getTime()%(1000*60*60*24),b=e.getTime()-a.getTime(),c=b+d;if(c<0||c>1000*60*60*24){return false
}else{return true}}var j=function(a){if(a.result==1){i.hide()}else{i.show()}};function k(){var b=localStorage.getItem("newUserMesssage");if(b){var a=new Date(b);if(m(a)){i.hide()}else{i.show()}}else{i.show()}}var n=l.getCookie("yihaodian_uid");if(n){i.hide()}else{k();h.globalCheckLogin(j)}i.on("click",".icon-delete",function(){i.hide();localStorage.setItem("newUserMesssage",(new Date()).toISOString())})});define("biz_popupAppDownload",["common_mcookie","lib_template_ejs"],function(c,b){var f=function(){var k=0;var j=window.localStorage;if(j){var l=j.getItem("apolloDonwloadFlag");if(l&&!isNaN(l)){var i=new Date().getTime()-parseInt(l);if(i>=0&&i<3*24*3600*1000){k=1}}}return k};var a=function(){return window.location.search!=""&&(window.location.search.indexOf("from=")>0||window.location.search.indexOf("Apphost=")>0)
};var h=function(l){var k=websiteurl+"/mobile/homePage/ajaxFindAppDownloadInfo.do";var j=function(m){var n=g(m);if(n){$(document.body).append(n);d()}};var i={url:l};$.getJSON(k,i,function(m){if(m){if(m.status==1){j(m.data)}}})};var g=function(j){var l=false;var i=/(iPod|iTouch|iPhone|iPad)/i;if(i.test(window.navigator.userAgent)){l=true}var n=websiteurl+"/statics/mglobal/js/biz/popupAppDownload.ejs";var k={pathurl:pathurl,isIOS:l,data:j};var m=new b({url:n}).render(k);return m};var d=function(){setTimeout(function(){$("#globalPopupAppDownload").show()},200);$("#globalPopupAppDownload_close").click(function(){$("#globalPopupAppDownload").hide();gotracker("2","h5_global_popupAppDownload_close")});$("#globalPopupAppDownload div.layout_white").get(0).addEventListener("touchmove",function(){$("#globalPopupAppDownload").hide();
gotracker("2","h5_global_popupAppDownload_close")},false);$("#globalPopupAppDownload_link1,#globalPopupAppDownload_link2").click(function(){$("#globalPopupAppDownload").hide();gotracker("2",$(this).attr("data-ref"))});var i=window.localStorage;if(i){i.setItem("apolloDonwloadFlag",new Date().getTime())}};var e={};e.init=function(i){if(!f()&&!a()&&i){h(i)}};return e});define("common_back",["tracker_ref_yhd.global_spm","common_yhd.storage"],function(z,D){var F={};var L=window.loli||(window.loli={});var w=L.app=L.app||{};var B=L.app.url=L.app.url||{};var H=L.yhdSessionStore;var x=L.app.url.cfg=L.app.url.cfg||{enable:true,type:"url",maxSize:100};var J=function(){var a="user_browse_history";if(window.name==""){window.name=new Date().getTime()}return a+"_"+window.name};var G=J();var K=function(a){H.getFromRoot(G,function(b){var d=null;
if(b&&b.status==1){var c=b.value;d=(c!=null&&c!="")?$.parseJSON(c):null}a(d)})};var A=function(b,c){var a=b?JSON.stringify(b):"";H.setFromRoot(G,a,function(d){if(c){c(d)}})};var u=function(c){var f="";var a="";var h="";var e="";var b=/^(http[s]?:\/\/[\.\w]*\.yhd\.com)[\/]?/i;var g=/^http[s]?:\/\/[\.\w]*\.yhd\.com(\/[^\?]*\/?)[\?\#]*/i;var d=/(\?[^\#]*)/i;var i=/(\#.*)/i;if(b.test(c)){f=b.exec(c)[1]}if(g.test(c)){a=g.exec(c)[1]}if(d.test(c)){h=d.exec(c)[1]}if(i.test(c)){e=i.exec(c)[1]}return{domain:f,path:a,params:h,hash:e}};var v=function(e,d){var a=new RegExp("[?&]"+d+"=[^&#]*");var b=e;if(a.test(e)){var c=a.exec(e)[0];if(c.charAt(0)=="?"){b=e.replace(a,"?")}else{b=e.replace(a,"")}if(b.indexOf("?&")!=-1){b=b.substring(0,b.indexOf("?&")+1)+b.substring(b.indexOf("?&")+2)}if(b.charAt(b.length-1)=="?"){b=b.substring(0,b.length-1)
}}return b};var I=function(a){var b=/(\#.*)/i;var c=a;if(b.test(a)){c=a.replace(b,"")}return c};var y=function(a){var b=v(a,"tp");b=v(b,"tc");b=v(b,"tce");return b};var t=function(l,h){var e=window.user_browse_history;var k=y(document.location.href);var f=-1;if(e&&e.data&&e.data.length>0){if(l=="url"){if(h){for(var c=e.index-1;c>=0;c--){var j=I(y(e.data[c]));if(j&&h==j){f=c-e.index;break}}}else{var a=I(y(k));var b=false;for(var c=e.index-1;c>=0;c--){var j=I(y(e.data[c]));if(j&&a!=j){f=c-e.index;b=true;break}}if(!b){if(window.history.length>e.data.length){f=0-(e.index+1)}}}}else{if(l=="path"){if(h){for(var c=e.index-1;c>=0;c--){var j=y(e.data[c]);if(j){var d=u(j);if(d.path==h){f=c-e.index;break}}}}else{var i=u(k).path;var b=false;for(var c=e.index-1;c>=0;c--){var j=y(e.data[c]);if(j){var d=u(j);
if(d.path!=i){f=c-e.index;b=true;break}}}if(!b){if(window.history.length>e.data.length){f=0-(e.index+1)}}}}else{if(l=="domain"){if(h){for(var c=e.index-1;c>=0;c--){var j=y(e.data[c]);if(j){var d=u(j);if(d.domain==h){f=c-e.index;break}}}}else{var g=u(k).domain;var b=false;for(var c=e.index-1;c>=0;c--){var j=y(e.data[c]);if(j){var d=u(j);if(d.domain!=g){f=c-e.index;b=true;break}}}if(!b){if(window.history.length>e.data.length){f=0-(e.index+1)}}}}else{if(h){for(var c=e.index-1;c>=0;c--){var j=y(e.data[c]);if(j&&h==j){f=c-e.index;break}}}else{f=-1}}}}}return f};var E=function(d,c){var f=window.user_browse_history!=null?window.user_browse_history:{data:[],index:-1,timestamp:0};var b=document.location.href;if(!d){return}if(d==1){if(f.data&&f.data.length>0){var a=f.data[f.index];if(a==b){return}}if(f.data&&f.data.length>0&&f.index>-1){if(f.data.length-1>=f.index+1){f.data.splice(f.index+1)
}}f.data.push(b);f.index=f.index+1}else{if(d==2){f={data:[],index:-1};f.data.push(b);f.index=f.index+1}else{if(d==3){if(f.index!=-1){f.index=f.index-1}}else{if(d==4){if(f.index!=-1){f.index=f.index+1}}else{if(d==5){if(c!=-1){f.index=c}}}}}}var e=f.data.length-x.maxSize;if(e>0&&f.index>=e){f.data.splice(0,e);f.index=f.index-e}f.timestamp=new Date().getTime();f.historyLength=window.history.length;A(f,function(){window.user_browse_history=f})};var C=function(b){var h=document.location.href;var f=0;var e=-1;if(b&&b.data&&b.data.length>0&&b.index>-1){var g=b.data[b.index-1];var a=b.data[b.index+1];if(h==g){f=3}else{if(h==a){f=4}else{f=5;for(var c=b.index-1;c>=0;c--){var d=b.data[c];if(d==h){e=c;break}}if(e==-1){for(var c=b.index;c<b.data.length;c++){var d=b.data[c];if(d==h){e=c;break}}}if(e==-1){f=2
}}}}else{f=2}return{flag:f,curIndex:e}};B.saveURL=function(){var a=document.referrer;var b=document.location.href;if(window.user_browse_history){return}K(function(e){window.user_browse_history=e;var f=0;var d=-1;if(!e||!e.data||e.data.length==0){f=2;E(f);return}var g=window.performance.navigation.type;if(g==0){if(e&&e.data&&e.data.length>0){var h=e.data[e.index];if(a==""){if(window.history.length-1>e.historyLength){f=2}else{f=1}}else{if(a==h||a==I(h)){f=1}else{f=2}}}else{f=2}}else{if(g==1){f=0;if(e&&e.data&&e.data.length>0){var h=e.data[e.index];if(h!=b){f=2}}else{f=2}}else{if(g==2){var c=C(e);f=c.flag;d=c.curIndex}else{f=1}}}if(f){E(f,d)}})};B.saveAnchor=function(){var b=window.history.length;var a=window.history.state;window.onpopstate=function(d){var c=d||window.event;var i=document.location.href;
var f=0;var h=-1;var g=function(l){if(!l||!l.data||l.data.length==0){f=2;E(f);return}if(l.data&&l.data.length>0){var n=l.data[l.index];if(n==i){return}}if(l&&l.data&&l.data.length>0&&l.index>-1){var n=l.data[l.index];if(I(i)!=I(n)){var k=C(l);f=k.flag;h=k.curIndex;E(f,h);return}}if(b==window.history.length){var m=window.history.state;if(m==null&&a!=null){f=3}else{if(m!=null&&a!=null){if(m.timestamp<=a.timestamp){f=3}else{f=4}}else{if(m!=null&&a==null){f=4}else{f=0}}}}else{var j=new Date().getTime();window.history.replaceState({timestamp:j},"",document.location.hash);f=1}b=window.history.length;a=window.history.state;if(f){E(f,h)}};var e=window.user_browse_history;if(e){g(e)}else{K(g)}}};B.goBack=function(b,c){var d=b?b:x.type;var a=t(d,c);window.history.go(a)};B.isHTML5=function(){if(window.performance&&window.history.replaceState&&window.sessionStorage&&window.postMessage){return true
}return false};F.saveURL=function(){if(L.app.url.isHTML5()){L.app.url.saveURL();L.app.url.saveAnchor()}};F.init=function(a){if(a){x=$.extend(x,a)}if(!x.enable){return}if(L.app.url.isHTML5()){$("#topIconBack").attr("href","javascript:void(0);");$("#topIconBack").off().on("click",function(){L.app.url.goBack()})}};return F});$(window).on("scroll",function(){var e=$(this);var f=e.scrollTop();var d=e.height();if(f>d){$(".touchweb_com-backTop").addClass("show")}else{$(".touchweb_com-backTop").removeClass("show")}});