define("common_yhd.storage",function(){var p=window.loli||(window.loli={});var v="localStorage",t="sessionStorage",n={},w={};n.set=function(a,b){};n.get=function(a){};n.remove=function(a){};n.clear=function(){};w.set=function(a,b){};w.get=function(a){};w.remove=function(a){};w.clear=function(){};function m(a){try{return(a in window&&window[a])}catch(b){return false}}function u(b,a){var c=window[b];a.set=function(e,d){if(d===undefined){return c.remove(e)}c.setItem(e,d);return d};a.get=function(d){return c.getItem(d)};a.remove=function(d){c.removeItem(d)};a.clear=function(){c.clear()}}if(m(v)){u(v,n)}if(m(t)){u(t,w)}var q=function(){var c=true;var d=document.domain;var b=/([^\.]*)\.yhd\.com/;if(b.test(d)){var a=b.exec(d)[1];if(a!="www"){c=false}}return c};var r=function(){var a=window.navigator.userAgent.toLowerCase();
var d=/safari/i;var b=/chrome/i;var c=/Android/i;if(d.test(a)&&!b.test(a)&&!c.test(a)){return true}return false};var x=function(){var a=new Date();return(a.getYear()+1900)+""+(a.getMonth()+1)};var s=function(h,j,f,l){var g=f||function(){};var a=(l&&l=="session")?w:n;if(q()){var i=a.set(h,j);g({status:1,key:h,value:i})}else{if(r()&&l!="session"){$.fn.cookie(h,encodeURIComponent(j),{domain:"m.yhd.com",path:"/",expires:30});g({status:1,key:h,value:j});return}if(!window.postMessage||!window.addEventListener){g({status:0,key:h,value:null});return}var z="globalLocalStorageAdaptorForSet";var e=$("#"+z);if(e.size()==0){var c=document.createElement("iframe");c.setAttribute("id",z);c.setAttribute("style","display:none");c.setAttribute("src",window.location.protocol+"//www.yhd.com/html/setLocalStorageH5.html?v="+x());
document.body.appendChild(c);e=$("#"+z)}if(e.attr("loaded")){var b=e.get(0).contentWindow;var k=window.location.protocol+"//www.yhd.com";var d={key:h,value:j,type:l};b.postMessage(d,k);setTimeout(function(){g({status:1,key:h,value:j})},200)}else{e.on("load",function(){$(this).attr("loaded","1");var y=$(this).get(0).contentWindow;var D=window.location.protocol+"//www.yhd.com";var C={key:h,value:j,type:l};y.postMessage(C,D);setTimeout(function(){g({status:1,key:h,value:j})},200)})}}};var o=function(i,d,l){var h=d||function(){};var a=(l&&l=="session")?w:n;if(q()){var f=a.get(i);h({status:1,key:i,value:f})}else{if(r()&&l!="session"){var f=$.fn.cookie(i);if(f!==null){f=decodeURIComponent(f)}h({status:1,key:i,value:f});return}if(!window.postMessage||!window.addEventListener){h({status:0,key:i,value:null});
return}var E=window["yhd.storage.get.callback"]||(window["yhd.storage.get.callback"]=[]);E.push(h);var k=E.length-1;var D="globalLocalStorageAdaptorForGet";var g=$("#"+D);if(g.size()==0){var C=document.createElement("iframe");C.setAttribute("id",D);C.setAttribute("style","display:none");C.setAttribute("src",window.location.protocol+"//www.yhd.com/html/getLocalStorageH5.html?v="+x());document.body.appendChild(C);g=$("#"+D)}if(g.attr("loaded")){var b=g.get(0).contentWindow;var j=window.location.protocol+"//www.yhd.com";var e=window.location.protocol+"//"+window.location.host;var c={key:i,host:e,version:k,type:l};b.postMessage(c,j)}else{g.on("load",function(){$(this).attr("loaded","1");var y=$(this).get(0).contentWindow;var A=window.location.protocol+"//www.yhd.com";var z=window.location.protocol+"//"+window.location.host;
var B={key:i,host:z,version:k,type:l};y.postMessage(B,A)})}var F=function(B){var y=/^http[s]?:\/\/([\.\w]*)\.yhd\.com/i;if(y.test(B.origin)){var z=B.data;if(z){var A=E[z.version];if(A){A({status:1,key:z.key,value:z.value})}else{h({status:1,key:z.key,value:z.value})}}}};if(!window["yhd.storage.get.handler"]){window.addEventListener("message",F);window["yhd.storage.get.handler"]=F}}};n.setFromRoot=function(b,c,a){s(b,c,a,"local")};n.getFromRoot=function(a,b){o(a,b,"local")};w.setFromRoot=function(b,c,a){s(b,c,a,"session")};w.getFromRoot=function(a,b){o(a,b,"session")};p.yhdStore=n;p.yhdSessionStore=w;return n});